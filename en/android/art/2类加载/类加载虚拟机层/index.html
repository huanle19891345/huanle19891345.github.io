<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.80.0" />
    <meta name="description" content="Documentation for Hugo Learn Theme">
<meta name="author" content="Mathieu Cornic">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>类加载虚拟机层 :: 郑欢的学习总结</title>

    
    <link href="/css/nucleus.css?1623725214" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1623725214" rel="stylesheet">
    <link href="/css/hybrid.css?1623725214" rel="stylesheet">
    <link href="/css/featherlight.min.css?1623725214" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1623725214" rel="stylesheet">
    <link href="/css/auto-complete.css?1623725214" rel="stylesheet">
    <link href="/css/atom-one-dark.css?1623725214" rel="stylesheet">
    <link href="/css/theme.css?1623725214" rel="stylesheet">
    <link href="/css/hugo-theme.css?1623725214" rel="stylesheet">
    
    <link href="/css/theme-mine.css?1623725214" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1623725214"></script>

    <script src="/js/auto_toc_scroll.js?1623725214"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

  </head>
  <body class="" data-url="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/en'>
    <img src="/avatar.png" width="60px" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1623725214"></script>
<script type="text/javascript" src="/js/auto-complete.js?1623725214"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/huanle19891345.github.io\/\/en";
    
</script>
<script type="text/javascript" src="/js/search.js?1623725214"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/en/android/" title="android" class="dd-item
        parent
        
        
        ">
      <a href="/en/android/">
          android
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/aop/" title="aop" class="dd-item
        
        
        
        ">
      <a href="/en/android/aop/">
          aop
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/aop/asm%E8%AE%BF%E5%AE%A2%E8%80%85%E6%A8%A1%E5%BC%8F/" title="ASM访客者模式" class="dd-item ">
        <a href="/en/android/aop/asm%E8%AE%BF%E5%AE%A2%E8%80%85%E6%A8%A1%E5%BC%8F/">
        ASM访客者模式
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/aop/jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" title="JDK动态代理" class="dd-item ">
        <a href="/en/android/aop/jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/">
        JDK动态代理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/aop/%E7%BC%96%E8%AF%91%E6%8F%92%E6%A1%A9%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" title="编译插桩和动态代理" class="dd-item ">
        <a href="/en/android/aop/%E7%BC%96%E8%AF%91%E6%8F%92%E6%A1%A9%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/">
        编译插桩和动态代理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/" title="art" class="dd-item
        parent
        
        
        ">
      <a href="/en/android/art/">
          art
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/1%E7%B1%BB%E7%BC%96%E8%AF%91/" title="1类编译" class="dd-item
        
        
        
        ">
      <a href="/en/android/art/1%E7%B1%BB%E7%BC%96%E8%AF%91/">
          1类编译
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/1%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat/" title="dex2oat" class="dd-item ">
        <a href="/en/android/art/1%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat/">
        dex2oat
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/1%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat%E4%BB%8B%E7%BB%8D/" title="dex2oat介绍" class="dd-item ">
        <a href="/en/android/art/1%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat%E4%BB%8B%E7%BB%8D/">
        dex2oat介绍
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/" title="2类加载" class="dd-item
        parent
        
        
        ">
      <a href="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/">
          2类加载
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/android_n%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91%E4%B8%8E%E5%AF%B9%E7%83%AD%E8%A1%A5%E4%B8%81%E5%BD%B1%E5%93%8D%E8%A7%A3%E6%9E%90/" title="Android_N混合编译与对热补丁影响解析" class="dd-item ">
        <a href="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/android_n%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91%E4%B8%8E%E5%AF%B9%E7%83%AD%E8%A1%A5%E4%B8%81%E5%BD%B1%E5%93%8D%E8%A7%A3%E6%9E%90/">
        Android_N混合编译与对热补丁影响解析
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" title="类加载" class="dd-item ">
        <a href="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD/">
        类加载
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82/" title="类加载虚拟机层" class="dd-item active">
        <a href="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82/">
        类加载虚拟机层
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/alloc_gc/" title="alloc_gc" class="dd-item
        
        
        
        ">
      <a href="/en/android/art/alloc_gc/">
          alloc_gc
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/1space/" title="1Space" class="dd-item ">
        <a href="/en/android/art/alloc_gc/1space/">
        1Space
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/2alloc/" title="2Alloc" class="dd-item ">
        <a href="/en/android/art/alloc_gc/2alloc/">
        2Alloc
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/allocrelated/" title="AllocRelated" class="dd-item ">
        <a href="/en/android/art/alloc_gc/allocrelated/">
        AllocRelated
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/gc/" title="GC" class="dd-item ">
        <a href="/en/android/art/alloc_gc/gc/">
        GC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/gc1_ms_cms/" title="GC1_MS_CMS" class="dd-item ">
        <a href="/en/android/art/alloc_gc/gc1_ms_cms/">
        GC1_MS_CMS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/gc2_concurrentcopying/" title="GC2_ConcurrentCopying" class="dd-item ">
        <a href="/en/android/art/alloc_gc/gc2_concurrentcopying/">
        GC2_ConcurrentCopying
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/gc3_markcompact/" title="GC3_MarkCompact" class="dd-item ">
        <a href="/en/android/art/alloc_gc/gc3_markcompact/">
        GC3_MarkCompact
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/gc4_semi_space/" title="GC4_Semi_Space" class="dd-item ">
        <a href="/en/android/art/alloc_gc/gc4_semi_space/">
        GC4_Semi_Space
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/alloc_gc/runtime_visitroots/" title="Runtime_VisitRoots" class="dd-item ">
        <a href="/en/android/art/alloc_gc/runtime_visitroots/">
        Runtime_VisitRoots
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/art_lock/" title="ART_Lock" class="dd-item ">
        <a href="/en/android/art/art_lock/">
        ART_Lock
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/jni/" title="jni" class="dd-item
        
        
        
        ">
      <a href="/en/android/art/jni/">
          jni
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/jni/java_jni%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86/" title="java_jni方法调用原理" class="dd-item ">
        <a href="/en/android/art/jni/java_jni%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86/">
        java_jni方法调用原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/jni/jni%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2/" title="Jni数据转换" class="dd-item ">
        <a href="/en/android/art/jni/jni%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2/">
        Jni数据转换
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/jni/systemloadlibrary/" title="SystemLoadLibrary" class="dd-item ">
        <a href="/en/android/art/jni/systemloadlibrary/">
        SystemLoadLibrary
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/jni/%E5%BC%82%E5%B8%B8/" title="异常" class="dd-item ">
        <a href="/en/android/art/jni/%E5%BC%82%E5%B8%B8/">
        异常
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/jni/%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C7_0/" title="解释执行7_0" class="dd-item ">
        <a href="/en/android/art/jni/%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C7_0/">
        解释执行7_0
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="启动流程" class="dd-item
        
        
        
        ">
      <a href="/en/android/art/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">
          启动流程
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/art%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="ART启动流程" class="dd-item ">
        <a href="/en/android/art/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/art%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">
        ART启动流程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="基础数据结构" class="dd-item ">
        <a href="/en/android/art/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
        基础数据结构
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/art/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/" title="混合编译_运行" class="dd-item
        
        
        
        ">
      <a href="/en/android/art/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/">
          混合编译_运行
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/jvm_jit/" title="JVM_JIT" class="dd-item ">
        <a href="/en/android/art/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/jvm_jit/">
        JVM_JIT
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/art/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/" title="混合编译_运行" class="dd-item ">
        <a href="/en/android/art/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/">
        混合编译_运行
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/gradlejenkins/" title="gradlejenkins" class="dd-item
        
        
        
        ">
      <a href="/en/android/gradlejenkins/">
          gradlejenkins
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/gradlejenkins/androidplugin/" title="AndroidPlugin" class="dd-item ">
        <a href="/en/android/gradlejenkins/androidplugin/">
        AndroidPlugin
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/gradlejenkins/android%E6%89%93%E5%8C%85/" title="android打包" class="dd-item
        
        
        
        ">
      <a href="/en/android/gradlejenkins/android%E6%89%93%E5%8C%85/">
          android打包
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/gradlejenkins/android%E6%89%93%E5%8C%85/android%E6%89%93%E5%8C%85/" title="Android打包" class="dd-item ">
        <a href="/en/android/gradlejenkins/android%E6%89%93%E5%8C%85/android%E6%89%93%E5%8C%85/">
        Android打包
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/gradlejenkins/gradledebug/" title="GradleDebug" class="dd-item ">
        <a href="/en/android/gradlejenkins/gradledebug/">
        GradleDebug
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/gradlejenkins/gradleplugin/" title="GradlePlugin" class="dd-item ">
        <a href="/en/android/gradlejenkins/gradleplugin/">
        GradlePlugin
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/gradlejenkins/gradle%E6%89%93%E5%8C%85%E8%BF%87%E7%A8%8B/" title="Gradle打包过程" class="dd-item ">
        <a href="/en/android/gradlejenkins/gradle%E6%89%93%E5%8C%85%E8%BF%87%E7%A8%8B/">
        Gradle打包过程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/gradlejenkins/transform/" title="Transform" class="dd-item ">
        <a href="/en/android/gradlejenkins/transform/">
        Transform
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/" title="jetpack" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/">
          jetpack
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/" title="arch" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/">
          arch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/1lifecycle/" title="1lifecycle" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/1lifecycle/">
          1lifecycle
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/1lifecycle/lifecycle/" title="Lifecycle" class="dd-item ">
        <a href="/en/android/jetpack/arch/1lifecycle/lifecycle/">
        Lifecycle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/1lifecycle/lifecyclecoroutine/" title="LifecycleCoroutine" class="dd-item ">
        <a href="/en/android/jetpack/arch/1lifecycle/lifecyclecoroutine/">
        LifecycleCoroutine
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/2livedata/" title="2livedata" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/2livedata/">
          2livedata
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/2livedata/1mediatorlivedata/" title="1MediatorLiveData" class="dd-item ">
        <a href="/en/android/jetpack/arch/2livedata/1mediatorlivedata/">
        1MediatorLiveData
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/2livedata/livedata/" title="LiveData" class="dd-item ">
        <a href="/en/android/jetpack/arch/2livedata/livedata/">
        LiveData
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/2livedata/livedatacoroutine/" title="LiveDataCoroutine" class="dd-item ">
        <a href="/en/android/jetpack/arch/2livedata/livedatacoroutine/">
        LiveDataCoroutine
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/2livedata/transformations/" title="Transformations" class="dd-item ">
        <a href="/en/android/jetpack/arch/2livedata/transformations/">
        Transformations
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/3viewmodel/" title="3viewmodel" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/3viewmodel/">
          3viewmodel
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/3viewmodel/saveandrestoreinstancestate/" title="SaveAndRestoreInstanceState" class="dd-item ">
        <a href="/en/android/jetpack/arch/3viewmodel/saveandrestoreinstancestate/">
        SaveAndRestoreInstanceState
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/3viewmodel/savedstatehandle/" title="SavedStateHandle" class="dd-item ">
        <a href="/en/android/jetpack/arch/3viewmodel/savedstatehandle/">
        SavedStateHandle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/3viewmodel/savingstates/" title="SavingStates" class="dd-item ">
        <a href="/en/android/jetpack/arch/3viewmodel/savingstates/">
        SavingStates
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/3viewmodel/viewmodel/" title="ViewModel" class="dd-item ">
        <a href="/en/android/jetpack/arch/3viewmodel/viewmodel/">
        ViewModel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/3viewmodel/viewmodelscope_delegate/" title="ViewModelScope_Delegate" class="dd-item ">
        <a href="/en/android/jetpack/arch/3viewmodel/viewmodelscope_delegate/">
        ViewModelScope_Delegate
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/coroutines/" title="Coroutines" class="dd-item ">
        <a href="/en/android/jetpack/arch/coroutines/">
        Coroutines
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/databinding/" title="databinding" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/databinding/">
          databinding
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/databinding/databinding/" title="Databinding" class="dd-item ">
        <a href="/en/android/jetpack/arch/databinding/databinding/">
        Databinding
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/databinding/twowaydatabinding/" title="TwoWayDataBinding" class="dd-item ">
        <a href="/en/android/jetpack/arch/databinding/twowaydatabinding/">
        TwoWayDataBinding
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/di/" title="di" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/di/">
          di
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/di/di/" title="DI" class="dd-item ">
        <a href="/en/android/jetpack/arch/di/di/">
        DI
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/di/hiltsource/" title="HiltSource" class="dd-item ">
        <a href="/en/android/jetpack/arch/di/hiltsource/">
        HiltSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/" title="架构实现" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/">
          架构实现
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/kaptgenerateviewmodel/" title="KaptGenerateViewModel" class="dd-item ">
        <a href="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/kaptgenerateviewmodel/">
        KaptGenerateViewModel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83%E5%92%8C%E5%AE%9E%E7%8E%B0/" title="架构思考和实现" class="dd-item ">
        <a href="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83%E5%92%8C%E5%AE%9E%E7%8E%B0/">
        架构思考和实现
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83%E5%92%8C%E5%AE%9E%E7%8E%B0inner/" title="架构思考和实现Inner" class="dd-item ">
        <a href="/en/android/jetpack/arch/%E6%9E%B6%E6%9E%84%E5%AE%9E%E7%8E%B0/%E6%9E%B6%E6%9E%84%E6%80%9D%E8%80%83%E5%92%8C%E5%AE%9E%E7%8E%B0inner/">
        架构思考和实现Inner
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/compose/" title="compose" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/compose/">
          compose
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/compose/compose/" title="Compose" class="dd-item ">
        <a href="/en/android/jetpack/compose/compose/">
        Compose
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/compose/composesource/" title="ComposeSource" class="dd-item ">
        <a href="/en/android/jetpack/compose/composesource/">
        ComposeSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/compose/layoutnode/" title="LayoutNode" class="dd-item ">
        <a href="/en/android/jetpack/compose/layoutnode/">
        LayoutNode
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/compose/recomposition/" title="ReComposition" class="dd-item ">
        <a href="/en/android/jetpack/compose/recomposition/">
        ReComposition
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/supporttoandroidx/" title="SupportToAndroidx" class="dd-item ">
        <a href="/en/android/jetpack/supporttoandroidx/">
        SupportToAndroidx
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/workmanager/" title="workmanager" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/workmanager/">
          workmanager
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/workmanager/workmanager/" title="WorkManager" class="dd-item ">
        <a href="/en/android/jetpack/workmanager/workmanager/">
        WorkManager
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/ndk/" title="ndk" class="dd-item
        
        
        
        ">
      <a href="/en/android/ndk/">
          ndk
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/ndk/elf%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/" title="ELF文件结构" class="dd-item ">
        <a href="/en/android/ndk/elf%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/">
        ELF文件结构
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/ndk/jni/" title="JNI" class="dd-item ">
        <a href="/en/android/ndk/jni/">
        JNI
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/ndk/native_hook/" title="native_hook" class="dd-item ">
        <a href="/en/android/ndk/native_hook/">
        native_hook
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/" title="system" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/">
          system
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/ashmem/" title="ashmem" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/ashmem/">
          ashmem
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/ashmem/%E5%8C%BF%E5%90%8D%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98ashmem/" title="匿名共享内存Ashmem" class="dd-item ">
        <a href="/en/android/system/ashmem/%E5%8C%BF%E5%90%8D%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98ashmem/">
        匿名共享内存Ashmem
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/bitmap/" title="bitmap" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/bitmap/">
          bitmap
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/bitmap/bitmap/" title="Bitmap" class="dd-item ">
        <a href="/en/android/system/bitmap/bitmap/">
        Bitmap
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/bitmap/bitmapsource/" title="BitmapSource" class="dd-item ">
        <a href="/en/android/system/bitmap/bitmapsource/">
        BitmapSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/handler/" title="handler" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/handler/">
          handler
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/handler/epoll/" title="Epoll" class="dd-item ">
        <a href="/en/android/system/handler/epoll/">
        Epoll
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/handler/looper/" title="Looper" class="dd-item ">
        <a href="/en/android/system/handler/looper/">
        Looper
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/handler/threadlocal/" title="ThreadLocal" class="dd-item ">
        <a href="/en/android/system/handler/threadlocal/">
        ThreadLocal
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/input/" title="input" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/input/">
          input
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/input/toucheventnative/" title="touchEventNative" class="dd-item ">
        <a href="/en/android/system/input/toucheventnative/">
        touchEventNative
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/kernel/" title="kernel" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/kernel/">
          kernel
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/kernel/kernel/" title="kernel" class="dd-item ">
        <a href="/en/android/system/kernel/kernel/">
        kernel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/layoutinflater/" title="layoutinflater" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/layoutinflater/">
          layoutinflater
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/layoutinflater/layoutinflater/" title="LayoutInflater" class="dd-item ">
        <a href="/en/android/system/layoutinflater/layoutinflater/">
        LayoutInflater
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/surfaceview/" title="surfaceview" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/surfaceview/">
          surfaceview
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/surfaceview/surfaceviewsource/" title="SurfaceViewSource" class="dd-item ">
        <a href="/en/android/system/surfaceview/surfaceviewsource/">
        SurfaceViewSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/textureview/" title="textureview" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/textureview/">
          textureview
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/textureview/textureviewsource/" title="TextureViewSource" class="dd-item ">
        <a href="/en/android/system/textureview/textureviewsource/">
        TextureViewSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/thread/" title="thread" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/thread/">
          thread
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/thread/stacktraceelement/" title="StackTraceElement" class="dd-item ">
        <a href="/en/android/system/thread/stacktraceelement/">
        StackTraceElement
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/thread/threadstate/" title="ThreadState" class="dd-item ">
        <a href="/en/android/system/thread/threadstate/">
        ThreadState
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/zygote/" title="zygote" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/zygote/">
          zygote
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/zygote/systemserversource/" title="SystemServerSource" class="dd-item ">
        <a href="/en/android/system/zygote/systemserversource/">
        SystemServerSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/zygote/zygotesource/" title="ZygoteSource" class="dd-item ">
        <a href="/en/android/system/zygote/zygotesource/">
        ZygoteSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/zygote/zygote%E8%BF%9B%E7%A8%8B/" title="Zygote进程" class="dd-item ">
        <a href="/en/android/system/zygote/zygote%E8%BF%9B%E7%A8%8B/">
        Zygote进程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/" title="后台任务" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/">
          后台任务
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86/" title="后台任务处理" class="dd-item ">
        <a href="/en/android/system/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86/">
        后台任务处理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" title="多进程" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/">
          多进程
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/" title="binder" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/">
          binder
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/1binderservicemanager/" title="1BinderServiceManager" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/1binderservicemanager/">
        1BinderServiceManager
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/2binderserver/" title="2BinderServer" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/2binderserver/">
        2BinderServer
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/3binderclient/" title="3BinderClient" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/3binderclient/">
        3BinderClient
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/4binderkernel/" title="4BinderKernel" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/4binderkernel/">
        4BinderKernel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderdeath/" title="BinderDeath" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderdeath/">
        BinderDeath
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binder%E5%8E%9F%E7%90%86/" title="Binder原理" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binder%E5%8E%9F%E7%90%86/">
        Binder原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/" title="mmkv" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/">
          mmkv
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/mmkv/" title="MMKV" class="dd-item ">
        <a href="/en/android/system/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/mmkv/">
        MMKV
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/" title="应用启动退出" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/">
          应用启动退出
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8/" title="应用启动" class="dd-item ">
        <a href="/en/android/system/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8/">
        应用启动
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/" title="源码研究方法" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/">
          源码研究方法
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/syscall%E6%9F%A5%E6%89%BE%E6%96%B9%E5%BC%8F/" title="Syscall查找方式" class="dd-item ">
        <a href="/en/android/system/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/syscall%E6%9F%A5%E6%89%BE%E6%96%B9%E5%BC%8F/">
        Syscall查找方式
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/" title="系统绘制" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/">
          系统绘制
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/graphics/" title="Graphics" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/graphics/">
        Graphics
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/measurelayoutdraw/" title="measurelayoutdraw" class="dd-item
        
        
        
        ">
      <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/measurelayoutdraw/">
          measurelayoutdraw
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/measurelayoutdraw/measure/" title="measure" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/measurelayoutdraw/measure/">
        measure
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync/" title="Vsync" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync/">
        Vsync
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync_surfaceflinger/" title="Vsync_SurfaceFlinger" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync_surfaceflinger/">
        Vsync_SurfaceFlinger
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F%E7%BB%98%E5%88%B6/" title="硬件加速绘制" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F%E7%BB%98%E5%88%B6/">
        硬件加速绘制
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/" title="绘制原理" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/">
        绘制原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E8%BD%AF%E4%BB%B6%E7%BB%98%E5%88%B6/" title="软件绘制" class="dd-item ">
        <a href="/en/android/system/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E8%BD%AF%E4%BB%B6%E7%BB%98%E5%88%B6/">
        软件绘制
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/ui/" title="ui" class="dd-item
        
        
        
        ">
      <a href="/en/android/ui/">
          ui
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/ui/webview/" title="webview" class="dd-item
        
        
        
        ">
      <a href="/en/android/ui/webview/">
          webview
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/ui/webview/webview/" title="WebView" class="dd-item ">
        <a href="/en/android/ui/webview/webview/">
        WebView
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/ui/%E5%8A%A8%E7%94%BB/" title="动画" class="dd-item
        
        
        
        ">
      <a href="/en/android/ui/%E5%8A%A8%E7%94%BB/">
          动画
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/ui/%E5%8A%A8%E7%94%BB/animatorsource/" title="AnimatorSource" class="dd-item ">
        <a href="/en/android/ui/%E5%8A%A8%E7%94%BB/animatorsource/">
        AnimatorSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E5%8C%85%E4%BD%93%E7%A7%AF/" title="包体积" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E5%8C%85%E4%BD%93%E7%A7%AF/">
          包体积
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%8C%85%E4%BD%93%E7%A7%AF/%E5%8C%85%E4%BD%93%E7%A7%AF%E5%8E%8B%E7%BC%A9/" title="包体积压缩" class="dd-item ">
        <a href="/en/android/%E5%8C%85%E4%BD%93%E7%A7%AF/%E5%8C%85%E4%BD%93%E7%A7%AF%E5%8E%8B%E7%BC%A9/">
        包体积压缩
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E5%9F%8B%E7%82%B9/" title="埋点" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E5%9F%8B%E7%82%B9/">
          埋点
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%9F%8B%E7%82%B9/%E5%9F%8B%E7%82%B9/" title="埋点" class="dd-item ">
        <a href="/en/android/%E5%9F%8B%E7%82%B9/%E5%9F%8B%E7%82%B9/">
        埋点
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%9F%8B%E7%82%B9/%E6%98%93%E8%A7%82%E6%96%B9%E8%88%9F/" title="易观方舟" class="dd-item ">
        <a href="/en/android/%E5%9F%8B%E7%82%B9/%E6%98%93%E8%A7%82%E6%96%B9%E8%88%9F/">
        易观方舟
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E5%AD%98%E5%82%A8/" title="存储" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E5%AD%98%E5%82%A8/">
          存储
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E5%AD%98%E5%82%A8/sharedpreferences/" title="sharedpreferences" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E5%AD%98%E5%82%A8/sharedpreferences/">
          sharedpreferences
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%AD%98%E5%82%A8/sharedpreferences/sharedpreferences/" title="SharedPreferences" class="dd-item ">
        <a href="/en/android/%E5%AD%98%E5%82%A8/sharedpreferences/sharedpreferences/">
        SharedPreferences
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E5%AE%89%E5%85%A8/" title="安全" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E5%AE%89%E5%85%A8/">
          安全
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%AE%89%E5%85%A8/app%E7%AD%BE%E5%90%8D/" title="app签名" class="dd-item ">
        <a href="/en/android/%E5%AE%89%E5%85%A8/app%E7%AD%BE%E5%90%8D/">
        app签名
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%AE%89%E5%85%A8/%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8/" title="应用安全" class="dd-item ">
        <a href="/en/android/%E5%AE%89%E5%85%A8/%E5%BA%94%E7%94%A8%E5%AE%89%E5%85%A8/">
        应用安全
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E5%AE%89%E5%85%A8/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%AE%89%E5%85%A8/" title="网络请求安全" class="dd-item ">
        <a href="/en/android/%E5%AE%89%E5%85%A8/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%AE%89%E5%85%A8/">
        网络请求安全
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="性能优化" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">
          性能优化
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/" title="apm" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/">
          apm
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrixgradleplugin/" title="MatrixGradlePlugin" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrixgradleplugin/">
        MatrixGradlePlugin
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrixsource/" title="MatrixSource" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrixsource/">
        MatrixSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrix%E6%8E%A5%E5%85%A5%E5%90%8E%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" title="Matrix接入后遇到的问题" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrix%E6%8E%A5%E5%85%A5%E5%90%8E%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">
        Matrix接入后遇到的问题
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrix%E7%A0%94%E7%A9%B6/" title="Matrix研究" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/matrix%E7%A0%94%E7%A9%B6/">
        Matrix研究
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/resource/" title="resource" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/resource/">
          resource
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/resource/matrixresourceplugin/" title="MatrixResourcePlugin" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/apm/resource/matrixresourceplugin/">
        MatrixResourcePlugin
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/" title="内存优化" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/">
          内存优化
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/1managememory/" title="1manageMemory" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/1managememory/">
        1manageMemory
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/2oom/" title="2OOM" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/2oom/">
        2OOM
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/3hprof_binary_dump_format/" title="3Hprof_binary_dump_format" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/3hprof_binary_dump_format/">
        3Hprof_binary_dump_format
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/4dumphprof/" title="4DumpHprof" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/4dumphprof/">
        4DumpHprof
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/5leakcanary2/" title="5LeakCanary2" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/5leakcanary2/">
        5LeakCanary2
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/6leakcanary2analyze/" title="6LeakCanary2Analyze" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/6leakcanary2analyze/">
        6LeakCanary2Analyze
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/7koomsource/" title="7KOOMSource" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/7koomsource/">
        7KOOMSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/" title="布局优化" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/">
          布局优化
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/" title="布局优化" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/%E5%B8%83%E5%B1%80%E4%BC%98%E5%8C%96/">
        布局优化
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/" title="插件化" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/">
          插件化
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/1%E6%8F%92%E4%BB%B6%E5%8C%96%E9%9D%A2%E4%B8%B4%E7%9A%84%E9%97%AE%E9%A2%98/" title="1插件化面临的问题" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/1%E6%8F%92%E4%BB%B6%E5%8C%96%E9%9D%A2%E4%B8%B4%E7%9A%84%E9%97%AE%E9%A2%98/">
        1插件化面临的问题
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/apk%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD/" title="apk安装和卸载" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/apk%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD/">
          apk安装和卸载
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/apk%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD/%E5%BA%94%E7%94%A8%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD%E8%BF%87%E7%A8%8B/" title="应用安装和卸载过程" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/apk%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD/%E5%BA%94%E7%94%A8%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD%E8%BF%87%E7%A8%8B/">
        应用安装和卸载过程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/hook/" title="Hook" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/hook/">
        Hook
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/qigsaw/" title="qigsaw" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/qigsaw/">
          qigsaw
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/qigsaw/qigsaw/" title="Qigsaw" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/qigsaw/qigsaw/">
        Qigsaw
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/" title="shadow" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/">
          shadow
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/shadow/" title="Shadow" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/shadow/">
        Shadow
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/shadowplugin/" title="ShadowPlugin" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/shadowplugin/">
        ShadowPlugin
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/shadowsource/" title="ShadowSource" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/shadow/shadowsource/">
        ShadowSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/%E6%8F%92%E4%BB%B6%E5%8C%96%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/" title="插件化技术选型" class="dd-item ">
        <a href="/en/android/%E6%8F%92%E4%BB%B6%E5%8C%96/%E6%8F%92%E4%BB%B6%E5%8C%96%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B/">
        插件化技术选型
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/" title="热修复字节码" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/">
          热修复字节码
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/1hotfixresearch/" title="1hotfixResearch" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/1hotfixresearch/">
        1hotfixResearch
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/andfix/" title="AndFix" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/andfix/">
        AndFix
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/andfixsource/" title="AndFixSource" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/andfixsource/">
        AndFixSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/dex%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/" title="Dex文件格式" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/dex%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/">
        Dex文件格式
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/multidex/" title="MultiDex" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/multidex/">
        MultiDex
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/" title="tinker" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/">
          tinker
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" title="源码分析" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">
          源码分析
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/resource.arsc%E7%94%9F%E6%88%90%E5%92%8C%E7%BB%93%E6%9E%84/" title="Resource.arsc生成和结构" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/resource.arsc%E7%94%9F%E6%88%90%E5%92%8C%E7%BB%93%E6%9E%84/">
        Resource.arsc生成和结构
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/tinkergradlepluginsource/" title="TinkerGradlePluginSource" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/tinkergradlepluginsource/">
        TinkerGradlePluginSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/tinkersource/" title="TinkerSource" class="dd-item ">
        <a href="/en/android/%E7%83%AD%E4%BF%AE%E5%A4%8D%E5%AD%97%E8%8A%82%E7%A0%81/tinker/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/tinkersource/">
        TinkerSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/" title="稳定性" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/">
          稳定性
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/" title="异常" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/">
          异常
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/1javacrash/" title="1javacrash" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/1javacrash/">
          1javacrash
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/1javacrash/javacrashsystemhandle/" title="JavaCrashSystemHandle" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/1javacrash/javacrashsystemhandle/">
        JavaCrashSystemHandle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/" title="anr" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/">
          anr
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/1anrsystmhandle/" title="1ANRSystmHandle" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/1anrsystmhandle/">
        1ANRSystmHandle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/2anrmonitor_collectinfo/" title="2ANRMonitor_CollectInfo" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/2anrmonitor_collectinfo/">
        2ANRMonitor_CollectInfo
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/3anranalysisrootcause/" title="3ANRAnalysisRootCause" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/anr/3anranalysisrootcause/">
        3ANRAnalysisRootCause
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/" title="nativecrash" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/">
          nativecrash
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/1nativecrash%E9%80%89%E5%9E%8B%E5%92%8C%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B/" title="1nativeCrash选型和整体流程" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/1nativecrash%E9%80%89%E5%9E%8B%E5%92%8C%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B/">
        1nativeCrash选型和整体流程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash1systemhandle/" title="nativeCrash1SystemHandle" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash1systemhandle/">
        nativeCrash1SystemHandle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash2monitor_collectstack/" title="nativeCrash2Monitor_CollectStack" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash2monitor_collectstack/">
        nativeCrash2Monitor_CollectStack
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash3symbolrecovery/" title="nativeCrash3SymbolRecovery" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash3symbolrecovery/">
        nativeCrash3SymbolRecovery
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash4analysisrootcause/" title="nativeCrash4AnalysisRootCause" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/nativecrash/nativecrash4analysisrootcause/">
        nativeCrash4AnalysisRootCause
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/" title="xcrash" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/">
          xcrash
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/1xcrash%E5%8E%9F%E7%90%86/" title="1xCrash原理" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/1xcrash%E5%8E%9F%E7%90%86/">
        1xCrash原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/linuxapi/" title="linuxApi" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/linuxapi/">
        linuxApi
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/xcrashanr/" title="xCrashAnr" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/xcrashanr/">
        xCrashAnr
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/xcrashnativecrash/" title="xCrashNativeCrash" class="dd-item ">
        <a href="/en/android/%E7%A8%B3%E5%AE%9A%E6%80%A7/%E5%BC%82%E5%B8%B8/xcrash/xcrashnativecrash/">
        xCrashNativeCrash
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" title="自动化测试" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">
          自动化测试
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/android%E4%BB%A3%E7%A0%81%E8%87%AA%E6%B5%8B/" title="android代码自测" class="dd-item ">
        <a href="/en/android/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/android%E4%BB%A3%E7%A0%81%E8%87%AA%E6%B5%8B/">
        android代码自测
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/java/" title="java" class="dd-item
        
        
        
        ">
      <a href="/en/java/">
          java
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/java/blockingqueue/" title="BlockingQueue" class="dd-item ">
        <a href="/en/java/blockingqueue/">
        BlockingQueue
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/java/java%E5%B9%B6%E5%8F%91/" title="java并发" class="dd-item ">
        <a href="/en/java/java%E5%B9%B6%E5%8F%91/">
        java并发
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/java/threadpoolexecutor/" title="ThreadPoolExecutor" class="dd-item ">
        <a href="/en/java/threadpoolexecutor/">
        ThreadPoolExecutor
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/kotlin/" title="kotlin" class="dd-item
        
        
        
        ">
      <a href="/en/kotlin/">
          kotlin
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/kotlin/coroutine/" title="coroutine" class="dd-item
        
        
        
        ">
      <a href="/en/kotlin/coroutine/">
          coroutine
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8B/" title="kotlin协程" class="dd-item ">
        <a href="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8B/">
        kotlin协程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8Bsource/" title="kotlin协程Source" class="dd-item ">
        <a href="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8Bsource/">
        kotlin协程Source
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8B%E5%8F%96%E6%B6%88/" title="kotlin协程取消" class="dd-item ">
        <a href="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8B%E5%8F%96%E6%B6%88/">
        kotlin协程取消
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8B%E5%BC%82%E5%B8%B8/" title="kotlin协程异常" class="dd-item ">
        <a href="/en/kotlin/coroutine/kotlin%E5%8D%8F%E7%A8%8B%E5%BC%82%E5%B8%B8/">
        kotlin协程异常
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/coroutine/%E4%BD%BF%E7%94%A8%E6%8C%82%E8%B5%B7%E5%87%BD%E6%95%B0%E6%9D%A5%E5%B0%81%E8%A3%85%E5%9B%9E%E8%B0%83/" title="使用挂起函数来封装回调" class="dd-item ">
        <a href="/en/kotlin/coroutine/%E4%BD%BF%E7%94%A8%E6%8C%82%E8%B5%B7%E5%87%BD%E6%95%B0%E6%9D%A5%E5%B0%81%E8%A3%85%E5%9B%9E%E8%B0%83/">
        使用挂起函数来封装回调
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/linux/" title="linux" class="dd-item
        
        
        
        ">
      <a href="/en/linux/">
          linux
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/linux/linux_io/" title="linux_io" class="dd-item ">
        <a href="/en/linux/linux_io/">
        linux_io
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/%E6%80%9D%E6%83%B3/" title="思想" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%80%9D%E6%83%B3/">
          思想
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%80%9D%E6%83%B3/ioc/" title="IOC" class="dd-item ">
        <a href="/en/%E6%80%9D%E6%83%B3/ioc/">
        IOC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%80%9D%E6%83%B3/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" title="程序设计规范" class="dd-item ">
        <a href="/en/%E6%80%9D%E6%83%B3/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/">
        程序设计规范
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%80%9D%E6%83%B3/%E7%BB%A7%E6%89%BF%E5%92%8C%E7%BB%84%E5%90%88/" title="继承和组合" class="dd-item ">
        <a href="/en/%E6%80%9D%E6%83%B3/%E7%BB%A7%E6%89%BF%E5%92%8C%E7%BB%84%E5%90%88/">
        继承和组合
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/" title="方向和趋势" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/">
          方向和趋势
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/" title="音视频" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/">
          音视频
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/" title="ffmpeg" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/">
          ffmpeg
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/examples/" title="examples" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/examples/">
          examples
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/examples/transcodingsource/" title="TranscodingSource" class="dd-item ">
        <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/examples/transcodingsource/">
        TranscodingSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/ffmpegdebug/" title="FFmpegDebug" class="dd-item ">
        <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/ffmpeg/ffmpegdebug/">
        FFmpegDebug
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/webrtc/" title="webrtc" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/webrtc/">
          webrtc
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/webrtc/webrtc%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD%E5%92%8C%E7%BC%96%E8%AF%91/" title="WebRTC源码下载和编译" class="dd-item ">
        <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/webrtc/webrtc%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD%E5%92%8C%E7%BC%96%E8%AF%91/">
        WebRTC源码下载和编译
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/%E7%BC%96%E8%A7%A3%E7%A0%81/" title="编解码" class="dd-item
        
        
        
        ">
      <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/%E7%BC%96%E8%A7%A3%E7%A0%81/">
          编解码
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/%E7%BC%96%E8%A7%A3%E7%A0%81/%E7%BC%96%E8%A7%A3%E7%A0%81%E7%9F%A5%E8%AF%86/" title="编解码知识" class="dd-item ">
        <a href="/en/%E6%96%B9%E5%90%91%E5%92%8C%E8%B6%8B%E5%8A%BF/%E9%9F%B3%E8%A7%86%E9%A2%91/%E7%BC%96%E8%A7%A3%E7%A0%81/%E7%BC%96%E8%A7%A3%E7%A0%81%E7%9F%A5%E8%AF%86/">
        编解码知识
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" title="跨平台" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/">
          跨平台
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/" title="flutter" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/">
          flutter
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/" title="1startup" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/">
          1startup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/1startup/" title="1startup" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/1startup/">
        1startup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/2startup_embedder_framwwork/" title="2startup_embedder_framwwork" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/2startup_embedder_framwwork/">
        2startup_embedder_framwwork
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/3flutter_surface/" title="3flutter_surface" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/3flutter_surface/">
        3flutter_surface
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/4startup_dart_framework/" title="4startup_dart_framework" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/1startup/4startup_dart_framework/">
        4startup_dart_framework
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/" title="engine" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/">
          engine
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/engine/" title="Engine" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/engine/">
        Engine
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/flutterenginecache/" title="FlutterEngineCache" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/flutterenginecache/">
        FlutterEngineCache
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/flutterenginedebug%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="FlutterEngineDebug环境搭建" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/flutterenginedebug%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">
        FlutterEngineDebug环境搭建
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/flutterenginegroup/" title="FlutterEngineGroup" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/flutterenginegroup/">
        FlutterEngineGroup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/" title="touch" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/">
          touch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/touch/" title="Touch" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/touch/">
        Touch
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/" title="动画" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/">
          动画
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/%E5%8A%A8%E7%94%BB/" title="动画" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/%E5%8A%A8%E7%94%BB/">
        动画
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/" title="响应式架构" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/">
          响应式架构
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/1%E8%B7%A8%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/" title="1跨组件传递数据" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/1%E8%B7%A8%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/">
        1跨组件传递数据
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/2provider/" title="2Provider" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/2provider/">
        2Provider
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/3%E5%BC%82%E6%AD%A5_%E5%93%8D%E5%BA%94%E5%BC%8F_%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/" title="3异步_响应式_状态管理" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/3%E5%BC%82%E6%AD%A5_%E5%93%8D%E5%BA%94%E5%BC%8F_%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/">
        3异步_响应式_状态管理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/stream/" title="stream" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/stream/">
          stream
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/stream/stream/" title="Stream" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9E%B6%E6%9E%84/stream/stream/">
        Stream
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/" title="混合开发" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/">
          混合开发
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/flutterboost/" title="FlutterBoost" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/flutterboost/">
        FlutterBoost
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/flutterboost3/" title="FlutterBoost3" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/flutterboost3/">
        FlutterBoost3
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/" title="混合开发" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/">
        混合开发
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/" title="渲染" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/">
          渲染
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/widget/" title="Widget" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/widget/">
        Widget
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/%E6%B8%B2%E6%9F%93/" title="渲染" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/%E6%B8%B2%E6%9F%93/">
        渲染
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/" title="路由" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/">
          路由
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/%E8%B7%AF%E7%94%B1/" title="路由" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/%E8%B7%AF%E7%94%B1/">
        路由
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/" title="通信" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/">
          通信
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/eventchannel/" title="EventChannel" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/eventchannel/">
        EventChannel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/messageloop/" title="MessageLoop" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/messageloop/">
        MessageLoop
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/methodchannel/" title="MethodChannel" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/methodchannel/">
        MethodChannel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/pigeon/" title="Pigeon" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/pigeon/">
        Pigeon
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/huanle19891345"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://huanle19891345.github.io/en/showcase"><i class='fas fa-fw fa-camera'></i> Showcases</a>
              </li>
          
              <li>
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li>
                  <a class="padding" href="https://huanle19891345.github.io/en/credits"><i class='fas fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/en/'>技术探索总结</a> > <a href='/en/android/'>android</a> > <a href='/en/android/art/'>art</a> > <a href='/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/'>2类加载</a> > 类加载虚拟机层
          
        
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#flow">Flow</a>
      <ul>
        <li><a href="#load-class-trigger-flow">load class trigger flow</a></li>
      </ul>
    </li>
    <li><a href="#classlinkersummary">ClassLinkerSummary</a>
      <ul>
        <li><a href="#resolvemethod">ResolveMethod</a></li>
        <li><a href="#resolvefield">ResolveField</a></li>
        <li><a href="#resolvetype">ResolveType</a></li>
        <li><a href="#findclass">FindClass</a>
          <ul>
            <li><a href="#lookupclass">LookupClass</a></li>
            <li><a href="#classtableforclassloader">ClassTableForClassLoader</a></li>
            <li><a href="#classtablelookup">ClassTable::Lookup</a></li>
          </ul>
        </li>
        <li><a href="#findclassinbasedexclassloader_c层双亲委派">FindClassInBaseDexClassLoader_C层双亲委派</a></li>
        <li><a href="#findclassinbasedexclassloaderclasspath">FindClassInBaseDexClassLoaderClassPath</a></li>
      </ul>
    </li>
    <li><a href="#defineclasssummary">DefineClassSummary</a></li>
    <li><a href="#load">Load</a>
      <ul>
        <li><a href="#图解">图解</a></li>
        <li><a href="#setupclass">SetupClass</a></li>
        <li><a href="#loadclass">LoadClass</a>
          <ul>
            <li><a href="#loadfield">LoadField</a></li>
            <li><a href="#loadmethod">LoadMethod</a></li>
            <li><a href="#linkcode">LinkCode</a>
              <ul>
                <li><a href="#oatmethodlinkmethod">OatMethod::LinkMethod</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#loadsuperandinterfaces">LoadSuperAndInterfaces</a></li>
      </ul>
    </li>
    <li><a href="#resolvelink">Resolve/Link</a>
      <ul>
        <li><a href="#linkclass">LinkClass</a></li>
        <li><a href="#linkmethods">LinkMethods</a></li>
        <li><a href="#linkinstancefields">LinkInstanceFields</a></li>
        <li><a href="#linkstaticfields">LinkStaticFields</a>
          <ul>
            <li><a href="#linkfields">LinkFields</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#verify">Verify</a>
      <ul>
        <li><a href="#verifyclass">VerifyClass</a></li>
        <li><a href="#methodverifierverifyclass">MethodVerifier::VerifyClass</a></li>
        <li><a href="#methodverifierverifymethods">MethodVerifier::VerifyMethods</a></li>
        <li><a href="#methodverifierverifymethod">MethodVerifier::VerifyMethod</a></li>
        <li><a href="#methodverifierverify">MethodVerifier::Verify</a></li>
      </ul>
    </li>
    <li><a href="#initialize">Initialize</a>
      <ul>
        <li><a href="#ensureinitialized">EnsureInitialized</a></li>
        <li><a href="#initializeclass">InitializeClass</a></li>
      </ul>
    </li>
    <li><a href="#类加载样例">类加载样例</a>
      <ul>
        <li><a href="#方法表总结">方法表总结</a></li>
      </ul>
    </li>
    <li><a href="#类加载之后class和instance的内存占用">类加载之后Class和Instance的内存占用</a></li>
    <li><a href="#以下为参考代码">以下为参考代码</a></li>
    <li><a href="#classlinker">ClassLinker</a>
      <ul>
        <li><a href="#ensureresolved">EnsureResolved</a></li>
        <li><a href="#shoulduseinterpreterentrypoint">ShouldUseInterpreterEntrypoint</a></li>
        <li><a href="#getquicktointerpreterbridge">GetQuickToInterpreterBridge</a></li>
        <li><a href="#throwearlierclassfailure">ThrowEarlierClassFailure</a></li>
        <li><a href="#getverifyerror">GetVerifyError</a></li>
      </ul>
    </li>
    <li><a href="#classgetextdata">Class::GetExtData</a></li>
    <li><a href="#class_exthgetverifyerror">class_ext.h.GetVerifyError</a></li>
    <li><a href="#oat_file-inlhgetquickcode">oat_file-inl.h.GetQuickCode</a></li>
    <li><a href="#runtimehisaotcompiler">runtime.h.IsAotCompiler</a></li>
    <li><a href="#threadthrownewwrappedexception">Thread::ThrowNewWrappedException</a></li>
    <li><a href="#threadsetexception">Thread::SetException</a></li>
    <li><a href="#basedexclassloaderfindclass">BaseDexClassLoader.findClass</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              类加载虚拟机层
            </h1>
          

        


<h2 id="flow">Flow</h2>
<h3 id="load-class-trigger-flow">load class trigger flow</h3>
<pre><code class="language-mermaid" data-lang="mermaid">graph TB
EnsureInitialized--&gt;InitializeClass
InitializeClass--&gt;MethodVerifier::VerifyClass
MethodVerifier::VerifyClass--&gt;MethodVerifier::VerifyMethods
MethodVerifier::VerifyMethods--&gt;MethodVerifier::VerifyMethod
MethodVerifier::VerifyMethod--&gt;MethodVerifier::CodeFlowVerifyInstruction
MethodVerifier::CodeFlowVerifyInstruction--&gt;ResolveType
MethodVerifier::VerifyMethod--&gt;ResolveType
ResolveType--&gt;FindClass
FindClass--&gt;DefineClass
</code></pre><h2 id="classlinkersummary">ClassLinkerSummary</h2>
<p>ClassLinker中其他一些常见函数。包括：</p>
<p>·Resolve相关函数。虽然名称叫Resolve，但在ART代码里，它并非是图8-5类加载、链接和初始化阶段中提到的Resolve。相反，它甚至可能触发一个类的加载和链接流程。</p>
<p>·FindClass：根据类的字符串名称搜索一个类。如果没有的话，则可能触发类的加载和链接流程。</p>
<pre><code class="language-mermaid" data-lang="mermaid">graph LR
ResolveMethod--&gt;ResolveType
ResolveField--&gt;ResolveType
ResolveType--&gt;FindClass
FindClass--&gt;FindClassInBaseDexClassLoader--&gt;FindClassInBaseDexClassLoaderClassPath--&gt;DefineClass
</code></pre><h3 id="resolvemethod">ResolveMethod</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span>ClassLinker<span style="color:#f92672">::</span>ResolveMode kResolveMode<span style="color:#f92672">&gt;</span>
ArtMethod<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>ResolveMethod(<span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,
                 <span style="color:#66d9ef">uint32_t</span> method_idx, Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>DexCache<span style="color:#f92672">&gt;</span> dex_cache,
                 Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader, ArtMethod<span style="color:#f92672">*</span> referrer,
                 InvokeType type) {
        <span style="color:#75715e">//和ResolveType类似，首先判断dex_cache中是否已经解析过这个方法了。
</span><span style="color:#75715e"></span>    ArtMethod<span style="color:#f92672">*</span> resolved <span style="color:#f92672">=</span> dex_cache<span style="color:#f92672">-&gt;</span>GetResolvedMethod(method_idx,
                   image_pointer_size_);
    <span style="color:#66d9ef">if</span> (resolved <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>resolved<span style="color:#f92672">-&gt;</span>IsRuntimeMethod()) {
        <span style="color:#66d9ef">if</span> (kResolveMode <span style="color:#f92672">==</span> ClassLinker<span style="color:#f92672">::</span>kForceICCECheck) {
        <span style="color:#75715e">//Java有诸如1.5、1.6这样的版本，在早期Java版本里，有些信息和现在的版本有差异，
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//此处将检查是否有信息不兼容的地方（即check incompatible class change），
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//如果检查失败，则会设置一个IncompatibleClassChangeError异常，笔者此处不拟讨论。
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (resolved<span style="color:#f92672">-&gt;</span>CheckIncompatibleClassChange(type)) {
                ......      <span style="color:#75715e">//设置异常
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nullptr</span>;
        }
      }
    <span style="color:#66d9ef">return</span> resolved;
    }
}
    <span style="color:#75715e">// 如果dex_cache里并未缓存，则先解析该方法所在类的类型（由method_id.class_idx_表示）。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>MethodId<span style="color:#f92672">&amp;</span> method_id <span style="color:#f92672">=</span> dex_file.GetMethodId(method_idx);
    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> klass <span style="color:#f92672">=</span> ResolveType(dex_file, method_id.class_idx_,
                        dex_cache, class_loader);<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>    ......
    <span style="color:#66d9ef">switch</span> (type) { <span style="color:#75715e">//type是指该函数的调用类型
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">case</span> kDirect:
        <span style="color:#66d9ef">case</span> kStatic:
        <span style="color:#75715e">/*FindDirectMethod是mirror Class的成员函数，有三个同名函数。在此处调用的函数中，
</span><span style="color:#75715e">          将沿着klass向上（即搜索klass的父类、祖父类等）搜索类所声明的direct方法，然后比较
</span><span style="color:#75715e">          这些方法的method_idx是否和输入的method_idx一样。如果一样，则认为找到目标函数。注
</span><span style="color:#75715e">          意，使用这种方法的时候需要注意比较method_idx是否相等时只有在二者保存在同一个DexCache
</span><span style="color:#75715e">          对象时才有意义。显然，这种一种优化搜索方法。   */</span>
        resolved <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>FindDirectMethod(dex_cache.Get(), method_idx,
                            image_pointer_size_);
        <span style="color:#66d9ef">break</span>;
        <span style="color:#66d9ef">case</span> kInterface:
            <span style="color:#66d9ef">if</span> (UNLIKELY(<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsInterface())) { <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nullptr</span>; }
            <span style="color:#66d9ef">else</span> {      <span style="color:#75715e">//如果调用方式是kInterface，则搜索klass及祖父类中的virtual方法以及所
</span><span style="color:#75715e"></span>                  <span style="color:#75715e">//实现的接口类里的成员方法。
</span><span style="color:#75715e"></span>                resolved <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>FindInterfaceMethod(dex_cache.Get(),
                            method_idx, image_pointer_size_);
            }
            <span style="color:#66d9ef">break</span>;
            ...... <span style="color:#75715e">//其他处理
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">break</span>;
        <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span> UNREACHABLE();
    }
        <span style="color:#75715e">//如果通过method_idx未找到对应的ArtMethod对象，则尝试通过函数名及签名信息再次搜索。
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//通过签名信息来查找匹配函数的话就不会受制于同一个DexCache对象的要求，但比较字符串的
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//速度会慢于上面所采用的比较整型变量method_idx的处理方式。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (resolved <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
        <span style="color:#75715e">//name是指函数名
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> name <span style="color:#f92672">=</span> dex_file.StringDataByIdx(method_id.name_idx_);
        <span style="color:#75715e">//signature包含了函数的签名信息，就是函数参数及返回值的类型信息
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> Signature signature <span style="color:#f92672">=</span> dex_file.GetMethodSignature(method_id);
            <span style="color:#66d9ef">switch</span> (type) {
                <span style="color:#66d9ef">case</span> kDirect:
                <span style="color:#66d9ef">case</span> kStatic:      <span style="color:#75715e">//调用另外一个FindDirectMethod，主要参数是signature
</span><span style="color:#75715e"></span>                    resolved <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>FindDirectMethod(name, signature,
                                 image_pointer_size_);
                <span style="color:#66d9ef">break</span>;
                ......
        }
    }
    <span style="color:#66d9ef">if</span> (LIKELY(resolved <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>
           <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>resolved<span style="color:#f92672">-&gt;</span>CheckIncompatibleClassChange(type))) {
        <span style="color:#75715e">//如果找到这个方法，则将其存到dex_cache对象中，以method_idx为索引，存储在它的resolved_methods_成员中
</span><span style="color:#75715e"></span>        dex_cache<span style="color:#f92672">-&gt;</span>SetResolvedMethod(method_idx, resolved, image_pointer_size_);
        <span style="color:#66d9ef">return</span> resolved;
    } <span style="color:#66d9ef">else</span> { ......<span style="color:#75715e">/*其他处理 */</span> }
}
</code></pre></div><h3 id="resolvefield">ResolveField</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">ArtField<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>ResolveField(<span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,
                <span style="color:#66d9ef">uint32_t</span> field_idx,Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>DexCache<span style="color:#f92672">&gt;</span> dex_cache,
                Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader,<span style="color:#66d9ef">bool</span> is_static) {
    <span style="color:#75715e">//如果已经解析过该成员变量，则返回
</span><span style="color:#75715e"></span>    ArtField<span style="color:#f92672">*</span> resolved <span style="color:#f92672">=</span> dex_cache<span style="color:#f92672">-&gt;</span>GetResolvedField(field_idx,
                      image_pointer_size_);
    <span style="color:#66d9ef">if</span> (resolved <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) { <span style="color:#66d9ef">return</span> resolved; }
    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>FieldId<span style="color:#f92672">&amp;</span> field_id <span style="color:#f92672">=</span> dex_file.GetFieldId(field_idx);
    Thread<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> self <span style="color:#f92672">=</span> Thread<span style="color:#f92672">::</span>Current();
    StackHandleScope<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> hs(self);
    <span style="color:#75715e">//先找到该成员变量对应的Class对象
</span><span style="color:#75715e"></span>    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass(
        hs.NewHandle(ResolveType(dex_file, field_id.class_idx_,
               dex_cache, class_loader)));
    .....
    <span style="color:#75715e">//下面这段代码用于从Class对象ifields_或sfields_中找到对应成员变量的ArtField对象。注
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//意，在搜索过程中，会向上遍历Class派生关系树上的基类。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (is_static) {
        resolved <span style="color:#f92672">=</span> mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>FindStaticField(self, klass,dex_cache.Get(), field_idx);
    } <span style="color:#66d9ef">else</span> {
        resolved <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>FindInstanceField(dex_cache.Get(), field_idx);
    }
    ......
    <span style="color:#75715e">//保存到DexCache resolved_fields_成员变量中
</span><span style="color:#75715e"></span>    dex_cache<span style="color:#f92672">-&gt;</span>SetResolvedField(field_idx, resolved, image_pointer_size_);
    <span style="color:#66d9ef">return</span> resolved;
}
</code></pre></div><h3 id="resolvetype">ResolveType</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>ResolveType(<span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,
                    <span style="color:#66d9ef">uint16_t</span> type_idx,......) {
    <span style="color:#75715e">/*dex_cache的类型为mirror::DexCache，这里直接回顾本章上文对DexCache类的介绍。
</span><span style="color:#75715e">      它包含如下几个关键成员变量：
</span><span style="color:#75715e">      （1）dex_file_(类型为uint64_t)：实际为DexFile*，指向该对象关联的那个Dex文件。
</span><span style="color:#75715e">      （2）resolved_fields_(uint64_t)：实际为ArtField*，指向ArtField数组，成员的数据类
</span><span style="color:#75715e">          型为ArtField。该数组存储了一个Dex文件中定义的所有类的成员变量。另外，只有那些经解
</span><span style="color:#75715e">          析后得到的ArtField对象才会存到这个数组里。该字段和Dex文件里的field_ids数组有关。
</span><span style="color:#75715e">      （3）resolved_methods_(uint64_t)：实际为ArtMethod*，指向ArtMethod数组，成员的
</span><span style="color:#75715e">          数据类型为ArtMethod。该数组存储了一个Dex文件中定义的所有类的成员函数。另外，只有
</span><span style="color:#75715e">          那些经解析后得到的ArtMethod对象才会存到这个数组里。该字段和Dex文件里的
</span><span style="color:#75715e">          method_ids数组有关。
</span><span style="color:#75715e">      （4）resolved_string_(uint64_t)：实际为GCRoot&lt;String&gt;*，指向GcRoot&lt;String&gt;数
</span><span style="color:#75715e">          组，包括该dex文件里使用的字符串信息数组。String是mirror::String。该字段和Dex
</span><span style="color:#75715e">          文件的string_ids数组有关
</span><span style="color:#75715e">      （5）resolved_classes_(uint64_t)：实际为GCRoot&lt;Class&gt;*，指向GcRoot&lt;Class&gt;数组，成
</span><span style="color:#75715e">          员的数据类型为GcRoot&lt;Class&gt;，存储该dex文件里使用的数据类型信息数组。该字段和Dex
</span><span style="color:#75715e">          文件里的type_ids数组有关    */</span>

    <span style="color:#75715e">//从dex_cache里找到是否已经缓存过type_idx所代表的那个Class信息
</span><span style="color:#75715e"></span>    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> resolved <span style="color:#f92672">=</span> dex_cache<span style="color:#f92672">-&gt;</span>GetResolvedType(type_idx);
 <span style="color:#66d9ef">if</span> (resolved <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {            <span style="color:#75715e">//如果没有缓存过，则需要找到并存起来
</span><span style="color:#75715e"></span>            Thread<span style="color:#f92672">*</span> self <span style="color:#f92672">=</span> Thread<span style="color:#f92672">::</span>Current();
        <span style="color:#75715e">//找到这个type的字符串描述
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor <span style="color:#f92672">=</span> dex_file.StringByTypeIdx(type_idx);
        <span style="color:#75715e">//搜索这个字符串对应的类是否存在。FindClass在第7章中曾简单介绍过，后文还会详细讨论它
</span><span style="color:#75715e"></span>            resolved <span style="color:#f92672">=</span> FindClass(self, descriptor, class_loader);<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (resolved <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {      <span style="color:#75715e">//类信息保存到DexCache对象中
</span><span style="color:#75715e"></span>                dex_cache<span style="color:#f92672">-&gt;</span>SetResolvedType(type_idx, resolved);
            } <span style="color:#66d9ef">else</span> {
                ...... <span style="color:#75715e">//抛NoClassDefFoundError异常
</span><span style="color:#75715e"></span>                ThrowNoClassDefFoundError(<span style="color:#e6db74">&#34;Failed resolution of: %s&#34;</span>, descriptor);
    }
    <span style="color:#66d9ef">return</span> resolved;
}
</code></pre></div><h3 id="findclass">FindClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>FindClass(Thread<span style="color:#f92672">*</span> self,
                                      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
                                      Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader) {
  <span style="color:#75715e">//如果字符串只有一个字符，则将搜索基础数据类对应的Class对象
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (descriptor[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;\0&#39;</span>) {
    <span style="color:#75715e">// only the descriptors of primitive types should be 1 character long, also avoid class lookup
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// for primitive classes that aren&#39;t backed by dex files.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">FindPrimitiveClass</span>(descriptor[<span style="color:#ae81ff">0</span>]);
  }
  <span style="color:#75715e">//搜索引用类型对应的类对象，首先根据字符串名计算hash值
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> size_t hash <span style="color:#f92672">=</span> ComputeModifiedUtf8Hash(descriptor);
  <span style="color:#75715e">// Find the class in the loaded classes table.
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//从ClassLoader对应的ClassTable中根据hash值搜索目标类
</span><span style="color:#75715e"></span>  ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass <span style="color:#f92672">=</span> LookupClass(self, descriptor, hash, class_loader.Get());
  <span style="color:#75715e">//如果目标类已经存在，则确保它的状态大于或等于kStatusResoved。
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//EnsureResolved并不会调用上文提到的实际加载或链接类的函数，它只是等待其他线程完成这个工作
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (klass <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">EnsureResolved</span>(self, descriptor, klass);
  }
  <span style="color:#75715e">// Class is not yet loaded.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (descriptor[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#f92672">&amp;&amp;</span> class_loader <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
    <span style="color:#75715e">// Non-array class and the boot class loader, search the boot class path.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">/*对bootstrap类而言，它们是由虚拟机加载的，所以没有对应的ClassLoader。
</span><span style="color:#75715e">          下面的FindInClassPath函数返回的ClassPathEntry是类型别名，其定义如下：
</span><span style="color:#75715e">          typedef pair&lt;const DexFile*,const DexFile::ClassDef*&gt; ClassPathEntry
</span><span style="color:#75715e">     */</span>
    <span style="color:#75715e">//FindInClassPath将从boot class path里对应的文件中找到目标类所在的Dex文件和对应
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//的ClassDef信息，然后调用DefineClass来加载目标类
</span><span style="color:#75715e"></span>    ClassPathEntry pair <span style="color:#f92672">=</span> FindInClassPath(descriptor, hash, boot_class_path_);
    <span style="color:#66d9ef">if</span> (pair.second <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">DefineClass</span>(self,
                         descriptor,
                         hash,
                         ScopedNullHandle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span>(),
                         <span style="color:#f92672">*</span>pair.first,
                         <span style="color:#f92672">*</span>pair.second);
    }
  }

  ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> result_ptr;
  <span style="color:#66d9ef">bool</span> descriptor_equals;
  <span style="color:#75715e">//如果搜索的是数组类，则创建对应的数组类类对象。
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (descriptor[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;[&#39;</span>) {
    result_ptr <span style="color:#f92672">=</span> CreateArrayClass(self, descriptor, hash, class_loader);
  } <span style="color:#66d9ef">else</span> {
   <span style="color:#75715e">//需要触发ClassLoader进行类加载(会调用defineClass启动类加载)。该函数请读者在学完8.7.9节
</span><span style="color:#75715e"></span>    ScopedObjectAccessUnchecked <span style="color:#a6e22e">soa</span>(self);
    <span style="color:#75715e">//7.0上对应的方法是FindClassInPathClassLoader
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">bool</span> known_hierarchy <span style="color:#f92672">=</span>
        FindClassInBaseDexClassLoader(soa, self, descriptor, hash, class_loader, <span style="color:#f92672">&amp;</span>result_ptr);
  }
  
  <span style="color:#66d9ef">if</span>(result_ptr <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
    <span style="color:#75715e">/*如果通过ClassLoader加载目标类失败，则下面的代码将转入Java层去执行ClassLoader的类
</span><span style="color:#75715e">          加载。根据代码中的注释所言，类加载失败需要抛出异常，而上面的FindClassInPathClass-
</span><span style="color:#75715e">          Loader并不会添加异常信息，相反，它还会去掉其执行过程中其他函数因处理失败（比如Define-
</span><span style="color:#75715e">          Class）而添加的异常信息。所以，接下来的代码将进入Java层去ClassLoader对象的load-
</span><span style="color:#75715e">          Class函数，虽然目标类最终也会加载失败，但相关异常信息就能添加，同时整个调用的堆栈信息
</span><span style="color:#75715e">          也能正确反映出来。所以，这种处理方式应是ART虚拟机里为提升运行速度所做的优化处理吧  */</span>
    result.reset(soa.Env()<span style="color:#f92672">-&gt;</span>CallObjectMethod(class_loader_object.get(),
            WellKnownClasses<span style="color:#f92672">::</span>java_lang_ClassLoader_loadClass,
                                        class_name_object.get()));
  }
  ......
 <span style="color:#75715e">// success, return mirror::Class*
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">return</span> result_ptr.Ptr();
}
</code></pre></div><h4 id="lookupclass">LookupClass</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>LookupClass(Thread<span style="color:#f92672">*</span> self,
                                        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
                                        size_t hash,
                                        ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader) {
  ReaderMutexLock <span style="color:#a6e22e">mu</span>(self, <span style="color:#f92672">*</span>Locks<span style="color:#f92672">::</span>classlinker_classes_lock_);
  ClassTable<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> class_table <span style="color:#f92672">=</span> ClassTableForClassLoader(class_loader);
  <span style="color:#66d9ef">if</span> (class_table <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
    ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> class_table<span style="color:#f92672">-&gt;</span>Lookup(descriptor, hash);
    <span style="color:#66d9ef">if</span> (result <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
      <span style="color:#66d9ef">return</span> result.Ptr();
    }
  }
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nullptr</span>;
}
</code></pre></div><h4 id="classtableforclassloader">ClassTableForClassLoader</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">ClassTable<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>ClassTableForClassLoader(ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader) {
  <span style="color:#66d9ef">return</span> class_loader <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">?</span> boot_class_table_.get() <span style="color:#f92672">:</span> class_loader<span style="color:#f92672">-&gt;</span>GetClassTable();
}
</code></pre></div><p>art/runtime/class_table.cc</p>
<h4 id="classtablelookup">ClassTable::Lookup</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> ClassTable<span style="color:#f92672">::</span>Lookup(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor, size_t hash) {
  DescriptorHashPair <span style="color:#a6e22e">pair</span>(descriptor, hash);
  ReaderMutexLock <span style="color:#a6e22e">mu</span>(Thread<span style="color:#f92672">::</span>Current(), lock_);
  <span style="color:#66d9ef">for</span> (ClassSet<span style="color:#f92672">&amp;</span> class_set : classes_) {
    <span style="color:#66d9ef">auto</span> it <span style="color:#f92672">=</span> class_set.FindWithHash(pair, hash);
    <span style="color:#66d9ef">if</span> (it <span style="color:#f92672">!=</span> class_set.end()) {
      <span style="color:#66d9ef">return</span> it<span style="color:#f92672">-&gt;</span>Read();
    }
  }
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nullptr</span>;
}
</code></pre></div><h3 id="findclassinbasedexclassloader_c层双亲委派">FindClassInBaseDexClassLoader_C层双亲委派</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>FindClassInBaseDexClassLoader(ScopedObjectAccessAlreadyRunnable<span style="color:#f92672">&amp;</span> soa,
                                                Thread<span style="color:#f92672">*</span> self,
                                                <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
                                                size_t hash,
                                                Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader,
                                                ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;*</span> result) {
  <span style="color:#75715e">// Termination case: boot class loader.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (IsBootClassLoader(soa, class_loader.Get())) {
    <span style="color:#f92672">*</span>result <span style="color:#f92672">=</span> FindClassInBootClassLoaderClassPath(self, descriptor, hash);
    <span style="color:#66d9ef">return</span> true;
  }

  <span style="color:#66d9ef">if</span> (IsPathOrDexClassLoader(soa, class_loader)) {
    <span style="color:#75715e">// For regular path or dex class loader the search order is:
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//    - parent
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//    - class loader dex files
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Handles as RegisterDexFile may allocate dex caches (and cause thread suspension).
</span><span style="color:#75715e"></span>    StackHandleScope<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> hs(self);
    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> h_parent(hs.NewHandle(class_loader<span style="color:#f92672">-&gt;</span>GetParent()));
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>FindClassInBaseDexClassLoader(soa, self, descriptor, hash, h_parent, result)) {
      <span style="color:#66d9ef">return</span> false;  <span style="color:#75715e">// One of the parents is not supported.
</span><span style="color:#75715e"></span>    }
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">*</span>result <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
      <span style="color:#66d9ef">return</span> true;  <span style="color:#75715e">// Found the class up the chain.
</span><span style="color:#75715e"></span>    }

    <span style="color:#75715e">// Search the current class loader classpath.
</span><span style="color:#75715e"></span>    <span style="color:#f92672">*</span>result <span style="color:#f92672">=</span> FindClassInBaseDexClassLoaderClassPath(soa, descriptor, hash, class_loader);
    <span style="color:#66d9ef">return</span> true;
  }
</code></pre></div><h3 id="findclassinbasedexclassloaderclasspath">FindClassInBaseDexClassLoaderClassPath</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> ClassLinker<span style="color:#f92672">::</span>FindClassInBaseDexClassLoaderClassPath(
    ScopedObjectAccessAlreadyRunnable<span style="color:#f92672">&amp;</span> soa,
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
    size_t hash,
    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader) {
  
    ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> ret;
  <span style="color:#66d9ef">auto</span> define_class <span style="color:#f92672">=</span> [<span style="color:#f92672">&amp;</span>](<span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">*</span> cp_dex_file) REQUIRES_SHARED(Locks<span style="color:#f92672">::</span>mutator_lock_) {
    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">*</span> dex_class_def <span style="color:#f92672">=</span>
        OatDexFile<span style="color:#f92672">::</span>FindClassDef(<span style="color:#f92672">*</span>cp_dex_file, descriptor, hash);
    <span style="color:#66d9ef">if</span> (dex_class_def <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
      <span style="color:#75715e">//main
</span><span style="color:#75715e"></span>      ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass <span style="color:#f92672">=</span> DefineClass(soa.Self(),
                                                descriptor,
                                                hash,
                                                class_loader,
                                                <span style="color:#f92672">*</span>cp_dex_file,
                                                <span style="color:#f92672">*</span>dex_class_def);
      <span style="color:#66d9ef">if</span> (klass <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
        CHECK(soa.Self()<span style="color:#f92672">-&gt;</span>IsExceptionPending()) <span style="color:#f92672">&lt;&lt;</span> descriptor;
        soa.Self()<span style="color:#f92672">-&gt;</span>ClearException();
        <span style="color:#75715e">// TODO: Is it really right to break here, and not check the other dex files?
</span><span style="color:#75715e"></span>      }
      ret <span style="color:#f92672">=</span> klass;
      <span style="color:#66d9ef">return</span> false;  <span style="color:#75715e">// Found a Class (or error == nullptr), stop visit.
</span><span style="color:#75715e"></span>    }
    <span style="color:#66d9ef">return</span> true;  <span style="color:#75715e">// Continue with the next DexFile.
</span><span style="color:#75715e"></span>  };

  VisitClassLoaderDexFiles(soa, class_loader, define_class);
  <span style="color:#66d9ef">return</span> ret;
}
</code></pre></div><h2 id="defineclasssummary">DefineClassSummary</h2>
<p>类的加载、链接和初始化</p>
<p>ClassLinker::DefineClass内部会调用SetupClass和LoadClass</p>
<p>在ART虚拟机实现中，类的加载、链接及初始化过程可以很容易地从代表类状态Status枚举变量的定义里推导出来的。整个过程可分为</p>
<ol>
<li>
<p>Load（对应终态为kStatusLoaded）</p>
</li>
<li>
<p>Resolve（对应终态为kStatusResolved）</p>
</li>
<li>
<p>Verify（对应终态为kStatusVerified）</p>
</li>
<li>
<p>Initialized（对应终态为kStatusInitialized）四个步骤。</p>
</li>
</ol>
<p>art/runtime/class_linker.cc</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>DefineClass(Thread<span style="color:#f92672">*</span> self,
                                        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
                                        size_t hash,
                                        Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader,
                                        <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,
                                        <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">&amp;</span> dex_class_def) {
mirror<span style="color:#f92672">::</span>DexCache<span style="color:#f92672">*</span> dex_cache <span style="color:#f92672">=</span> RegisterDexFile(dex_file, class_loader.Get());
  klass<span style="color:#f92672">-&gt;</span>SetDexCache(dex_cache);
  SetupClass(dex_file, dex_class_def, klass, class_loader.Get());<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>
  <span style="color:#75715e">// Add the newly loaded class to the loaded classes table.
</span><span style="color:#75715e"></span>  mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> existing <span style="color:#f92672">=</span> InsertClass(descriptor, klass.Get(), hash);

  <span style="color:#75715e">// Load the fields and other things after we are inserted in the table. This is so that we don&#39;t
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// end up allocating unfree-able linear alloc resources and then lose the race condition. The
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// other reason is that the field roots are only visited from the class table. So we need to be
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// inserted before we allocate / fill in these fields.
</span><span style="color:#75715e"></span>  LoadClass(self, dex_file, dex_class_def, klass);<span style="color:#75715e">//load, main
</span><span style="color:#75715e"></span>
LoadSuperAndInterfaces(klass, dex_file)<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>
LinkClass(self, descriptor, klass, interfaces, <span style="color:#f92672">&amp;</span>h_new_class) <span style="color:#75715e">//reslove,main
</span><span style="color:#75715e"></span>......
<span style="color:#66d9ef">return</span> h_new_class.Get();
</code></pre></div><h2 id="load">Load</h2>
<h3 id="图解">图解</h3>
<pre><code class="language-mermaid" data-lang="mermaid">sequenceDiagram

ClassLinker-&gt;&gt;ClassLinker: SetupClass
activate ClassLinker
Note right of ClassLinker: 根据ClassDef初始化mirror::class对象
deactivate ClassLinker

ClassLinker-&gt;&gt;ClassLinker: LoadClassMembers
activate ClassLinker

ClassLinker-&gt;&gt;ClassLinker: AllocArtFieldArray
activate ClassLinker
Note right of ClassLinker: 依次Alloc和Load静态和非静态field,结果保存在LengthPrefixedArray&lt;ArtField&gt;* ifields,并设置到mirror::class
deactivate ClassLinker

ClassLinker-&gt;&gt;ClassLinker: LoadField
activate ClassLinker
deactivate ClassLinker

ClassLinker-&gt;&gt;ClassLinker: AllocArtMethodArray
activate ClassLinker
Note right of ClassLinker: 遍历direct和virtual方法，逐个调用loadMethod和LinkCode
deactivate ClassLinker


ClassLinker-&gt;&gt;ClassLinker: LoadMethod
activate ClassLinker
deactivate ClassLinker

ClassLinker-&gt;&gt;ClassLinker: LinkCode
activate ClassLinker
Note right of ClassLinker: 设置entry_point_from_quick_compiled_code_,oat_class != nullptr时设置为GetQuickCode()
deactivate ClassLinker

ClassLinker-&gt;&gt;ClassLinker: LoadSuperAndInterfaces
activate ClassLinker
Note right of ClassLinker: 调用ResolveType触发superClass和interfaces的类加载,更新当前klass状态为kStatusLoaded
deactivate ClassLinker

deactivate ClassLinker
</code></pre><h3 id="setupclass">SetupClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>SetupClass(<span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,
            <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">&amp;</span> dex_class_def,
            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass, mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">*</span> class_loader) {
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor <span style="color:#f92672">=</span> dex_file.GetClassDescriptor(dex_class_def);
    <span style="color:#75715e">//SetClass是Class的基类mirror Object中的函数。Class也是一种Object，所以此处设置它的
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//类类型为”java/lang/Class”对应的那个Class对象
</span><span style="color:#75715e"></span>    klass<span style="color:#f92672">-&gt;</span>SetClass(GetClassRoot(kJavaLangClass));
    <span style="color:#66d9ef">uint32_t</span> access_flags <span style="color:#f92672">=</span> dex_class_def.GetJavaAccessFlags();
    <span style="color:#75715e">//设置访问标志及该类的加载器对象
</span><span style="color:#75715e"></span>    klass<span style="color:#f92672">-&gt;</span>SetAccessFlags(access_flags);
    klass<span style="color:#f92672">-&gt;</span>SetClassLoader(class_loader);
    <span style="color:#75715e">//设置klass的状态为kStatusIdx。
</span><span style="color:#75715e"></span>    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusIdx, <span style="color:#66d9ef">nullptr</span>);
    <span style="color:#75715e">//设置klass的dex_class_def_idx_和dex_type_idx_成员变量。
</span><span style="color:#75715e"></span>    klass<span style="color:#f92672">-&gt;</span>SetDexClassDefIndex(dex_file.GetIndexForClassDef(dex_class_def));
    klass<span style="color:#f92672">-&gt;</span>SetDexTypeIndex(dex_class_def.class_idx_);
}
</code></pre></div><h3 id="loadclass">LoadClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>LoadClass(Thread<span style="color:#f92672">*</span> self, <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,
                            <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">&amp;</span> dex_class_def,
                            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass) {
    <span style="color:#75715e">//class_data的内容就是图8-7中的class_data_item
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">uint8_t</span><span style="color:#f92672">*</span> class_data <span style="color:#f92672">=</span> dex_file.GetClassData(dex_class_def);
    <span style="color:#66d9ef">if</span> (class_data <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) { <span style="color:#66d9ef">return</span>;    }
    <span style="color:#66d9ef">bool</span> has_oat_class <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">if</span> (Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>IsStarted() <span style="color:#f92672">&amp;&amp;</span>
                    <span style="color:#f92672">!</span>Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>IsAotCompiler()) {
        <span style="color:#75715e">//如果不是编译虚拟机的话，则先尝试找到该类经dex2oat编译得到的OatClass信息
</span><span style="color:#75715e"></span>            OatFile<span style="color:#f92672">::</span>OatClass oat_class <span style="color:#f92672">=</span> FindOatClass(dex_file,
                        klass<span style="color:#f92672">-&gt;</span>GetDexClassDefIndex(),   <span style="color:#f92672">&amp;</span>has_oat_class);
            <span style="color:#66d9ef">if</span> (has_oat_class) {
                LoadClassMembers(self, dex_file, class_data, klass, <span style="color:#f92672">&amp;</span>oat_class);
            }
    }
    <span style="color:#75715e">//不管有没有OatClass信息，最终调用的函数都是LoadClassMembers。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>has_oat_class) {
        LoadClassMembers(self, dex_file, class_data, klass, <span style="color:#66d9ef">nullptr</span>);
    }
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>LoadClassMembers(Thread<span style="color:#f92672">*</span> self,
            <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">uint8_t</span><span style="color:#f92672">*</span> class_data,
            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,<span style="color:#66d9ef">const</span> OatFile<span style="color:#f92672">::</span>OatClass<span style="color:#f92672">*</span> oat_class) {
    <span style="color:#75715e">//注意这个函数的参数，class_data为dex文件里的代表该类的class_data_item信息，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//而oat_class描述的是Oat文件里针对这个类提供的一些信息
</span><span style="color:#75715e"></span>    {
        LinearAlloc<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> allocator <span style="color:#f92672">=</span>
                 GetAllocatorForClassLoader(klass<span style="color:#f92672">-&gt;</span>GetClassLoader());
        <span style="color:#75715e">//创建class_data_item迭代器
</span><span style="color:#75715e"></span>        ClassDataItemIterator <span style="color:#a6e22e">it</span>(dex_file, class_data);
        <span style="color:#75715e">//分配用于存储目标类静态成员变量的固定长度数组sfields
</span><span style="color:#75715e"></span>        LengthPrefixedArray<span style="color:#f92672">&lt;</span>ArtField<span style="color:#f92672">&gt;*</span> sfields <span style="color:#f92672">=</span> AllocArtFieldArray(
                                    self,allocator,it.NumStaticFields());
        size_t num_sfields <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">uint32_t</span> last_field_idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0u</span>;
        <span style="color:#75715e">//遍历class_data_item中的静态成员变量数组，然后填充信息到sfields数组里
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> (; it.HasNextStaticField(); it.Next()) {
            <span style="color:#66d9ef">uint32_t</span> field_idx <span style="color:#f92672">=</span> it.GetMemberIndex();
                <span style="color:#66d9ef">if</span> (num_sfields <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> LIKELY(field_idx <span style="color:#f92672">&gt;</span> last_field_idx)) {
                    <span style="color:#75715e">//加载这个ArtField的内容。下文将单独介绍此函数
</span><span style="color:#75715e"></span>                    LoadField(it, klass, <span style="color:#f92672">&amp;</span>sfields<span style="color:#f92672">-&gt;</span>At(num_sfields));
                <span style="color:#f92672">++</span>num_sfields;
                last_field_idx <span style="color:#f92672">=</span> field_idx;
            }
        }
        <span style="color:#75715e">// 同理，分配代表该类非静态成员变量的数组
</span><span style="color:#75715e"></span>        LengthPrefixedArray<span style="color:#f92672">&lt;</span>ArtField<span style="color:#f92672">&gt;*</span> ifields <span style="color:#f92672">=</span> AllocArtFieldArray(self,  allocator, it.NumInstanceFields());
        size_t num_ifields <span style="color:#f92672">=</span> <span style="color:#ae81ff">0u</span>;
        last_field_idx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0u</span>;
        <span style="color:#66d9ef">for</span> (; it.HasNextInstanceField(); it.Next()) {
            <span style="color:#66d9ef">uint32_t</span> field_idx <span style="color:#f92672">=</span> it.GetMemberIndex();
            <span style="color:#66d9ef">if</span> (num_ifields <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> LIKELY(field_idx <span style="color:#f92672">&gt;</span> last_field_idx)) {
                    LoadField(it, klass, <span style="color:#f92672">&amp;</span>ifields<span style="color:#f92672">-&gt;</span>At(num_ifields)); <span style="color:#75715e">//类似的处理
</span><span style="color:#75715e"></span>                <span style="color:#f92672">++</span>num_ifields;
                last_field_idx <span style="color:#f92672">=</span> field_idx;
            }
        }
        <span style="color:#75715e">//设置Class类的sfields_和ifields_成员变量
</span><span style="color:#75715e"></span>        klass<span style="color:#f92672">-&gt;</span>SetSFieldsPtr(sfields);
        klass<span style="color:#f92672">-&gt;</span>SetIFieldsPtr(ifields);
        <span style="color:#75715e">/*设置Class类的methods_成员变量。读者可回顾笔者对该成员变量的解释，它是一个Length-
</span><span style="color:#75715e">        PrefixedArray&lt;ArtMethod&gt;数组，其元素布局为
</span><span style="color:#75715e">        （1）[0,virtual_methods_offset_)为本类包含的direct成员函数
</span><span style="color:#75715e">        （2）[virtual_methods_offset_,copied_methods_offset_)为本类包含的virtual
</span><span style="color:#75715e">            成员函数
</span><span style="color:#75715e">        （3）[copied_methods_offset_,...)为剩下的诸如miranda函数等内容。下面代码中，
</span><span style="color:#75715e">            先分配1和2所需要的元素空间，然后设置klass对应的成员变量，其中：
</span><span style="color:#75715e">            klass-&gt;methods_为AllocArtMethodArray的返回值，
</span><span style="color:#75715e">            klass-&gt;copied_methods_offset_为类direct和virtual方法个数之和
</span><span style="color:#75715e">            klass-&gt;virtual_methods_offset_为类direct方法个数   */</span>

        klass<span style="color:#f92672">-&gt;</span>SetMethodsPtr( AllocArtMethodArray(self, allocator,
                           it.NumDirectMethods() <span style="color:#f92672">+</span>it.NumVirtualMethods()),
                  it.NumDirectMethods(), it.NumVirtualMethods());
        size_t class_def_method_index <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">uint32_t</span> last_dex_method_index <span style="color:#f92672">=</span> DexFile<span style="color:#f92672">::</span>kDexNoIndex;
        size_t last_class_def_method_index <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#75715e">//遍历direct方法数组，加载它们然后关联字节码
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> (size_t i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; it.HasNextDirectMethod(); i<span style="color:#f92672">++</span>, it.Next()) {
            ArtMethod<span style="color:#f92672">*</span> method <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetDirectMethodUnchecked(i,
                        image_pointer_size_);
            <span style="color:#75715e">//加载ArtMethod对象，并将其和字节码关联起来。
</span><span style="color:#75715e"></span>            LoadMethod(self, dex_file, it, klass, method);
            <span style="color:#75715e">//注意，oat_class信息只在LinkCode中用到。LinkCode留待10.1节介绍
</span><span style="color:#75715e"></span>            LinkCode(method, oat_class, class_def_method_index);
            <span style="color:#66d9ef">uint32_t</span> it_method_index <span style="color:#f92672">=</span> it.GetMemberIndex();
            <span style="color:#66d9ef">if</span> (last_dex_method_index <span style="color:#f92672">==</span> it_method_index) {
                method<span style="color:#f92672">-&gt;</span>SetMethodIndex(last_class_def_method_index);
            } <span style="color:#66d9ef">else</span> {      <span style="color:#75715e">//设置ArtMethod的method_index_，该值其实就是这个ArtMethod
</span><span style="color:#75715e"></span>                        <span style="color:#75715e">//位于上面klass methods_数组中的位置
</span><span style="color:#75715e"></span>                method<span style="color:#f92672">-&gt;</span>SetMethodIndex(class_def_method_index);
                last_dex_method_index <span style="color:#f92672">=</span> it_method_index;
                last_class_def_method_index <span style="color:#f92672">=</span> class_def_method_index;
            }
            class_def_method_index<span style="color:#f92672">++</span>;
        }
        <span style="color:#75715e">//处理virtual方法。注意，对表示virtual方法的ArtMethod对象而言，它们的method_index_
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//和klass methods_数组没有关系，也不在下面的循环中设置。
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> (size_t i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; it.HasNextVirtualMethod(); i<span style="color:#f92672">++</span>, it.Next()) {
            ...... <span style="color:#75715e">//和direct方法处理一样，唯一不同的是，此处不调用ArtMethod的SetMethod-Index函数，即不设置它的method_index_成员
</span><span style="color:#75715e"></span>        }
    }
}
</code></pre></div><h4 id="loadfield">LoadField</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>LoadField(<span style="color:#66d9ef">const</span> ClassDataItemIterator<span style="color:#f92672">&amp;</span> it,
                            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass, ArtField<span style="color:#f92672">*</span> dst) {
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">uint32_t</span> field_idx <span style="color:#f92672">=</span> it.GetMemberIndex();
    dst<span style="color:#f92672">-&gt;</span>SetDexFieldIndex(field_idx); <span style="color:#75715e">//设置对应于dex文件里的那个field_idx
</span><span style="color:#75715e"></span>    dst<span style="color:#f92672">-&gt;</span>SetDeclaringClass(klass.Get()); <span style="color:#75715e">//设置本成员变量由哪个Class对象定义
</span><span style="color:#75715e"></span>    dst<span style="color:#f92672">-&gt;</span>SetAccessFlags(it.GetFieldAccessFlags()); <span style="color:#75715e">//设置访问标记
</span><span style="color:#75715e"></span>}
</code></pre></div><h4 id="loadmethod">LoadMethod</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>LoadMethod(Thread<span style="color:#f92672">*</span> self,
                    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file,<span style="color:#66d9ef">const</span> ClassDataItemIterator<span style="color:#f92672">&amp;</span> it,
                    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,  ArtMethod<span style="color:#f92672">*</span> dst) {
    <span style="color:#66d9ef">uint32_t</span> dex_method_idx <span style="color:#f92672">=</span> it.GetMemberIndex();
    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>MethodId<span style="color:#f92672">&amp;</span> method_id <span style="color:#f92672">=</span> dex_file.GetMethodId(dex_method_idx);
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> method_name <span style="color:#f92672">=</span> dex_file.StringDataByIdx(method_id.name_idx_);
    <span style="color:#75715e">//设置ArtMethod declaring_class_和dex_method_index_和成员变量
</span><span style="color:#75715e"></span>    dst<span style="color:#f92672">-&gt;</span>SetDexMethodIndex(dex_method_idx);
    dst<span style="color:#f92672">-&gt;</span>SetDeclaringClass(klass.Get());
    <span style="color:#75715e">//设置dex_code_item_offset_成员变量
</span><span style="color:#75715e"></span>    dst<span style="color:#f92672">-&gt;</span>SetCodeItemOffset(it.GetMethodCodeItemOffset());
    <span style="color:#75715e">//设置ArtMethod ptr_sized_fields_结构体中的dex_cache_resolved_methods_和dex_cache_
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//resolved_types_成员。读者可回顾上文对ArtMethod成员变量的介绍
</span><span style="color:#75715e"></span>    dst<span style="color:#f92672">-&gt;</span>SetDexCacheResolvedMethods(klass<span style="color:#f92672">-&gt;</span>GetDexCache()<span style="color:#f92672">-&gt;</span>GetResolvedMethods(),
                            image_pointer_size_);
    dst<span style="color:#f92672">-&gt;</span>SetDexCacheResolvedTypes(klass<span style="color:#f92672">-&gt;</span>GetDexCache()<span style="color:#f92672">-&gt;</span>GetResolvedTypes(),
                            image_pointer_size_);

    <span style="color:#66d9ef">uint32_t</span> access_flags <span style="color:#f92672">=</span> it.GetMethodAccessFlags();
    <span style="color:#75715e">//处理访问标志。比如，如果函数名为”finalize”的话，设置该类为finalizable
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (UNLIKELY(strcmp(<span style="color:#e6db74">&#34;finalize&#34;</span>, method_name) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>)) {
        <span style="color:#66d9ef">if</span> (strcmp(<span style="color:#e6db74">&#34;V&#34;</span>, dex_file.GetShorty(method_id.proto_idx_)) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
            <span style="color:#75715e">//该类的class loader如果不为空，则表示不是boot class，也就是系统所必需的那些
</span><span style="color:#75715e"></span>            <span style="color:#75715e">//基础类
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (klass<span style="color:#f92672">-&gt;</span>GetClassLoader() <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>){
                <span style="color:#75715e">//设置类的访问标记，增加kAccClassIsFinalizable。表示该类重载了finalize函数
</span><span style="color:#75715e"></span>                klass<span style="color:#f92672">-&gt;</span>SetFinalizable();
            } <span style="color:#66d9ef">else</span> {......       }
        }
    } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (method_name[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;&lt;&#39;</span>) {
        ......<span style="color:#75715e">//如果函数名为”&lt;init&gt;”或”&lt;clinit&gt;”，则设置访问标志位kAccConstructor
</span><span style="color:#75715e"></span>    }
    dst<span style="color:#f92672">-&gt;</span>SetAccessFlags(access_flags);
}
</code></pre></div><h4 id="linkcode">LinkCode</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>LinkCode(ArtMethod<span style="color:#f92672">*</span> method,
            <span style="color:#66d9ef">const</span> OatFile<span style="color:#f92672">::</span>OatClass<span style="color:#f92672">*</span> oat_class,
            <span style="color:#66d9ef">int32_t</span> class_def_method_index) {
    Runtime<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> runtime <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current();
    <span style="color:#66d9ef">if</span> (runtime<span style="color:#f92672">-&gt;</span>IsAotCompiler()) {
      <span style="color:#75715e">// The following code only applies to a non-compiler runtime.
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">return</span>;
    }
    <span style="color:#75715e">// Method shouldn&#39;t have already been linked.
</span><span style="color:#75715e"></span>    DCHECK(method<span style="color:#f92672">-&gt;</span>GetEntryPointFromQuickCompiledCode() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>);
    <span style="color:#75715e">/*在下面的代码中：
</span><span style="color:#75715e">     （1）oat_class的类型为OatFile::OatClass，其内容由oat文件中OatClass区域相应位置处的信息构成。
</span><span style="color:#75715e">     （2）oat_method的类型为OatFile::OatMethod，其内容由oat文件中OatMethod区域对应的OatQuickMethodHeader信息构成。*/</span>
    <span style="color:#75715e">// Every kind of method should at least get an invoke stub from the oat_method.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// non-abstract methods also get their code pointers.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (oat_class <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
        <span style="color:#75715e">/*获取该Java方法对应的OatMethod信息。如果它没有被编译过，则返回的OatMethod对象的code_
</span><span style="color:#75715e">          offset_取值为0。OatMethod.code_offset_指向对应机器码在oat文件中的位置。其值为0
</span><span style="color:#75715e">          就表示该方法不存在机器码。  */</span>
            <span style="color:#66d9ef">const</span> OatFile<span style="color:#f92672">::</span>OatMethod oat_method <span style="color:#f92672">=</span> oat_class<span style="color:#f92672">-&gt;</span>GetOatMethod(class_def_method_index);
        <span style="color:#75715e">/*设置ArtMethod ptr_sized_fields_entry_point_from_quick_compiled_code_为
</span><span style="color:#75715e">          Oat文件区域OatQuickMethodHeader的code_。读者可回顾第9章图9-41“oat和art文件
</span><span style="color:#75715e">          的关系”。code_处存储的就是该方法编译得到的机器码。注意，为节省篇幅，笔者以后用机器
</span><span style="color:#75715e">          码入口地址来指代entry_point_from_quick_compiled_code_成员变量。*/</span>
        oat_method.LinkMethod(method);
    }
    
    <span style="color:#75715e">// Install entry point from interpreter.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> quick_code <span style="color:#f92672">=</span> method<span style="color:#f92672">-&gt;</span>GetEntryPointFromQuickCompiledCode();<span style="color:#75715e">//获取ArtMethod对象的机器码入口地址
</span><span style="color:#75715e"></span>    <span style="color:#75715e">/*在ShouldUseInterpreterEntrypoint函数中，如果机器码入口地址为空（该方法没有经过编译），
</span><span style="color:#75715e">      或者虚拟机进入了调试状态，则必须使用解释执行的模式。这种情况下，该函数返回值enter_inter-
</span><span style="color:#75715e">      preter为true。 */</span>
    <span style="color:#66d9ef">bool</span> enter_interpreter <span style="color:#f92672">=</span> ShouldUseInterpreterEntrypoint(method, quick_code);

    <span style="color:#66d9ef">if</span> (method<span style="color:#f92672">-&gt;</span>IsStatic() <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>method<span style="color:#f92672">-&gt;</span>IsConstructor()) {
    <span style="color:#75715e">// For static methods excluding the class initializer, install the trampoline.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// It will be replaced by the proper entry point by ClassLinker::FixupStaticTrampolines
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// after initializing class (see ClassLinker::InitializeClass method).
</span><span style="color:#75715e"></span>    <span style="color:#75715e">/*如果method为静态且不是类初始化&#34;&lt;clinit&gt;&#34;（它是类的静态构造方法）方法，则设置机器码入口
</span><span style="color:#75715e">      地址为art_quick_resolution_trampoline。根据9.5.4.4.1节的介绍可知。该地址对应的是
</span><span style="color:#75715e">      一段跳转代码，跳转的目标是artQuickResolutionTrampoline函数。它是一个特殊的函数，和
</span><span style="color:#75715e">      类的解析有关。注意，虽然在LinkCode中（该函数是在类初始化之前被调用的）设置的跳转目标为
</span><span style="color:#75715e">      artQuickResolutionTrampoline，但ClassLinker在初始化类的InitializeClass函数的最
</span><span style="color:#75715e">      后会通过调用FixupStaticTrampolines来尝试更新此处所设置的跳转地址为正确的地址, 更新机器码入口地址entry_point_from_quick_compiled_code_*/</span>
        method<span style="color:#f92672">-&gt;</span>SetEntryPointFromQuickCompiledCode(GetQuickResolutionStub());
    } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (quick_code <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">&amp;&amp;</span> method<span style="color:#f92672">-&gt;</span>IsNative()) {
        <span style="color:#75715e">/*如果method为jni方法，并且不存在机器码，则设置机器码入口地址为跳转代码art_quick_
</span><span style="color:#75715e">          generic_jni_trampoline，它的跳转目标为artQuickGenericJniTrampoline函数。*/</span>
        method<span style="color:#f92672">-&gt;</span>SetEntryPointFromQuickCompiledCode(GetQuickGenericJniStub());
    } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (enter_interpreter) {
        <span style="color:#75715e">// Set entry point from compiled code if there&#39;s no code or in interpreter only mode.
</span><span style="color:#75715e"></span>        <span style="color:#75715e">/*enter_interpreter的取值来自ShouldUseInterpreterEntrypoint，一般而言，如果该
</span><span style="color:#75715e">          方法没有对应的机器码，或者在调试运行模式下，则enter_interpreter为true。对应的机
</span><span style="color:#75715e">          器码入口地址为art_quick_to_interpreter_bridge跳转代码，其跳转的目标
</span><span style="color:#75715e">        //为artQuickToInterpreterBridge函数。*/</span>
        method<span style="color:#f92672">-&gt;</span>SetEntryPointFromQuickCompiledCode(GetQuickToInterpreterBridge());
    }
    <span style="color:#66d9ef">if</span> (method<span style="color:#f92672">-&gt;</span>IsNative()) {
        <span style="color:#75715e">// Unregistering restores the dlsym lookup stub.
</span><span style="color:#75715e"></span>        <span style="color:#75715e">/*如果为jni方法，则调用ArtMethod的UnregisterNative函数，其内部主要设置ArtMethod
</span><span style="color:#75715e">          tls_ptr_sized_.entry_point_from_jni_成员变量为跳转代码art_jni_dlsym_look-
</span><span style="color:#75715e">          up_stub，跳转目标为artFindNativeMethod函数。为简单起见，笔者以后用jni机器码入口
</span><span style="color:#75715e">          地址指代entry_point_from_jni_成员变量。这部分内容和JNI有关，我们以后再讨论它。*/</span>
        method<span style="color:#f92672">-&gt;</span>UnregisterNative();
        
           <span style="color:#66d9ef">if</span> (enter_interpreter <span style="color:#f92672">||</span> quick_code <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
             <span style="color:#75715e">// We have a native method here without code. Then it should have either the generic JNI
</span><span style="color:#75715e"></span>             <span style="color:#75715e">// trampoline as entrypoint (non-static), or the resolution trampoline (static).
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// TODO: this doesn&#39;t handle all the cases where trampolines may be installed.
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> entry_point <span style="color:#f92672">=</span> method<span style="color:#f92672">-&gt;</span>GetEntryPointFromQuickCompiledCode();
            DCHECK(IsQuickGenericJniStub(entry_point) <span style="color:#f92672">||</span>
                 IsQuickResolutionStub(entry_point));
          }
    }
}
</code></pre></div><p>art/runtime/oat_file.cc</p>
<h5 id="oatmethodlinkmethod">OatMethod::LinkMethod</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> OatFile<span style="color:#f92672">::</span>OatMethod<span style="color:#f92672">::</span>LinkMethod(ArtMethod<span style="color:#f92672">*</span> method) <span style="color:#66d9ef">const</span> {
  CHECK(method <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>);
  method<span style="color:#f92672">-&gt;</span>SetEntryPointFromQuickCompiledCode(GetQuickCode());
}
</code></pre></div><h3 id="loadsuperandinterfaces">LoadSuperAndInterfaces</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>LoadSuperAndInterfaces(Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,
                    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file) {
    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">&amp;</span> class_def <span style="color:#f92672">=</span>
            dex_file.GetClassDef(klass<span style="color:#f92672">-&gt;</span>GetDexClassDefIndex());
    <span style="color:#75715e">//找到基类的id
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">uint16_t</span> super_class_idx <span style="color:#f92672">=</span> class_def.superclass_idx_;
    <span style="color:#75715e">//根据基类的id来解析它，返回值是代表基类的Class实例。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//ResolveType函数的内容将在8.7.8节中介绍
</span><span style="color:#75715e"></span>    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> super_class <span style="color:#f92672">=</span> ResolveType(dex_file, super_class_idx,
                        klass.Get());
    <span style="color:#66d9ef">if</span> (super_class <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) { <span style="color:#66d9ef">return</span> false;  }
    <span style="color:#75715e">//做一些简单校验。比如，基类如果不允许派生，则返回失败
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>CanAccess(super_class)) { <span style="color:#66d9ef">return</span> false; }
    klass<span style="color:#f92672">-&gt;</span>SetSuperClass(super_class);
                  <span style="color:#75715e">//设置super_class_成员变量的值
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//下面这个检查和编译有关系，笔者不拟讨论它，代码中的注释非常详细
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>CheckSuperClassChange(klass, dex_file, class_def, super_class)) {
            <span style="color:#66d9ef">return</span> false;
    }
    <span style="color:#75715e">//从dex文件里找到目标类实现了哪些接口类。参考图8-7所示class_def结构体中
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//interfaces_off的含义
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>TypeList<span style="color:#f92672">*</span> interfaces <span style="color:#f92672">=</span>
                        dex_file.GetInterfacesList(class_def);
    <span style="color:#66d9ef">if</span> (interfaces <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
        <span style="color:#66d9ef">for</span> (size_t i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> interfaces<span style="color:#f92672">-&gt;</span>Size(); i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">uint16_t</span> idx <span style="color:#f92672">=</span> interfaces<span style="color:#f92672">-&gt;</span>GetTypeItem(i).type_idx_;
          <span style="color:#75715e">//解析这个接口类。下文将介绍ResolveType函数
</span><span style="color:#75715e"></span>          mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> interface <span style="color:#f92672">=</span> ResolveType(dex_file, idx, klass.Get());
              ......      <span style="color:#75715e">//如果接口类找不到或者接口类不允许继承，则返回错误
</span><span style="color:#75715e"></span>        }
    }
    <span style="color:#75715e">//设置klass的状态为kStatusLoaded
</span><span style="color:#75715e"></span>    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusLoaded, <span style="color:#66d9ef">nullptr</span>);
    <span style="color:#66d9ef">return</span> true;
}
</code></pre></div><h2 id="resolvelink">Resolve/Link</h2>
<p>LinkClass相关函数</p>
<p>进入LinkClass之前，先回顾上文SetupClass和LoadClass的结果。此时：</p>
<p>·目标类的信息从dex文件里对应的class_def结构体及其他相关结构体已经提取并转换为一个mirror Class对象。</p>
<p>·同时，该Class对象中代表本类的成员变量和成员函数信息也相应创建为对应的ArtField和ArtMethod的对象，并做好了相关设置。从Class类成员来说，它的methods_、sfields_、ifields_都设置好了。</p>
<h3 id="linkclass">LinkClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>LinkClass(Thread<span style="color:#f92672">*</span> self,<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
                Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass, <span style="color:#75715e">//待link的目标class
</span><span style="color:#75715e"></span>                Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ObjectArray<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;&gt;</span> interfaces,
                MutableHandle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;*</span> h_new_class_out) {
    <span style="color:#75715e">/*注意本函数的参数：
</span><span style="color:#75715e">    （1）klass代表输入的目标类，其状态是kStatusLoaded。
</span><span style="color:#75715e">    （2）h_new_class_out为输出参数，代表LinkClass执行成功后所返回给调用者的、类状态切升级为
</span><span style="color:#75715e">        kStatusResolved的目标类。所以，这个变量才是LinkClass执行成功后的结果。*/</span>
    <span style="color:#75715e">//Link基类
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>LinkSuperClass(klass)) { <span style="color:#66d9ef">return</span> false;  }<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>    <span style="color:#75715e">/*下面将创建一个ArtMethod*数组。数组大小为kImtSize。它是一个编译时常量，由编译参数ART_
</span><span style="color:#75715e">      IMT_SIZE指定，默认是64。IMT是Interface Method Table的缩写。如其名所示，它和接口所
</span><span style="color:#75715e">      实现的函数有关。其作用我们后文再介绍  */</span>
    ArtMethod<span style="color:#f92672">*</span> imt[mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kImtSize];
    std<span style="color:#f92672">::</span>fill_n(imt, arraysize(imt),                  <span style="color:#75715e">//填充这个数组的内容为默认值
</span><span style="color:#75715e"></span>                Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>GetImtUnimplementedMethod());
    <span style="color:#75715e">//对该类所包含的方法（包括它实现的接口方法、继承自父类的方法等）进行处理
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>LinkMethods(self, klass, interfaces, imt)) { <span style="color:#66d9ef">return</span> false;}<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//下面两个函数分别对类的成员进行处理。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>LinkInstanceFields(self, klass)) { <span style="color:#66d9ef">return</span> false;}<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>    size_t class_size;
        <span style="color:#75715e">//尤其注意LinkStaticFields函数，它的返回值包括class_size，代表该类所需内存大小。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>LinkStaticFields(self, klass, <span style="color:#f92672">&amp;</span>class_size)) { <span style="color:#66d9ef">return</span> false; }<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">//处理Class的reference_instance_offsets_成员变量
</span><span style="color:#75715e"></span>    CreateReferenceInstanceOffsets(klass);<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//当目标类是基础数据类、抽象类（不包括数组）、接口类时，下面的if条件满足
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsTemp() <span style="color:#f92672">||</span> .....)) {
        .....
        <span style="color:#75715e">//对于非Temp的类，不需要额外的操作，所以klass的状态被置为kStatusResolved，然后再赋
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//值给h_new_class_out。到此，目标类就算解析完了
</span><span style="color:#75715e"></span>        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusResolved, self);
        h_new_class_out<span style="color:#f92672">-&gt;</span>Assign(klass.Get());
    } <span style="color:#66d9ef">else</span> {<span style="color:#75715e">//如果目标类是可实例化的，则需要做额外的处理
</span><span style="color:#75715e"></span>        StackHandleScope<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span> hs(self);
        <span style="color:#75715e">//CopyOf很关键，它先创建一个大小为class_size的Class对象，然后，klass的信息将拷贝
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//到这个新创建的Class对象中。在这个处理过程汇总，Class对象的类状态将被设置为kStatus-
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//Resolving。
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">auto</span> h_new_class <span style="color:#f92672">=</span> hs.NewHandle(klass<span style="color:#f92672">-&gt;</span>CopyOf(self, class_size,
                           imt, image_pointer_size_));
        klass<span style="color:#f92672">-&gt;</span>SetMethodsPtrUnchecked(<span style="color:#66d9ef">nullptr</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);      <span style="color:#75715e">//清理klass的内容
</span><span style="color:#75715e"></span>        ...... <span style="color:#75715e">//清理klass的其他内容;
</span><span style="color:#75715e"></span>        {
            ......
            <span style="color:#75715e">//更新ClassTable中对应的信息
</span><span style="color:#75715e"></span>            mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> existing <span style="color:#f92672">=</span> table<span style="color:#f92672">-&gt;</span>UpdateClass(descriptor,
                   h_new_class.Get(), ComputeModifiedUtf8Hash(descriptor));
            ......
            }
        <span style="color:#75715e">//设置klass的状态为kStatusRetired，表示该类已经被废弃
</span><span style="color:#75715e"></span>        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusRetired, self);
        <span style="color:#75715e">//设置新类的状态为kStatusResolved，表示该类解析完毕。
</span><span style="color:#75715e"></span>        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(
                 h_new_class, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusResolved,self);
        h_new_class_out<span style="color:#f92672">-&gt;</span>Assign(h_new_class.Get());      <span style="color:#75715e">//赋值给输出参数
</span><span style="color:#75715e"></span>    }
    <span style="color:#66d9ef">return</span> true;
}
</code></pre></div><h3 id="linkmethods">LinkMethods</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>LinkMethods(Thread<span style="color:#f92672">*</span> self,
            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,
            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ObjectArray<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;&gt;</span> interfaces,
            ArtMethod<span style="color:#f92672">**</span> out_imt) {
    ......
    std<span style="color:#f92672">::</span>unordered_map<span style="color:#f92672">&lt;</span>size_t, ClassLinker<span style="color:#f92672">::</span>MethodTranslation<span style="color:#f92672">&gt;</span>
                default_translations;
    <span style="color:#75715e">//下面三个函数很复杂
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span>  <span style="color:#a6e22e">SetupInterfaceLookupTable</span>(self, klass, interfaces)
            <span style="color:#f92672">&amp;&amp;</span> LinkVirtualMethods(self, klass, <span style="color:#f92672">&amp;</span>default_translations)
            <span style="color:#f92672">&amp;&amp;</span> LinkInterfaceMethods(self, klass, default_translations, out_imt);
}
</code></pre></div><h3 id="linkinstancefields">LinkInstanceFields</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>LinkInstanceFields(Thread<span style="color:#f92672">*</span> self, Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass) {
  CHECK(klass.Get() <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">LinkFields</span>(self, klass, false, <span style="color:#66d9ef">nullptr</span>);
}
</code></pre></div><h3 id="linkstaticfields">LinkStaticFields</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>LinkStaticFields(Thread<span style="color:#f92672">*</span> self, Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass, size_t<span style="color:#f92672">*</span> class_size) {
  CHECK(klass.Get() <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">LinkFields</span>(self, klass, true, class_size);
}
</code></pre></div><h4 id="linkfields">LinkFields</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>LinkFields(Thread<span style="color:#f92672">*</span> self,
                             Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,
                             <span style="color:#66d9ef">bool</span> is_static, size_t<span style="color:#f92672">*</span> class_size) {
    <span style="color:#75715e">//确定成员变量的个数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> size_t num_fields <span style="color:#f92672">=</span> is_static <span style="color:#f92672">?</span> klass<span style="color:#f92672">-&gt;</span>NumStaticFields() <span style="color:#f92672">:</span>
                        klass<span style="color:#f92672">-&gt;</span>NumInstanceFields();
    <span style="color:#75715e">//从Class中得到代表静态或非静态成员变量的数组
</span><span style="color:#75715e"></span>    LengthPrefixedArray<span style="color:#f92672">&lt;</span>ArtField<span style="color:#f92672">&gt;*</span> <span style="color:#66d9ef">const</span> fields <span style="color:#f92672">=</span> is_static <span style="color:#f92672">?</span>
                    klass<span style="color:#f92672">-&gt;</span>GetSFieldsPtr() <span style="color:#f92672">:</span>  klass<span style="color:#f92672">-&gt;</span>GetIFieldsPtr();
    MemberOffset <span style="color:#a6e22e">field_offset</span>(<span style="color:#ae81ff">0</span>);
    <span style="color:#66d9ef">if</span> (is_static) {
        <span style="color:#75715e">//如果是静态变量，则得到静态存储空间的起始位置。
</span><span style="color:#75715e"></span>        field_offset <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetFirstReferenceStaticFieldOffsetDuringLinking(
                            image_pointer_size_);
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e">//获取基类的ObjectSize
</span><span style="color:#75715e"></span>        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> super_class <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetSuperClass();
        <span style="color:#66d9ef">if</span> (super_class <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
            field_offset <span style="color:#f92672">=</span> MemberOffset(super_class<span style="color:#f92672">-&gt;</span>GetObjectSize());
        }
    }
    <span style="color:#75715e">//排序，引用类型放最前面，然后是long/double、int/float等。符合图8-13中的布局要求
</span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>deque<span style="color:#f92672">&lt;</span>ArtField<span style="color:#f92672">*&gt;</span> grouped_and_sorted_fields;
    <span style="color:#66d9ef">for</span> (size_t i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> num_fields; i<span style="color:#f92672">++</span>) {
        grouped_and_sorted_fields.push_back(<span style="color:#f92672">&amp;</span>fields<span style="color:#f92672">-&gt;</span>At(i));
    }
    std<span style="color:#f92672">::</span>sort(grouped_and_sorted_fields.begin(),
             grouped_and_sorted_fields.end(),LinkFieldsComparator());
    size_t current_field <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    size_t num_reference_fields <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    FieldGaps gaps;
    <span style="color:#75715e">//先处理引用类型的变量
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (; current_field <span style="color:#f92672">&lt;</span> num_fields; current_field<span style="color:#f92672">++</span>) {
        ArtField<span style="color:#f92672">*</span> field <span style="color:#f92672">=</span> grouped_and_sorted_fields.front();
        Primitive<span style="color:#f92672">::</span>Type type <span style="color:#f92672">=</span> field<span style="color:#f92672">-&gt;</span>GetTypeAsPrimitiveType();
        <span style="color:#66d9ef">bool</span> isPrimitive <span style="color:#f92672">=</span> type <span style="color:#f92672">!=</span> Primitive<span style="color:#f92672">::</span>kPrimNot;
        <span style="color:#66d9ef">if</span> (isPrimitive) { <span style="color:#66d9ef">break</span>; }
 ......
        grouped_and_sorted_fields.pop_front();
        num_reference_fields<span style="color:#f92672">++</span>;
        field<span style="color:#f92672">-&gt;</span>SetOffset(field_offset);      <span style="color:#75715e">//设置ArtField的offset_变量
</span><span style="color:#75715e"></span>        field_offset <span style="color:#f92672">=</span> MemberOffset(field_offset.Uint32Value() <span style="color:#f92672">+</span>
                                <span style="color:#66d9ef">sizeof</span>(mirror<span style="color:#f92672">::</span>HeapReference<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Object<span style="color:#f92672">&gt;</span>));
    }
    <span style="color:#75715e">//我们在ComputeClassSize中曾提到说内存布局可以优化，下面的ShuffleForward就是处理这种优
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//化。ShuffleForward是一个模板函数，内部会设置ArtField的offset_。
</span><span style="color:#75715e"></span>    ShuffleForward<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">8</span><span style="color:#f92672">&gt;</span>(<span style="color:#f92672">&amp;</span>current_field, <span style="color:#f92672">&amp;</span>field_offset,
              <span style="color:#f92672">&amp;</span>grouped_and_sorted_fields, <span style="color:#f92672">&amp;</span>gaps);
    ...... <span style="color:#75715e">//处理4字节、2字节基础数据类型变量
</span><span style="color:#75715e"></span>    ShuffleForward<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;</span>(<span style="color:#f92672">&amp;</span>current_field, <span style="color:#f92672">&amp;</span>field_offset,
                 <span style="color:#f92672">&amp;</span>grouped_and_sorted_fields, <span style="color:#f92672">&amp;</span>gaps);
    ......
    <span style="color:#75715e">//特殊处理java.lang.ref.Reference类。将它的非静态引用类型变量的个数减去一个。减去的这个
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//变量是java Reference类中的referent成员，它和GC有关，需要特殊对待。后续章节会详细介绍GC。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>is_static <span style="color:#f92672">&amp;&amp;</span> klass<span style="color:#f92672">-&gt;</span>DescriptorEquals(<span style="color:#e6db74">&#34;Ljava/lang/ref/Reference;&#34;</span>)) {
        <span style="color:#f92672">--</span>num_reference_fields;
    }

    size_t size <span style="color:#f92672">=</span> field_offset.Uint32Value();
    <span style="color:#66d9ef">if</span> (is_static) {
        klass<span style="color:#f92672">-&gt;</span>SetNumReferenceStaticFields(num_reference_fields);
        <span style="color:#f92672">*</span>class_size <span style="color:#f92672">=</span> size; <span style="color:#75715e">//设置Class最终所需内存大小
</span><span style="color:#75715e"></span>    } <span style="color:#66d9ef">else</span> {
        klass<span style="color:#f92672">-&gt;</span>SetNumReferenceInstanceFields(num_reference_fields);
        ......
        <span style="color:#75715e">//如果类的对象是固定大小（像数组、String则属于非固定大小），则设置Object所需内存大小
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsVariableSize()) {
        ......
            klass<span style="color:#f92672">-&gt;</span>SetObjectSize(size);
        }
    }
    <span style="color:#66d9ef">return</span> true;
}
</code></pre></div><h2 id="verify">Verify</h2>
<p>在ART虚拟机中，如果某个类校验通过的话，后续执行该类的方法时将跳过所谓的访问检查（Access Check）</p>
<pre><code class="language-mermaid" data-lang="mermaid">graph TB
dex2oat时verify_预校验--&gt;软错误时kStatusRetryVerificationAtRuntime
dex2oat时verify_预校验--&gt;成功kStatusVerified
虚拟机运行时检查--&gt;成功kStatusVerified
成功kStatusVerified--&gt;该类methods_数组所有ArtMethod对象设置kAccSkipAccessChecks标志
成功kStatusVerified--&gt;为类设置kAccVerification-Attempted标记
虚拟机运行时检查--&gt;软错误时kStatusRetryVerificationAtRuntime
软错误时kStatusRetryVerificationAtRuntime--&gt;MethodVerifier对该类进行校验
MethodVerifier对该类进行校验--&gt;依旧软错误
依旧软错误--&gt;为类设置kAccVerification-Attempted标记
</code></pre><h3 id="verifyclass">VerifyClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>VerifyClass(Thread<span style="color:#f92672">*</span> self, Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,
                  LogSeverity log_level) {
        ...... <span style="color:#75715e">//可能有另外一个线程正在处理类的校验，此处省略的代码将处理这种情况判断该类是否
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//已经通过校验（类状态大于或等于kStatusVerified）
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (klass<span style="color:#f92672">-&gt;</span>IsVerified()) {
            <span style="color:#75715e">/* Verify一个类是需要代价的（比如执行上两节代码所示MethodVerifier的相关函数是
</span><span style="color:#75715e">               需要花费时间），但付出这个代价会带来一定好处。在ART虚拟机中，如果某个类校验通
</span><span style="color:#75715e">               过的话，后续执行该类的方法时将跳过所谓的访问检查（Access Check）。Access Check
</span><span style="color:#75715e">               的具体内容将在后续章节介绍。此处举一个简单例子，比如访问检查将判断外部调用者是
</span><span style="color:#75715e">               否调用了某个类的私有函数。显然，Access Check将影响函数执行的时间。
</span><span style="color:#75715e">               下面的这个EnsureSkipAccessChecksMethods将做两件事情：
</span><span style="color:#75715e">              （1）为klass methods_数组里的ArtMethod对象设置kAccSkipAccessChecks标志位
</span><span style="color:#75715e">              （2）为klass设置kAccVerificationAttempted标志位。这个标记位表示该类已经尝试过
</span><span style="color:#75715e">                校验了，无须再次校验。
</span><span style="color:#75715e">                这些标志位的作用我们以后碰见具体代码时再讲解。  */</span>
            EnsureSkipAccessChecksMethods(klass);
            <span style="color:#66d9ef">return</span>;
            }
        <span style="color:#75715e">//如果类状态大于等于kStatusRetryVerificationAtRuntime并且当前进程是dex2oat(Is-
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//AotCompiler用于判断当前进程是否为编译进程)，则直接返回。类的校验将留待真实的虚拟机
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//进程来完成。
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (klass<span style="color:#f92672">-&gt;</span>IsCompileTimeVerified() <span style="color:#f92672">&amp;&amp;</span>
            Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>IsAotCompiler()) {  <span style="color:#66d9ef">return</span>;  }

        <span style="color:#66d9ef">if</span> (klass<span style="color:#f92672">-&gt;</span>GetStatus() <span style="color:#f92672">==</span> mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusResolved) {
            <span style="color:#75715e">//设置类状态为kStatusVerifying，表明klass正处于类校验阶段。
</span><span style="color:#75715e"></span>            mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusVerifying, self);
        } <span style="color:#66d9ef">else</span> { <span style="color:#75715e">//如果类的当前状态不是kStatusResolved，则表明该类在dex2oat时已经做过校
</span><span style="color:#75715e"></span>                 <span style="color:#75715e">//验，但校验结果是kStatusRetryVerificationAtRuntime。所以此处需要在完
</span><span style="color:#75715e"></span>                 <span style="color:#75715e">//整虚拟机环境下再做校验。
</span><span style="color:#75715e"></span>            mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass,        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass,
                    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusVerifyingAtRuntime, self);
        }
    <span style="color:#75715e">/*IsVerificationEnabled用于返回虚拟机是否开启了类校验的功能，它和verify_mode.h中定义
</span><span style="color:#75715e">      的枚举变量VerifyMode有关。该枚举变量有三种取值：
</span><span style="color:#75715e">      （1）kNone：不做校验。
</span><span style="color:#75715e">      （2）kEnable：标准校验流程。其中，在dex2oat过程中会尝试做预校验（preverifying）。
</span><span style="color:#75715e">      （3）kSoftFail：强制为软校验失败。这种情况下，指令码在解释执行的时候会进行access
</span><span style="color:#75715e">          check。这部分内容在dex2oat一章中有所体现，以后我们会提到。
</span><span style="color:#75715e">      从上述内容可知，在ART里，类校验的相关知识绝不仅仅只包含JLS规范中提到的那些诸如检查
</span><span style="color:#75715e">      字节码是否合法之类的部分，它还和dex2oat编译与Java方法如何执行等内容密切相关。*/</span>
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>IsVerificationEnabled()) {
        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusVerified, self);
        EnsureSkipAccessChecksMethods(klass);
        <span style="color:#66d9ef">return</span>;
    }
    <span style="color:#75715e">//先校验父类。AttemptSuperTypeVerification内部也会调用VerifyClass。
</span><span style="color:#75715e"></span>    ......
    <span style="color:#75715e">//请读者自行阅读它
</span><span style="color:#75715e"></span>    MutableHandle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> supertype(hs.NewHandle(
                        klass<span style="color:#f92672">-&gt;</span>GetSuperClass()));
    <span style="color:#66d9ef">if</span> (supertype.Get() <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>AttemptSupertypeVerification(self,
                klass, supertype)) {    <span style="color:#66d9ef">return</span>;    }

    <span style="color:#75715e">//如果父类校验通过，并且klass不是接口类的话，我们还要对klass所实现的接口类进行校验。校验
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//接口类是从Java 1.8开始，接口类支持定义有默认实现的接口函数，默认函数包含实际的内容，所以
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//需要校验。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> ((supertype.Get() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">||</span> supertype<span style="color:#f92672">-&gt;</span>IsVerified())
                    <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsInterface()) {
        <span style="color:#66d9ef">int32_t</span> iftable_count <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetIfTableCount();
        MutableHandle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> iface(hs.NewHandle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">nullptr</span>));
        <span style="color:#75715e">//遍历IfTable，获取其中的接口类。
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int32_t</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> iftable_count; i<span style="color:#f92672">++</span>) {
            iface.Assign(klass<span style="color:#f92672">-&gt;</span>GetIfTable()<span style="color:#f92672">-&gt;</span>GetInterface(i));
            <span style="color:#75715e">//接口类没有默认接口函数，或者已经校验通过，则略过
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (LIKELY(<span style="color:#f92672">!</span>iface<span style="color:#f92672">-&gt;</span>HasDefaultMethods() <span style="color:#f92672">||</span> iface<span style="color:#f92672">-&gt;</span>IsVerified())) {
                <span style="color:#66d9ef">continue</span>;
        } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (UNLIKELY(<span style="color:#f92672">!</span>AttemptSupertypeVerification(self,
                    klass, iface))) {
                    <span style="color:#66d9ef">return</span>;      <span style="color:#75715e">//接口类校验失败。直接返回
</span><span style="color:#75715e"></span>            }  <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (UNLIKELY(<span style="color:#f92672">!</span>iface<span style="color:#f92672">-&gt;</span>IsVerified())) {
                <span style="color:#75715e">//如果接口类校验后得到的状态为kStatusVerifyingAtRuntime，则跳出循环
</span><span style="color:#75715e"></span>                supertype.Assign(iface.Get());
                <span style="color:#66d9ef">break</span>;
            }
        }
        <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>klass<span style="color:#f92672">-&gt;</span>GetDexCache()<span style="color:#f92672">-&gt;</span>GetDexFile();
        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>Status oat_file_class_status(
                                 mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusNotReady);
    <span style="color:#75715e">/*下面这个函数其实只是用来判断klass是否已经在dex2oat阶段做过预校验了。这需要结合该类编译
</span><span style="color:#75715e">      结果来决定（包含在OatFile中的类状态）。除此之外，如果我们正在编译系统镜像时（即在dex2oat
</span><span style="color:#75715e">      进程中编译包含在Boot Image的类），则该函数也返回false。preverified如果为false，则将
</span><span style="color:#75715e">      调用MethodVerifier VerifyClass来做具体的校验工作。VerifyClassUsingOatFile还包含其
</span><span style="color:#75715e">      他几种返回false的情况，请读者自行阅读。*/</span>
    <span style="color:#66d9ef">bool</span> preverified <span style="color:#f92672">=</span> VerifyClassUsingOatFile(dex_file, klass.Get(),
                    oat_file_class_status);
    verifier<span style="color:#f92672">::</span>MethodVerifier<span style="color:#f92672">::</span>FailureKind verifier_failure <span style="color:#f92672">=</span>
                            verifier<span style="color:#f92672">::</span>MethodVerifier<span style="color:#f92672">::</span>kNoFailure;
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>preverified) {            <span style="color:#75715e">//没有预校验的处理
</span><span style="color:#75715e"></span>        Runtime<span style="color:#f92672">*</span> runtime <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current();
        <span style="color:#75715e">//调用MethodVerifier VerifyClass来完成具体的校验工作,main
</span><span style="color:#75715e"></span>        verifier_failure <span style="color:#f92672">=</span> verifier<span style="color:#f92672">::</span>MethodVerifier<span style="color:#f92672">::</span>VerifyClass(self,
                       klass.Get(), runtime<span style="color:#f92672">-&gt;</span>GetCompilerCallbacks(),,...);
    }
    ......
    <span style="color:#66d9ef">if</span> (preverified <span style="color:#f92672">||</span> verifier_failure <span style="color:#f92672">!=</span>
              verifier<span style="color:#f92672">::</span>MethodVerifier<span style="color:#f92672">::</span>kHardFailure) {
    ......
        <span style="color:#66d9ef">if</span> (verifier_failure <span style="color:#f92672">==</span> verifier<span style="color:#f92672">::</span>MethodVerifier<span style="color:#f92672">::</span>kNoFailure) {
            <span style="color:#75715e">//自己和基类（或者接口类）的校验结果都正常，则类状态设置为kStatusVerified
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (supertype.Get() <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">||</span> supertype<span style="color:#f92672">-&gt;</span>IsVerified()) {
            mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass,
                mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusVerified, self);
        } <span style="color:#66d9ef">else</span> {......}
    } <span style="color:#66d9ef">else</span> {                  <span style="color:#75715e">//对应校验结果为kSoftFail的情况
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>IsAotCompiler()) {
                              <span style="color:#75715e">//如果是dex2oat中出现这种情况，则设置类的状态为kStatusRetryVerificationAtRuntime
</span><span style="color:#75715e"></span>        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass,
                mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusRetryVerificationAtRuntime, self);
        } <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e">/*设置类状态为kStatusVerified，并且设置类标记位kAccVerificationAttempted。
</span><span style="color:#75715e">          注意，我们在上面代码中介绍过EnsureSkipAccessChecksMethods函数。这个函数将
</span><span style="color:#75715e">         （1）为klass methods_数组里的ArtMethod对象设置kAccSkipAccessChecks标志位
</span><span style="color:#75715e">         （2）为klass设置kAccVerificationAttempted标志位。
</span><span style="color:#75715e">          而下面的代码只设置了（2），没有设置（1）。所以，虽然类状态为kStatusVerified，
</span><span style="color:#75715e">          但在执行其方法时可能还要做Access Check   */</span>
        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusVerified, self);
        klass<span style="color:#f92672">-&gt;</span>SetVerificationAttempted();
        }
        }
    } <span style="color:#66d9ef">else</span> {......  }
   } <span style="color:#66d9ef">else</span> {......  }
        ....... <span style="color:#75715e">//其他处理，略过
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="methodverifierverifyclass">MethodVerifier::VerifyClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">MethodVerifier<span style="color:#f92672">::</span>FailureKind MethodVerifier<span style="color:#f92672">::</span>VerifyClass(Thread<span style="color:#f92672">*</span> self,
                     mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> klass,......) {      <span style="color:#75715e">//待校验的类由kclass表示
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//如果该类已经被校验过，则直接返回校验成功
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (klass<span style="color:#f92672">-&gt;</span>IsVerified()) {  <span style="color:#66d9ef">return</span> kNoFailure; }
    <span style="color:#66d9ef">bool</span> early_failure <span style="color:#f92672">=</span> false;
    std<span style="color:#f92672">::</span>string failure_message;
    <span style="color:#75715e">//获取该class所在的Dex文件信息及该类在Dex文件里的class_def信息
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetDexFile();
    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">*</span> class_def <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetClassDef();
    <span style="color:#75715e">//获取该类的基类对象
</span><span style="color:#75715e"></span>    mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> super <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetSuperClass();
    std<span style="color:#f92672">::</span>string temp;
    <span style="color:#75715e">//下面这个判断语句表示kclass没有基类，而它又不是Java Object类。显然，这是违背Java语言规范
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//的—Java中，只有Object类才没有基类
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (super <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">&amp;&amp;</span> strcmp(<span style="color:#e6db74">&#34;Ljava/lang/Object;&#34;</span>,
                             klass<span style="color:#f92672">-&gt;</span>GetDescriptor(<span style="color:#f92672">&amp;</span>temp)) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
        early_failure <span style="color:#f92672">=</span> true;
        failure_message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; that has no super class&#34;</span>;
    } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (super <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span> <span style="color:#f92672">&amp;&amp;</span> super<span style="color:#f92672">-&gt;</span>IsFinal()) {
        <span style="color:#75715e">//如果基类有派生类的话，基类不能为final
</span><span style="color:#75715e"></span>        early_failure <span style="color:#f92672">=</span> true;
    } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (class_def <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) { <span style="color:#75715e">//该类在Dex文件里没有class_def信息
</span><span style="color:#75715e"></span>        early_failure <span style="color:#f92672">=</span> true;
    }
    <span style="color:#66d9ef">if</span> (early_failure) {
        ......
        <span style="color:#66d9ef">if</span> (callbacks <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
        <span style="color:#75715e">//callbacks的类型是CompilerCallbacks，dex字节码转机器码的时候会用上它
</span><span style="color:#75715e"></span>            ClassReference <span style="color:#a6e22e">ref</span>(<span style="color:#f92672">&amp;</span>dex_file, klass<span style="color:#f92672">-&gt;</span>GetDexClassDefIndex());
            callbacks<span style="color:#f92672">-&gt;</span>ClassRejected(ref);
        }
        <span style="color:#66d9ef">return</span> kHardFailure; <span style="color:#75715e">//返回校验错误
</span><span style="color:#75715e"></span>    }
    StackHandleScope<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> hs(self);
    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>DexCache<span style="color:#f92672">&gt;</span> dex_cache(hs.NewHandle(klass<span style="color:#f92672">-&gt;</span>GetDexCache()));
    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader(hs.NewHandle(
                                      klass<span style="color:#f92672">-&gt;</span>GetClassLoader()));
    <span style="color:#75715e">//进一步校验
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">VerifyClass</span>(self,<span style="color:#f92672">&amp;</span>dex_file,dex_cache,......);
}   
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">MethodVerifier<span style="color:#f92672">::</span>FailureKind MethodVerifier<span style="color:#f92672">::</span>VerifyClass(Thread<span style="color:#f92672">*</span> self,
                         ......) {
    <span style="color:#66d9ef">if</span> ((class_def<span style="color:#f92672">-&gt;</span>access_flags_ <span style="color:#f92672">&amp;</span> (kAccAbstract <span style="color:#f92672">|</span> kAccFinal))
                     <span style="color:#f92672">==</span> (kAccAbstract <span style="color:#f92672">|</span> kAccFinal)) {
        <span style="color:#66d9ef">return</span> kHardFailure; <span style="color:#75715e">//类不能同时是final又是abstract
</span><span style="color:#75715e"></span>    }

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">uint8_t</span><span style="color:#f92672">*</span> class_data <span style="color:#f92672">=</span> dex_file<span style="color:#f92672">-&gt;</span>GetClassData(<span style="color:#f92672">*</span>class_def);
    <span style="color:#66d9ef">if</span> (class_data <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) { <span style="color:#66d9ef">return</span> kNoFailure; }
    <span style="color:#75715e">//创建ClassDataItemIterator迭代器对象，通过它可以获取目标类的class_data_item里的内容
</span><span style="color:#75715e"></span>    ClassDataItemIterator <span style="color:#a6e22e">it</span>(<span style="color:#f92672">*</span>dex_file, class_data);
    <span style="color:#75715e">//不校验类的成员变量
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> (it.HasNextStaticField() <span style="color:#f92672">||</span> it.HasNextInstanceField()) {
        it.Next();
    }
    ClassLinker<span style="color:#f92672">*</span> linker <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>GetClassLinker();
    <span style="color:#75715e">//对本类所定义的Java方法进行校验。VerifyMethods在上一节已经介绍过了
</span><span style="color:#75715e"></span>    MethodVerifier<span style="color:#f92672">::</span>FailureData data1 <span style="color:#f92672">=</span> VerifyMethods<span style="color:#f92672">&lt;</span>true<span style="color:#f92672">&gt;</span>(self,
                linker, dex_file, ......);<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//校验本类中的virtual_methods数组
</span><span style="color:#75715e"></span>    MethodVerifier<span style="color:#f92672">::</span>FailureData data2 <span style="color:#f92672">=</span> VerifyMethods<span style="color:#f92672">&lt;</span>false<span style="color:#f92672">&gt;</span>(self,
                linker, dex_file,......);
    <span style="color:#75715e">//将校验结果合并到data1的结果中
</span><span style="color:#75715e"></span>    data1.Merge(data2);
    <span style="color:#75715e">//校验结果通过合并后的data1的成员来判断
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (data1.kind <span style="color:#f92672">==</span> kNoFailure) { <span style="color:#66d9ef">return</span> kNoFailure; }
    <span style="color:#66d9ef">else</span> { <span style="color:#66d9ef">return</span> data1.kind;
    }
}
</code></pre></div><h3 id="methodverifierverifymethods">MethodVerifier::VerifyMethods</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">bool</span> kDirect<span style="color:#f92672">&gt;</span>
MethodVerifier<span style="color:#f92672">::</span>FailureData MethodVerifier<span style="color:#f92672">::</span>VerifyMethods(Thread<span style="color:#f92672">*</span> self,
        ClassLinker<span style="color:#f92672">*</span> linker,<span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">*</span> dex_file,
        <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">*</span> class_def,ClassDataItemIterator<span style="color:#f92672">*</span> it,...) {
    <span style="color:#75715e">/* 注意这个函数的参数和返回值：
</span><span style="color:#75715e">       （1）该函数为模板函数。结合图8-7，如果模板参数kDirect为true，则校验的将是目标类中
</span><span style="color:#75715e">        direct_methods的内容，否则为virtual_methods的内容。
</span><span style="color:#75715e">       （2）class_def的类型为DexFile::ClassDef。它是Dex文件里的一部分，class_def中最重
</span><span style="color:#75715e">       要的信息存储在class_data_item中，而class_data_item的内容可借助迭代器it来获取。
</span><span style="color:#75715e">       （3）self代表当前调用的线程对象。dex_file是目标类所在的Dex文件。
</span><span style="color:#75715e">       （4）返回值的类型为FailureData。它是MethodVeifier定义的内部类，其内部有一个名为kind
</span><span style="color:#75715e">        的成员变量，类型为枚举FailureKind，取值有如下三种情况：
</span><span style="color:#75715e">        a) kNoFailure，表示校验无错。
</span><span style="color:#75715e">        b) kSoftFailure，表示校验软错误，该错误发生在从dex字节码转换为机器码时所做的校验过程
</span><span style="color:#75715e">           中。编译过程由dex2oat进程完成。dex2oat是一个简单的，仅用于编译的虚拟机进程，它包
</span><span style="color:#75715e">           含了前文提到的诸如heap、runtime等重要模块，但编译过程不会将所有相关类都加载到虚拟
</span><span style="color:#75715e">           机里，所以可能会出现编译过程中校验失败的情况。kSoftFailure失败并没有关系，这个类
</span><span style="color:#75715e">           在后续真正使用之时，虚拟机还会再次进行校验。
</span><span style="color:#75715e">        c) kHardFailure，表示校验错误，该错误表明校验失败。
</span><span style="color:#75715e">    */</span>
    MethodVerifier<span style="color:#f92672">::</span>FailureData failure_data;
    <span style="color:#66d9ef">int64_t</span> previous_method_idx <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    <span style="color:#75715e">/*同上，如果kDirect为true，则遍历class_data_item信息里的direct_methods数组，
</span><span style="color:#75715e">      否则遍历其中的virtual_methods数组（代表虚成员函数）。*/</span>
    <span style="color:#66d9ef">while</span> (HasNextMethod<span style="color:#f92672">&lt;</span>kDirect<span style="color:#f92672">&gt;</span>(it)) {
        self<span style="color:#f92672">-&gt;</span>AllowThreadSuspension();
        <span style="color:#66d9ef">uint32_t</span> method_idx <span style="color:#f92672">=</span> it<span style="color:#f92672">-&gt;</span>GetMemberIndex();
        ......
        previous_method_idx <span style="color:#f92672">=</span> method_idx;
        <span style="color:#75715e">/*InvokeType是枚举变量，和dex指令码里函数调用的方式有关：取值包括：
</span><span style="color:#75715e">        （1）kStatic：对应invoke-static相关指令，调用类的静态方法。
</span><span style="color:#75715e">        （2）kDirect：对应invoke-direct相关指令，指调用那些非静态方法。包括两类，一类是
</span><span style="color:#75715e">         private修饰的成员函数，另外一类则是指类的构造函数。符合kStatic和kDirect调用类型
</span><span style="color:#75715e">         函数属于上文所述的direct methods（位于类的direct_methods数组中）。
</span><span style="color:#75715e">        （3）kVirtual：对应invoke-virtual相关指令，指调用非private、static或final修饰
</span><span style="color:#75715e">         的成员函数（注意，不包括调用构造函数）。
</span><span style="color:#75715e">        （4）kSuper：对应invoke-super相关指令，指在子类的函数中通过super来调用直接父类的
</span><span style="color:#75715e">         函数。注意，dex官方文档只是说invoke-super用于调用直接父类的virtual函数。但笔者测试
</span><span style="color:#75715e">         发现，必须写成&#34;super.父类函数&#34;的形式才能生成invoke-super指令。
</span><span style="color:#75715e">        （5）kInterface：对应invoke-interface相关指令，指调用接口中定义的函数。
</span><span style="color:#75715e">         以上枚举变量的解释可参考第3章最后所列举的谷歌官方文档。
</span><span style="color:#75715e">         下面代码中的GetMethodInvokeType是迭代器ClassDataItemIterator的成员函数，它将
</span><span style="color:#75715e">         返回当前所遍历的成员函数的调用方式（InvokeType）。注意，该函数返回kSuper的逻辑和官
</span><span style="color:#75715e">         方文档对kSuper的描述并不一致。按照该函数的逻辑，它永远也不可能返回kSuper。笔者在模拟
</span><span style="color:#75715e">         器上验证过这个问题，此处从未有返回过kSuper的情况。感兴趣的读者不妨做一番调研 */</span>
         InvokeType type <span style="color:#f92672">=</span> it<span style="color:#f92672">-&gt;</span>GetMethodInvokeType(<span style="color:#f92672">*</span>class_def);
         <span style="color:#75715e">//调用ClassLinker的ResolveMethod进行解析，下文将介绍此函数。
</span><span style="color:#75715e"></span>         ArtMethod<span style="color:#f92672">*</span> method <span style="color:#f92672">=</span>
                linker<span style="color:#f92672">-&gt;</span>ResolveMethod<span style="color:#f92672">&lt;</span>ClassLinker<span style="color:#f92672">::</span>kNoICCECheckForCache<span style="color:#f92672">&gt;</span>(
                      <span style="color:#f92672">*</span>dex_file, method_idx, dex_cache,
                      class_loader, <span style="color:#66d9ef">nullptr</span>, type);
     ......
    <span style="color:#75715e">//调用另外一个VerifyMethod函数，其代码见下文
</span><span style="color:#75715e"></span>    MethodVerifier<span style="color:#f92672">::</span>FailureData result <span style="color:#f92672">=</span> VerifyMethod(self,method_idx,...);
    ......
    <span style="color:#66d9ef">return</span> failure_data;
}
</code></pre></div><h3 id="methodverifierverifymethod">MethodVerifier::VerifyMethod</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">MethodVerifier<span style="color:#f92672">::</span>FailureData MethodVerifier<span style="color:#f92672">::</span>VerifyMethod(Thread<span style="color:#f92672">*</span> self,
        ......) {
    MethodVerifier<span style="color:#f92672">::</span>FailureData result;
    <span style="color:#75715e">/*创建一个MethodVerifier对象，然后调用它的Verify方法。其内部将校验method（类型为Art-
</span><span style="color:#75715e">      Method*）所代表的Java方法。该方法对应的字节码在code_item（对应dex文件格式里的code_
</span><span style="color:#75715e">      item）中。  */</span>
    MethodVerifier <span style="color:#a6e22e">verifier</span>(self,dex_file, dex_cache, class_loader,
                            ......);
    <span style="color:#75715e">//Verify返回成功，表示校验通过。即使出现kSoftFailure的情况，该函数也会返回true
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (verifier.Verify()) {<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>        ......
        <span style="color:#75715e">//failures_的类型为vector&lt;VerifyError&gt;。VerifyError为枚举变量，定义了校验中可能
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//出现的错误情况
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (verifier.failures_.size() <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) { result.kind <span style="color:#f92672">=</span> kSoftFailure; }
        <span style="color:#66d9ef">if</span> (method <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {.....}
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e">/*Verify返回失败，但若错误原因是一些试验性指令导致的，则也属于软错误，Dex指令码中有
</span><span style="color:#75715e">          一些属于试验性质的指令，比如invokelambda。搜索dex_instruction.h文件里带kExperi-
</span><span style="color:#75715e">          mental标记的指令码，即是ART虚拟机所支持的试验性指令  */</span>
        <span style="color:#66d9ef">if</span> (UNLIKELY(verifier.have_pending_experimental_failure_)) {
            result.kind <span style="color:#f92672">=</span> kSoftFailure;
        } <span style="color:#66d9ef">else</span> { result.kind <span style="color:#f92672">=</span> kHardFailure;}
    }
    ......
    <span style="color:#66d9ef">return</span> result;
}
</code></pre></div><h3 id="methodverifierverify">MethodVerifier::Verify</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> MethodVerifier<span style="color:#f92672">::</span>Verify() {
    <span style="color:#75715e">//从dex文件里取出该方法对应的method_id_item信息
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>MethodId<span style="color:#f92672">&amp;</span> method_id <span style="color:#f92672">=</span>
                          dex_file_<span style="color:#f92672">-&gt;</span>GetMethodId(dex_method_idx_);
    <span style="color:#75715e">//取出该函数的函数名
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> method_name <span style="color:#f92672">=</span> dex_file_<span style="color:#f92672">-&gt;</span>StringDataByIdx(method_id.name_idx_);
    <span style="color:#75715e">/*根据函数名判断其是类实例的构造函数还是类的静态构造函数。代码中，&#34;&lt;init&gt;&#34;叫类实例构造函数
</span><span style="color:#75715e">      （instance constructor），而&#34;&lt;clinit&gt;&#34;叫类的静态构造函数（static constructor）。 */</span>
    <span style="color:#66d9ef">bool</span> instance_constructor_by_name <span style="color:#f92672">=</span> strcmp(<span style="color:#e6db74">&#34;&lt;init&gt;&#34;</span>, method_name) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">bool</span> static_constructor_by_name <span style="color:#f92672">=</span> strcmp(<span style="color:#e6db74">&#34;&lt;clinit&gt;&#34;</span>, method_name) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#75715e">//上述条件有一个为true，则该函数被认为是构造函数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">bool</span> constructor_by_name <span style="color:#f92672">=</span> instance_constructor_by_name <span style="color:#f92672">||</span>
                                    static_constructor_by_name;
    <span style="color:#75715e">/*如果该函数的访问标记（access flags，可参考第3章表3-1自己为构造函数，而函数名又不符合要
</span><span style="color:#75715e">      求，则设置校验的结果为VERIFY_ERROR_BAD_CLASS_HARD（VerifyError枚举值中的一种）。Fail
</span><span style="color:#75715e">      函数内部会处理VerifyError里定义的不同错误类型。其中以HARD结尾的枚举变量表示为硬错误  */</span>
    <span style="color:#66d9ef">if</span> ((method_access_flags_ <span style="color:#f92672">&amp;</span> kAccConstructor) <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>constructor_by_name) {
            Fail(VERIFY_ERROR_BAD_CLASS_HARD)
                <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;method is marked as constructor, but not named accordingly&#34;</span>;
            <span style="color:#66d9ef">return</span> false;
        }
        is_constructor_ <span style="color:#f92672">=</span> true;
    } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> (constructor_by_name) { is_constructor_ <span style="color:#f92672">=</span> true; }
    <span style="color:#75715e">//code_item_代表该函数的内容，如果为nullptr，则表示这个函数为抽象函数或native函数
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (code_item_ <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
        <span style="color:#75715e">//既不是抽象函数，也不是native函数，但又没有函数内容，校验肯定会失败
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> ((method_access_flags_ <span style="color:#f92672">&amp;</span> (kAccNative <span style="color:#f92672">|</span> kAccAbstract)) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
            Fail(VERIFY_ERROR_BAD_CLASS_HARD) <span style="color:#f92672">&lt;&lt;</span> ......; <span style="color:#75715e">//错误原因;
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> false;
        }
        <span style="color:#66d9ef">return</span> true;
    }
    <span style="color:#75715e">/*参考3.2.4节可知，ins_size_表示输入参数所占虚拟寄存器的个数，而registers_size_表示该
</span><span style="color:#75715e">      函数所需虚拟寄存器的总个数。显然，下面这个if条件为true的话，这个函数肯定会校验失败  */</span>
    <span style="color:#66d9ef">if</span> (code_item_<span style="color:#f92672">-&gt;</span>ins_size_ <span style="color:#f92672">&gt;</span> code_item_<span style="color:#f92672">-&gt;</span>registers_size_) {
        Fail(VERIFY_ERROR_BAD_CLASS_HARD) <span style="color:#f92672">&lt;&lt;</span> ......;
    Fail(VERIFY_ERROR_BAD_CLASS_HARD) <span style="color:#f92672">&lt;&lt;</span> ......;
        <span style="color:#66d9ef">return</span> false;
    }
    <span style="color:#75715e">//insn_flags_将保存该方法里的指令码内容
</span><span style="color:#75715e"></span>    insn_flags_.reset(arena_.AllocArray<span style="color:#f92672">&lt;</span>InstructionFlags<span style="color:#f92672">&gt;</span>(
                                   code_item_<span style="color:#f92672">-&gt;</span>insns_size_in_code_units_));
    std<span style="color:#f92672">::</span>uninitialized_fill_n(insn_flags_.get(),
                            code_item_<span style="color:#f92672">-&gt;</span>insns_size_in_code_units_,
                            InstructionFlags());
    <span style="color:#75715e">//下面四个函数将对指令码的内容进行校验。读者不拟介绍它们，感兴趣的读者不妨自行研究。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">bool</span> result <span style="color:#f92672">=</span> ComputeWidthsAndCountOps();
    result <span style="color:#f92672">=</span> result <span style="color:#f92672">&amp;&amp;</span> ScanTryCatchBlocks();
    result <span style="color:#f92672">=</span> result <span style="color:#f92672">&amp;&amp;</span> VerifyInstructions();
    result <span style="color:#f92672">=</span> result <span style="color:#f92672">&amp;&amp;</span> VerifyCodeFlow();
    <span style="color:#66d9ef">return</span> result;
}
</code></pre></div><h2 id="initialize">Initialize</h2>
<p>执行clinit方法</p>
<h3 id="ensureinitialized">EnsureInitialized</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>EnsureInitialized(Thread<span style="color:#f92672">*</span> self,
                                    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> c,
                                    <span style="color:#66d9ef">bool</span> can_init_fields,
                                    <span style="color:#66d9ef">bool</span> can_init_parents) {
    
  <span style="color:#66d9ef">if</span> (c<span style="color:#f92672">-&gt;</span>IsInitialized()) {
    EnsureSkipAccessChecksMethods(c, image_pointer_size_);
    <span style="color:#66d9ef">return</span> true;
  }
  <span style="color:#75715e">// SubtypeCheckInfo::Initialized must happen-before any new-instance for that type.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">bool</span> success <span style="color:#f92672">=</span> InitializeClass(self, c, can_init_fields, can_init_parents);
  <span style="color:#66d9ef">return</span> success;
</code></pre></div><h3 id="initializeclass">InitializeClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>InitializeClass(Thread<span style="color:#f92672">*</span> self, Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> klass,
          <span style="color:#66d9ef">bool</span> can_init_statics, <span style="color:#66d9ef">bool</span> can_init_parents) {
    ...... <span style="color:#75715e">//多个线程也可能同时触发目标类的初始化工作，如果这个类已经初始化了，则直接返回
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">//判断是否能初始化目标类。因为该函数可以在dex2oat编译进程中调用，在编译进程中，某些情况下
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//无须初始化类。这部分内容我们不关注，读者以后碰到相关代码时可回顾此处的处理。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>CanWeInitializeClass(klass.Get(), can_init_statics,
                 can_init_parents)) { <span style="color:#66d9ef">return</span> false; }
    { <span style="color:#75715e">//
</span><span style="color:#75715e"></span>        .....
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsVerified()) {      <span style="color:#75715e">//如果类还没有校验，则校验它
</span><span style="color:#75715e"></span>            VerifyClass(self, klass);
            ......
           }
        ......
        <span style="color:#75715e">/*下面这个函数将对klass做一些检查，大体功能包括：
</span><span style="color:#75715e">          （1）如果klass是接口类，则直接返回，不做任何检查。
</span><span style="color:#75715e">          （2）如果klass和它的基类superclass是由两个不同的ClassLoader加载的，则需要对比检
</span><span style="color:#75715e">              查klass VTable和superclass VTable中对应项的两个ArtMethod是否有相同的签名
</span><span style="color:#75715e">              信息，即两个成员方法的返回值类型、输入参数的个数以及类型是否一致。
</span><span style="color:#75715e">          （3）如果klass有Iftable，则还需要检查klass IfTable中所实现的接口类的函数与对应
</span><span style="color:#75715e">              接口类里定义的接口函数是否有一样的签名信息。是否开展检查的前提条件也是klass和接
</span><span style="color:#75715e">              口类由不同的ClassLoader加载。如果检查失败，则会创建java.lang.LinkageError 错误信息。  */</span>
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>ValidateSuperClassDescriptors(klass)) {.....}
        ......
        <span style="color:#75715e">//设置执行类初始化操作的线程ID以及类状态为kStatusInitializing
</span><span style="color:#75715e"></span>        klass<span style="color:#f92672">-&gt;</span>SetClinitThreadId(self<span style="color:#f92672">-&gt;</span>GetTid());
        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass,
                mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusInitializing, self);
    }
    <span style="color:#75715e">//根据JLS规范，klass如果是接口类的话，则不需要初始化接口类的基类（其实就是Object）
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsInterface() <span style="color:#f92672">&amp;&amp;</span> klass<span style="color:#f92672">-&gt;</span>HasSuperClass()) {
        mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> super_class <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetSuperClass();
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>super_class<span style="color:#f92672">-&gt;</span>IsInitialized()) {
            ......
            Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> handle_scope_super(hs.NewHandle(super_class));
            <span style="color:#66d9ef">bool</span> super_initialized <span style="color:#f92672">=</span> InitializeClass(self, handle_scope_super,
                   can_init_statics, true);
        ......      <span style="color:#75715e">//基类初始化失败的处理
</span><span style="color:#75715e"></span>        }
    }
    <span style="color:#75715e">//初始化klass所实现的那些接口类
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsInterface()) {
        size_t num_direct_interfaces <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>NumDirectInterfaces();
        <span style="color:#66d9ef">if</span> (UNLIKELY(num_direct_interfaces <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>)) {
            MutableHandle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> handle_scope_iface(....);
            <span style="color:#66d9ef">for</span> (size_t i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> num_direct_interfaces; i<span style="color:#f92672">++</span>) {
                <span style="color:#75715e">//handle_scope_iface代表一个接口类对象
</span><span style="color:#75715e"></span>                handle_scope_iface.Assign(mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>GetDirectInterface(
                              self, klass, i));
                <span style="color:#75715e">//检查接口类对象是否设置了kAccRecursivelyInitialized标记位。这个标记位表示
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//这个接口类已初始化过了。该标志位是ART虚拟机内部处理类初始化时的一种优化手段
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> (handle_scope_iface<span style="color:#f92672">-&gt;</span>HasBeenRecursivelyInitialized()) {<span style="color:#66d9ef">continue</span>; }
                <span style="color:#75715e">//初始化接口类，并递归初始化接口类的父接口类
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">bool</span> iface_initialized <span style="color:#f92672">=</span> InitializeDefaultInterfaceRecursive(self,
                                  handle_scope_iface,......);
                <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>iface_initialized) {  <span style="color:#66d9ef">return</span> false;  }
            }
        }
    }
    <span style="color:#75715e">/*到此，klass的父类及接口类都已经初始化了。接下来要初始化klass中的静态成员变量。读者可回
</span><span style="color:#75715e">      顾图8-7 class_def结构体，其最后一个成员变量为static_values_off，它代表该类静态成员
</span><span style="color:#75715e">      变量初始值存储的位置。找到这个位置，即可取出对应静态成员变量的初值。 */</span>
    <span style="color:#66d9ef">const</span> size_t num_static_fields <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>NumStaticFields();
    <span style="color:#66d9ef">if</span> (num_static_fields <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#75715e">//找到klass对应的ClassDef信息以及对应的DexFile对象
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">::</span>ClassDef<span style="color:#f92672">*</span> dex_class_def <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetClassDef();
        <span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&amp;</span> dex_file <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>GetDexFile();
        StackHandleScope<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;</span> hs(self);
        Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader(hs.NewHandle(
                     klass<span style="color:#f92672">-&gt;</span>GetClassLoader()));
        <span style="color:#75715e">//找到对应的DexCache对象
</span><span style="color:#75715e"></span>        Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>DexCache<span style="color:#f92672">&gt;</span> dex_cache(hs.NewHandle(klass<span style="color:#f92672">-&gt;</span>GetDexCache()));
        .....
        <span style="color:#75715e">//遍历ClassDef中代表static_values_off的区域
</span><span style="color:#75715e"></span>        EncodedStaticFieldValueIterator value_it(dex_file, <span style="color:#f92672">&amp;</span>dex_cache,
                              <span style="color:#f92672">&amp;</span>class_loader, <span style="color:#66d9ef">this</span>, <span style="color:#f92672">*</span>dex_class_def);
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">uint8_t</span><span style="color:#f92672">*</span> class_data <span style="color:#f92672">=</span> dex_file.GetClassData(<span style="color:#f92672">*</span>dex_class_def);
        ClassDataItemIterator <span style="color:#a6e22e">field_it</span>(dex_file, class_data);
        <span style="color:#66d9ef">if</span> (value_it.HasNext()) {
            <span style="color:#66d9ef">for</span> ( ; value_it.HasNext(); value_it.Next(), field_it.Next()) {
                <span style="color:#75715e">//找到对应的ArtField成员。下文会介绍ResolveField函数
</span><span style="color:#75715e"></span>                ArtField<span style="color:#f92672">*</span> field <span style="color:#f92672">=</span> ResolveField(dex_file, field_it.GetMemberIndex(),
                            dex_cache, class_loader, true);
                <span style="color:#75715e">//设置该ArtField的初值，内部将调用Class的SetFieldXXX相关函数，它会在Class
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//对象中存储对应静态成员变量内容的位置（其值为ArtField的offset_）上设置初值。
</span><span style="color:#75715e"></span>                value_it.ReadValueToField<span style="color:#f92672">&lt;</span>...<span style="color:#f92672">&gt;</span>(field);
            }
        }
    }
    <span style="color:#75715e">//找到类的&#34;&lt;clinit&gt;&#34;函数，并执行它
</span><span style="color:#75715e"></span>    ArtMethod<span style="color:#f92672">*</span> clinit <span style="color:#f92672">=</span> klass<span style="color:#f92672">-&gt;</span>FindClassInitializer(image_pointer_size_);
    <span style="color:#66d9ef">if</span> (clinit <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
        JValue result;
        clinit<span style="color:#f92672">-&gt;</span>Invoke(self, <span style="color:#66d9ef">nullptr</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&amp;</span>result, <span style="color:#e6db74">&#34;V&#34;</span>);
    }
    <span style="color:#66d9ef">bool</span> success <span style="color:#f92672">=</span> true;
    {
        <span style="color:#66d9ef">if</span> (.....) {......}
        <span style="color:#66d9ef">else</span> {      <span style="color:#75715e">//初始化正常
</span><span style="color:#75715e"></span>            .....
            <span style="color:#75715e">//设置类状态为kStatusInitialized
</span><span style="color:#75715e"></span>            mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>SetStatus(klass, mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>kStatusInitialized,self);
                <span style="color:#75715e">//下面这个函数设置klass静态成员方法ArtMethod的trampoline入口地址。它和
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//Java方法的执行有关，这部分内容我们留待后文再来介绍。
</span><span style="color:#75715e"></span>               <span style="color:#75715e">//更新机器码入口地址entry_point_from_quick_compiled_code_
</span><span style="color:#75715e"></span>                FixupStaticTrampolines(klass.Get());
            }
    }
    <span style="color:#66d9ef">return</span> success;
}
</code></pre></div><h2 id="类加载样例">类加载样例</h2>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209214807171.png" alt="image-20210209214807171"></p>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209214944640.png" alt="image-20210209214944640"></p>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209215044176.png" alt="image-20210209215044176"></p>
<p>图8-10　AbsClass0的情况</p>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209215103529.png" alt="image-20210209215103529"></p>
<p>图8-11　ConcreteClass的情况</p>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209215121070.png" alt="image-20210209215121070"></p>
<p>图8-12　ConcreteChildClass的情况</p>
<h3 id="方法表总结">方法表总结</h3>
<p>·methods_：仅保存在本类中定义的direct、virtual以及拷贝过来的方法。</p>
<p>·vtable_或embedded_vtable_：如果一个类是可实例化的，则只存在embedded_vtable_变量，否则只存在vtable_。这两个变量保存的信息是一样的，即这个类所有的virtual方法。这个表内容可能会非常多，因为它包含了来自整个继承和实现关系上的所有类的virtual方法。</p>
<p>·embedded_imtable_：如果一个类是可实例化的，则存在这个变量。它存储了接口类方法。embedded_imtable_本身起到快查表的作用，方便快速找到接口方法。</p>
<p>·iftable_：存储了该类在接口实现（可能是父类的接口实现关系）实现关系上的信息，包括继承了哪些接口类，实际的接口方法。</p>
<h2 id="类加载之后class和instance的内存占用">类加载之后Class和Instance的内存占用</h2>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209215434991.png" alt="image-20210209215434991"></p>
<p><img src="/img/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82.assets/image-20210209215525947.png" alt="image-20210209215525947"></p>
<p>图8-14　reference_instance_offsets_说明</p>
<h2 id="以下为参考代码">以下为参考代码</h2>
<h2 id="classlinker">ClassLinker</h2>
<h3 id="ensureresolved">EnsureResolved</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc">mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> ClassLinker<span style="color:#f92672">::</span>EnsureResolved(Thread<span style="color:#f92672">*</span> self, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> descriptor,
                                           mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">*</span> klass) {
 <span style="color:#75715e">// For temporary classes we must wait for them to be retired.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (init_done_ <span style="color:#f92672">&amp;&amp;</span> klass<span style="color:#f92672">-&gt;</span>IsTemp()) {
    CHECK(<span style="color:#f92672">!</span>klass<span style="color:#f92672">-&gt;</span>IsResolved());
    <span style="color:#66d9ef">if</span> (klass<span style="color:#f92672">-&gt;</span>IsErroneous()) {
      ThrowEarlierClassFailure(klass);
      <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nullptr</span>;
    }
</code></pre></div><h3 id="shoulduseinterpreterentrypoint">ShouldUseInterpreterEntrypoint</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">bool</span> ClassLinker<span style="color:#f92672">::</span>ShouldUseInterpreterEntrypoint(ArtMethod<span style="color:#f92672">*</span> method, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> quick_code) {
  <span style="color:#66d9ef">if</span> (UNLIKELY(method<span style="color:#f92672">-&gt;</span>IsNative() <span style="color:#f92672">||</span> method<span style="color:#f92672">-&gt;</span>IsProxyMethod())) {
    <span style="color:#66d9ef">return</span> false;
  }

  <span style="color:#66d9ef">if</span> (quick_code <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
    <span style="color:#66d9ef">return</span> true;
  }
    ......
}
</code></pre></div><h3 id="getquicktointerpreterbridge">GetQuickToInterpreterBridge</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h"><span style="color:#75715e">// Return the address of quick stub code for bridging from quick code to the interpreter.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">extern</span> <span style="color:#e6db74">&#34;C&#34;</span> <span style="color:#66d9ef">void</span> art_quick_to_interpreter_bridge(ArtMethod<span style="color:#f92672">*</span>);
<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">GetQuickToInterpreterBridge</span>() {
    <span style="color:#66d9ef">return</span> reinterpret_cast<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*&gt;</span>(art_quick_to_interpreter_bridge);
}
</code></pre></div><h3 id="throwearlierclassfailure">ThrowEarlierClassFailure</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> ClassLinker<span style="color:#f92672">::</span>ThrowEarlierClassFailure(ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> c, <span style="color:#66d9ef">bool</span> wrap_in_no_class_def) {
 <span style="color:#75715e">// The class failed to initialize on a previous attempt, so we want to throw
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// a NoClassDefFoundError (v2 2.17.5).  The exception to this rule is if we
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// failed in verification, in which case v2 5.4.1 says we need to re-throw
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// the previous error.
</span><span style="color:#75715e"></span>  Runtime<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> runtime <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current();
  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>runtime<span style="color:#f92672">-&gt;</span>IsAotCompiler()) {  <span style="color:#75715e">// Give info if this occurs at runtime.
</span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>string extra;
    <span style="color:#66d9ef">if</span> (GetVerifyError(c) <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>) {
      ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Object<span style="color:#f92672">&gt;</span> verify_error <span style="color:#f92672">=</span> GetVerifyError(c);
      <span style="color:#66d9ef">if</span> (verify_error<span style="color:#f92672">-&gt;</span>IsClass()) {
        extra <span style="color:#f92672">=</span> mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">::</span>PrettyDescriptor(verify_error<span style="color:#f92672">-&gt;</span>AsClass());
      } <span style="color:#66d9ef">else</span> {
        extra <span style="color:#f92672">=</span> verify_error<span style="color:#f92672">-&gt;</span>AsThrowable()<span style="color:#f92672">-&gt;</span>Dump();
      }
    }
    LOG(INFO) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Rejecting re-init on previously-failed class &#34;</span> <span style="color:#f92672">&lt;&lt;</span> c<span style="color:#f92672">-&gt;</span>PrettyClass()
              <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;: &#34;</span> <span style="color:#f92672">&lt;&lt;</span> extra;<span style="color:#75715e">//the stack log of NoClassDefFoundError came from here
</span><span style="color:#75715e"></span>  }
</code></pre></div><h3 id="getverifyerror">GetVerifyError</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">static</span> mirror<span style="color:#f92672">::</span>Object<span style="color:#f92672">*</span> GetVerifyError(ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> c)
    REQUIRES_SHARED(Locks<span style="color:#f92672">::</span>mutator_lock_) {
  ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassExt<span style="color:#f92672">&gt;</span> ext(c<span style="color:#f92672">-&gt;</span>GetExtData());
  <span style="color:#66d9ef">if</span> (ext <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">nullptr</span>;
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#66d9ef">return</span> ext<span style="color:#f92672">-&gt;</span>GetVerifyError();
  }
}
</code></pre></div><p>art/runtime/mirror/class-inl.h</p>
<h2 id="classgetextdata">Class::GetExtData</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h">HeapReference<span style="color:#f92672">&lt;</span>ClassExt<span style="color:#f92672">&gt;</span> ext_data_;
template<span style="color:#f92672">&lt;</span>VerifyObjectFlags kVerifyFlags, ReadBarrierOption kReadBarrierOption<span style="color:#f92672">&gt;</span>
<span style="color:#66d9ef">inline</span> ClassExt<span style="color:#f92672">*</span> Class<span style="color:#f92672">::</span>GetExtData() {
  <span style="color:#66d9ef">return</span> GetFieldObject<span style="color:#f92672">&lt;</span>ClassExt, kVerifyFlags, kReadBarrierOption<span style="color:#f92672">&gt;</span>(
      OFFSET_OF_OBJECT_MEMBER(Class, ext_data_));
}
</code></pre></div><p>art/runtime/mirror/class_ext.h</p>
<h2 id="class_exthgetverifyerror">class_ext.h.GetVerifyError</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h"><span style="color:#75715e">// C++ mirror of dalvik.system.ClassExt
</span><span style="color:#75715e"></span>class MANAGED ClassExt : public Object {
  <span style="color:#75715e">// The saved verification error of this class.
</span><span style="color:#75715e"></span>  HeapReference<span style="color:#f92672">&lt;</span>Object<span style="color:#f92672">&gt;</span> verify_error_;
  
   Object<span style="color:#f92672">*</span> <span style="color:#a6e22e">GetVerifyError</span>() REQUIRES_SHARED(Locks<span style="color:#f92672">::</span>mutator_lock_) {
    <span style="color:#66d9ef">return</span> GetFieldObject<span style="color:#f92672">&lt;</span>ClassExt<span style="color:#f92672">&gt;</span>(OFFSET_OF_OBJECT_MEMBER(ClassExt, verify_error_));
  }
}
</code></pre></div><p>art/runtime/oat_file-inl.h</p>
<h2 id="oat_file-inlhgetquickcode">oat_file-inl.h.GetQuickCode</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h"><span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> OatFile<span style="color:#f92672">::</span>OatMethod<span style="color:#f92672">::</span>GetQuickCode() <span style="color:#66d9ef">const</span> {
  <span style="color:#66d9ef">return</span> GetOatPointer<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*&gt;</span>(GetCodeOffset());
}

<span style="color:#66d9ef">inline</span> uint32_t OatFile<span style="color:#f92672">::</span>OatMethod<span style="color:#f92672">::</span>GetCodeOffset() <span style="color:#66d9ef">const</span> {
  <span style="color:#66d9ef">return</span> (GetQuickCodeSize() <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">?</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">:</span> code_offset_;
}
</code></pre></div><p>art/runtime/runtime.h</p>
<h2 id="runtimehisaotcompiler">runtime.h.IsAotCompiler</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h">  <span style="color:#75715e">// IsAotCompiler for compilers that don&#39;t have a running runtime. Only dex2oat currently.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">IsAotCompiler</span>() <span style="color:#66d9ef">const</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">!</span>UseJitCompilation() <span style="color:#f92672">&amp;&amp;</span> IsCompiler();
  }

  <span style="color:#75715e">// IsCompiler is any runtime which has a running compiler, either dex2oat or JIT.
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">IsCompiler</span>() <span style="color:#66d9ef">const</span> {
    <span style="color:#66d9ef">return</span> compiler_callbacks_ <span style="color:#f92672">!=</span> nullptr;
  }
</code></pre></div><p>art/runtime/thread.cc</p>
<h2 id="threadthrownewwrappedexception">Thread::ThrowNewWrappedException</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> Thread<span style="color:#f92672">::</span>ThrowNewWrappedException(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> exception_class_descriptor,
                                      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> msg) {

  DCHECK(<span style="color:#f92672">!</span>runtime<span style="color:#f92672">-&gt;</span>IsStarted() <span style="color:#f92672">||</span> exception_class<span style="color:#f92672">-&gt;</span>IsThrowableClass());
  Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Throwable<span style="color:#f92672">&gt;</span> exception(
      hs.NewHandle(ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Throwable<span style="color:#f92672">&gt;::</span>DownCast(exception_class<span style="color:#f92672">-&gt;</span>AllocObject(<span style="color:#66d9ef">this</span>))));

  ArtMethod<span style="color:#f92672">*</span> exception_init_method <span style="color:#f92672">=</span>
      exception_class<span style="color:#f92672">-&gt;</span>FindConstructor(signature, cl<span style="color:#f92672">-&gt;</span>GetImagePointerSize());

    InvokeWithJValues(soa, ref.get(), exception_init_method, jv_args);
    <span style="color:#66d9ef">if</span> (LIKELY(<span style="color:#f92672">!</span>IsExceptionPending())) {
      SetException(exception.Get());
    }
</code></pre></div><h2 id="threadsetexception">Thread::SetException</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">void</span> Thread<span style="color:#f92672">::</span>SetException(ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Throwable<span style="color:#f92672">&gt;</span> new_exception) {
  CHECK(new_exception <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nullptr</span>);
  <span style="color:#75715e">// TODO: DCHECK(!IsExceptionPending());
</span><span style="color:#75715e"></span>  tlsPtr_.exception <span style="color:#f92672">=</span> new_exception.Ptr();
}
</code></pre></div><p>libcore/dalvik/src/main/java/dalvik/system/BaseDexClassLoader.java</p>
<h2 id="basedexclassloaderfindclass">BaseDexClassLoader.findClass</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">protected</span> Class<span style="color:#f92672">&lt;?&gt;</span> findClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
        List<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;</span> suppressedExceptions <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;();</span>
        Class c <span style="color:#f92672">=</span> pathList<span style="color:#f92672">.</span><span style="color:#a6e22e">findClass</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> suppressedExceptions<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            ClassNotFoundException cnfe <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassNotFoundException<span style="color:#f92672">(</span>
                    <span style="color:#e6db74">&#34;Didn&#39;t find class \&#34;&#34;</span> <span style="color:#f92672">+</span> name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\&#34; on path: &#34;</span> <span style="color:#f92672">+</span> pathList<span style="color:#f92672">);</span>
            <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Throwable t <span style="color:#f92672">:</span> suppressedExceptions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                cnfe<span style="color:#f92672">.</span><span style="color:#a6e22e">addSuppressed</span><span style="color:#f92672">(</span>t<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">throw</span> cnfe<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> c<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
</code></pre></div>

<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/en/android/art/2%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" title="类加载"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/en/android/art/alloc_gc/" title="alloc_gc" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1623725215"></script>
    <script src="/js/perfect-scrollbar.min.js?1623725215"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1623725215"></script>
    <script src="/js/jquery.sticky.js?1623725215"></script>
    <script src="/js/featherlight.min.js?1623725215"></script>
    <script src="/js/highlight.pack.js?1623725215"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1623725215"></script>
    <script src="/js/learn.js?1623725215"></script>
    <script src="/js/hugo-learn.js?1623725215"></script>
    
        
            <script src="/mermaid/mermaid.js?1623725215"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

