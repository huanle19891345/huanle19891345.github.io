<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.80.0" />
    <meta name="description" content="Documentation for Hugo Learn Theme">
<meta name="author" content="Mathieu Cornic">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>类加载 :: 郑欢的学习总结</title>

    
    <link href="/css/nucleus.css?1613805603" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1613805603" rel="stylesheet">
    <link href="/css/hybrid.css?1613805603" rel="stylesheet">
    <link href="/css/featherlight.min.css?1613805603" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1613805603" rel="stylesheet">
    <link href="/css/auto-complete.css?1613805603" rel="stylesheet">
    <link href="/css/atom-one-dark.css?1613805603" rel="stylesheet">
    <link href="/css/theme.css?1613805603" rel="stylesheet">
    <link href="/css/hugo-theme.css?1613805603" rel="stylesheet">
    
    <link href="/css/theme-mine.css?1613805603" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1613805603"></script>

    <script src="/js/auto_toc_scroll.js?1613805603"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    

  </head>
  <body class="" data-url="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href='/en'>
    <img src="/avatar.png" width="60px" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1613805603"></script>
<script type="text/javascript" src="/js/auto-complete.js?1613805603"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/huanle19891345.github.io\/\/en";
    
</script>
<script type="text/javascript" src="/js/search.js?1613805603"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/en/android/" title="android" class="dd-item
        parent
        
        
        ">
      <a href="/en/android/">
          android
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/" title="jetpack" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/">
          jetpack
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/" title="arch" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/">
          arch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/databinding/" title="databinding" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/databinding/">
          databinding
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/databinding/databinding/" title="Databinding" class="dd-item ">
        <a href="/en/android/jetpack/arch/databinding/databinding/">
        Databinding
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/lifecycle/" title="lifecycle" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/lifecycle/">
          lifecycle
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/lifecycle/lifecycle/" title="Lifecycle" class="dd-item ">
        <a href="/en/android/jetpack/arch/lifecycle/lifecycle/">
        Lifecycle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/livedata/" title="livedata" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/livedata/">
          livedata
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/livedata/livedata/" title="LiveData" class="dd-item ">
        <a href="/en/android/jetpack/arch/livedata/livedata/">
        LiveData
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/livedata/livedata%E5%B0%81%E8%A3%85/" title="LiveData封装" class="dd-item ">
        <a href="/en/android/jetpack/arch/livedata/livedata%E5%B0%81%E8%A3%85/">
        LiveData封装
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/livedata/mediatorlivedata/" title="MediatorLiveData" class="dd-item ">
        <a href="/en/android/jetpack/arch/livedata/mediatorlivedata/">
        MediatorLiveData
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/jetpack/arch/viewmodel/" title="viewmodel" class="dd-item
        
        
        
        ">
      <a href="/en/android/jetpack/arch/viewmodel/">
          viewmodel
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/viewmodel/viewmodel/" title="ViewModel" class="dd-item ">
        <a href="/en/android/jetpack/arch/viewmodel/viewmodel/">
        ViewModel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/viewmodel/viewmodel%E5%B0%81%E8%A3%85/" title="ViewModel封装" class="dd-item ">
        <a href="/en/android/jetpack/arch/viewmodel/viewmodel%E5%B0%81%E8%A3%85/">
        ViewModel封装
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/arch/viewmodel/%E6%95%B0%E6%8D%AE%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D/" title="数据保存和恢复" class="dd-item ">
        <a href="/en/android/jetpack/arch/viewmodel/%E6%95%B0%E6%8D%AE%E4%BF%9D%E5%AD%98%E5%92%8C%E6%81%A2%E5%A4%8D/">
        数据保存和恢复
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/jetpack/supporttoandroidx/" title="supportToAndroidx" class="dd-item ">
        <a href="/en/android/jetpack/supporttoandroidx/">
        supportToAndroidx
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" title="性能优化" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">
          性能优化
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/" title="内存优化" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/">
          内存优化
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/dumphprof/" title="DumpHprof" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/dumphprof/">
        DumpHprof
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/hprof_binary_dump_format/" title="Hprof_binary_dump_format" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/hprof_binary_dump_format/">
        Hprof_binary_dump_format
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/leakcanary2source/" title="LeakCanary2Source" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/leakcanary2source/">
        LeakCanary2Source
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/oom/" title="OOM" class="dd-item ">
        <a href="/en/android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/oom/">
        OOM
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/" title="系统机制原理" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/">
          系统机制原理
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/ashmem/" title="ashmem" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/ashmem/">
          ashmem
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/ashmem/%E5%8C%BF%E5%90%8D%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98ashmem/" title="匿名共享内存Ashmem" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/ashmem/%E5%8C%BF%E5%90%8D%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98ashmem/">
        匿名共享内存Ashmem
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/bitmap/" title="bitmap" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/bitmap/">
          bitmap
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/bitmap/bitmap/" title="Bitmap" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/bitmap/bitmap/">
        Bitmap
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/bitmap/bitmapsource/" title="BitmapSource" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/bitmap/bitmapsource/">
        BitmapSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/handler/" title="handler" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/handler/">
          handler
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/handler/looper/" title="Looper" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/handler/looper/">
        Looper
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/handler/threadlocal/" title="ThreadLocal" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/handler/threadlocal/">
        ThreadLocal
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/input/" title="input" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/input/">
          input
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/input/toucheventnative/" title="touchEventNative" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/input/toucheventnative/">
        touchEventNative
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/kernel/" title="kernel" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/kernel/">
          kernel
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/kernel/kernel/" title="kernel" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/kernel/kernel/">
        kernel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/layoutinflater/" title="layoutinflater" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/layoutinflater/">
          layoutinflater
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/layoutinflater/layoutinflater/" title="LayoutInflater" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/layoutinflater/layoutinflater/">
        LayoutInflater
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/sharedpreferences/" title="sharedpreferences" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/sharedpreferences/">
          sharedpreferences
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/sharedpreferences/sharedpreferences/" title="SharedPreferences" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/sharedpreferences/sharedpreferences/">
        SharedPreferences
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/thread/" title="thread" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/thread/">
          thread
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/thread/stacktraceelement/" title="StackTraceElement" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/thread/stacktraceelement/">
        StackTraceElement
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/thread/threadstate/" title="ThreadState" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/thread/threadstate/">
        ThreadState
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/" title="zygote" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/">
          zygote
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/systemserversource/" title="SystemServerSource" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/systemserversource/">
        SystemServerSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/zygotesource/" title="ZygoteSource" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/zygotesource/">
        ZygoteSource
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/zygote%E8%BF%9B%E7%A8%8B/" title="Zygote进程" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/zygote/zygote%E8%BF%9B%E7%A8%8B/">
        Zygote进程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/" title="后台任务" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/">
          后台任务
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86/" title="后台任务处理" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1/%E5%90%8E%E5%8F%B0%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86/">
        后台任务处理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" title="多进程" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/">
          多进程
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/" title="binder" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/">
          binder
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderclient/" title="BinderClient" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderclient/">
        BinderClient
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderdeath/" title="BinderDeath" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderdeath/">
        BinderDeath
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderkernel/" title="BinderKernel" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderkernel/">
        BinderKernel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderserver/" title="BinderServer" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderserver/">
        BinderServer
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderservicemanager/" title="BinderServiceManager" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binderservicemanager/">
        BinderServiceManager
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binder%E5%8E%9F%E7%90%86/" title="Binder原理" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/binder/binder%E5%8E%9F%E7%90%86/">
        Binder原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/" title="mmkv" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/">
          mmkv
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/mmkv/" title="MMKV" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%A4%9A%E8%BF%9B%E7%A8%8B/mmkv/mmkv/">
        MMKV
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/" title="应用启动退出" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/">
          应用启动退出
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8/" title="应用启动" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8%E9%80%80%E5%87%BA/%E5%BA%94%E7%94%A8%E5%90%AF%E5%8A%A8/">
        应用启动
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/" title="源码研究方法" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/">
          源码研究方法
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/syscall%E6%9F%A5%E6%89%BE%E6%96%B9%E5%BC%8F/" title="Syscall查找方式" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E6%BA%90%E7%A0%81%E7%A0%94%E7%A9%B6%E6%96%B9%E6%B3%95/syscall%E6%9F%A5%E6%89%BE%E6%96%B9%E5%BC%8F/">
        Syscall查找方式
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/" title="系统绘制" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/">
          系统绘制
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/graphics/" title="Graphics" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/graphics/">
        Graphics
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync/" title="Vsync" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync/">
        Vsync
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync_surfaceflinger/" title="Vsync_SurfaceFlinger" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/vsync_surfaceflinger/">
        Vsync_SurfaceFlinger
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F%E7%BB%98%E5%88%B6/" title="硬件加速绘制" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F%E7%BB%98%E5%88%B6/">
        硬件加速绘制
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/" title="绘制原理" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/">
        绘制原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E8%BD%AF%E4%BB%B6%E7%BB%98%E5%88%B6/" title="软件绘制" class="dd-item ">
        <a href="/en/android/%E7%B3%BB%E7%BB%9F%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86/%E7%B3%BB%E7%BB%9F%E7%BB%98%E5%88%B6/%E8%BD%AF%E4%BB%B6%E7%BB%98%E5%88%B6/">
        软件绘制
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/" title="虚拟机" class="dd-item
        parent
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/">
          虚拟机
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/" title="alloc_gc" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/">
          alloc_gc
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/alloc/" title="Alloc" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/alloc/">
        Alloc
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/allocrelated/" title="AllocRelated" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/allocrelated/">
        AllocRelated
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc/" title="GC" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc/">
        GC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_concurrentcopying/" title="GC_ConcurrentCopying" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_concurrentcopying/">
        GC_ConcurrentCopying
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_markcompact/" title="GC_MarkCompact" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_markcompact/">
        GC_MarkCompact
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_ms_cms/" title="GC_MS_CMS" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_ms_cms/">
        GC_MS_CMS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_semi_space/" title="GC_Semi_Space" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/gc_semi_space/">
        GC_Semi_Space
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/runtime_visitroots/" title="Runtime_VisitRoots" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/runtime_visitroots/">
        Runtime_VisitRoots
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/space/" title="Space" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/alloc_gc/space/">
        Space
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/art_lock/" title="ART_Lock" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/art_lock/">
        ART_Lock
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/" title="jni" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/">
          jni
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/c%E5%90%AF%E5%8A%A8java/" title="C启动Java" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/c%E5%90%AF%E5%8A%A8java/">
        C启动Java
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/java_jni%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86/" title="java_jni方法调用原理" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/java_jni%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86/">
        java_jni方法调用原理
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/jni%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2/" title="Jni数据转换" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/jni%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2/">
        Jni数据转换
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/systemloadlibrary/" title="SystemLoadLibrary" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/systemloadlibrary/">
        SystemLoadLibrary
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/%E5%BC%82%E5%B8%B8/" title="异常" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/%E5%BC%82%E5%B8%B8/">
        异常
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C7_0/" title="解释执行7_0" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/jni/%E8%A7%A3%E9%87%8A%E6%89%A7%E8%A1%8C7_0/">
        解释执行7_0
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="启动流程" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">
          启动流程
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/art%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/" title="ART启动流程" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/art%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">
        ART启动流程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="基础数据结构" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
        基础数据结构
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/" title="混合编译_运行" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/">
          混合编译_运行
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/jvm_jit/" title="JVM_JIT" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/jvm_jit/">
        JVM_JIT
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/" title="混合编译_运行" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91_%E8%BF%90%E8%A1%8C/">
        混合编译_运行
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" title="类加载" class="dd-item
        parent
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/">
          类加载
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/android_n%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91%E4%B8%8E%E5%AF%B9%E7%83%AD%E8%A1%A5%E4%B8%81%E5%BD%B1%E5%93%8D%E8%A7%A3%E6%9E%90/" title="Android_N混合编译与对热补丁影响解析" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/android_n%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91%E4%B8%8E%E5%AF%B9%E7%83%AD%E8%A1%A5%E4%B8%81%E5%BD%B1%E5%93%8D%E8%A7%A3%E6%9E%90/">
        Android_N混合编译与对热补丁影响解析
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" title="类加载" class="dd-item active">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD/">
        类加载
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82/" title="类加载虚拟机层" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82/">
        类加载虚拟机层
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E7%BC%96%E8%AF%91/" title="类编译" class="dd-item
        
        
        
        ">
      <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E7%BC%96%E8%AF%91/">
          类编译
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat/" title="dex2oat" class="dd-item ">
        <a href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat/">
        dex2oat
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/kotlin/" title="kotlin" class="dd-item
        
        
        
        ">
      <a href="/en/kotlin/">
          kotlin
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/kotlin/%E5%8D%8F%E7%A8%8B/" title="协程" class="dd-item
        
        
        
        ">
      <a href="/en/kotlin/%E5%8D%8F%E7%A8%8B/">
          协程
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/%E5%8D%8F%E7%A8%8B/kotlin%E5%8D%8F%E7%A8%8B/" title="kotlin协程" class="dd-item ">
        <a href="/en/kotlin/%E5%8D%8F%E7%A8%8B/kotlin%E5%8D%8F%E7%A8%8B/">
        kotlin协程
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/kotlin/%E5%8D%8F%E7%A8%8B/kotlin%E5%8D%8F%E7%A8%8Bsource/" title="kotlin协程Source" class="dd-item ">
        <a href="/en/kotlin/%E5%8D%8F%E7%A8%8B/kotlin%E5%8D%8F%E7%A8%8Bsource/">
        kotlin协程Source
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/" title="跨平台" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/">
          跨平台
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/" title="flutter" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/">
          flutter
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/" title="engine" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/">
          engine
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/engine/" title="Engine" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/engine/engine/">
        Engine
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/" title="startup" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/">
          startup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/startup/" title="startup" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/startup/">
        startup
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/startup_dart_framework/" title="startup_dart_framework" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/startup_dart_framework/">
        startup_dart_framework
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/startup_embedder_framwwork/" title="startup_embedder_framwwork" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/startup/startup_embedder_framwwork/">
        startup_embedder_framwwork
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/" title="touch" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/">
          touch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/touch/" title="Touch" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/touch/touch/">
        Touch
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/" title="动画" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/">
          动画
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/%E5%8A%A8%E7%94%BB/" title="动画" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E5%8A%A8%E7%94%BB/%E5%8A%A8%E7%94%BB/">
        动画
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/" title="混合开发" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/">
          混合开发
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/flutterboost/" title="FlutterBoost" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/flutterboost/">
        FlutterBoost
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/" title="混合开发" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/">
        混合开发
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/" title="渲染" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/">
          渲染
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/widget/" title="Widget" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/widget/">
        Widget
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/%E6%B8%B2%E6%9F%93/" title="渲染" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E6%B8%B2%E6%9F%93/%E6%B8%B2%E6%9F%93/">
        渲染
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/" title="路由" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/">
          路由
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/%E8%B7%AF%E7%94%B1/" title="路由" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E8%B7%AF%E7%94%B1/%E8%B7%AF%E7%94%B1/">
        路由
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/" title="通信" class="dd-item
        
        
        
        ">
      <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/">
          通信
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/messageloop/" title="MessageLoop" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/messageloop/">
        MessageLoop
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/methodchannel/" title="MethodChannel" class="dd-item ">
        <a href="/en/%E8%B7%A8%E5%B9%B3%E5%8F%B0/flutter/%E9%80%9A%E4%BF%A1/methodchannel/">
        MethodChannel
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/huanle19891345"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://huanle19891345.github.io/en/showcase"><i class='fas fa-fw fa-camera'></i> Showcases</a>
              </li>
          
              <li>
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li>
                  <a class="padding" href="https://huanle19891345.github.io/en/credits"><i class='fas fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/en/'>技术探索总结</a> > <a href='/en/android/'>android</a> > <a href='/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/'>虚拟机</a> > <a href='/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/'>类加载</a> > 类加载
          
        
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#动态加载dex和so">动态加载dex和so</a></li>
    <li><a href="#basedexclassloader构造方法">BaseDexClassLoader构造方法</a>
      <ul>
        <li><a href="#dexpathlist构造方法">DexPathList构造方法</a></li>
        <li><a href="#dexpathlistmakepathelements">DexPathList.makePathElements</a>
          <ul>
            <li><a href="#element构造方法">Element构造方法</a></li>
          </ul>
        </li>
        <li><a href="#dexfileloaddex">DexFile.loadDex</a></li>
        <li><a href="#dexfile构造方法">DexFile构造方法</a></li>
        <li><a href="#oatfilemanageropendexfilesfromoat">OatFileManager::OpenDexFilesFromOat</a>
          <ul>
            <li><a href="#class-dexfile">class DexFile</a></li>
          </ul>
        </li>
        <li><a href="#oatfileassistantmakeuptodate">OatFileAssistant::MakeUpToDate</a></li>
        <li><a href="#oatfileassistantgenerateoatfilenochecks">OatFileAssistant::GenerateOatFileNoChecks</a></li>
        <li><a href="#oatfileassistantdex2oat">OatFileAssistant::Dex2Oat</a></li>
      </ul>
    </li>
    <li><a href="#classloaderloadclass">classLoader.loadClass</a>
      <ul>
        <li><a href="#方法调用时机">方法调用时机</a>
          <ul>
            <li><a href="#对于appcomponentfactory子类loadedapk进行调用">对于APPComponentFactory子类，LoadedApk进行调用</a></li>
            <li><a href="#对于application和四大组件由instrumentation调用appcomponentfactory进行调用">对于application和四大组件由instrumentation调用APPComponentFactory进行调用</a></li>
            <li><a href="#对于view由layoutinflator在createview方法中进行调用">对于view，由LayoutInflator在createView方法中进行调用</a></li>
            <li><a href="#对于其他自定义类由jvm进行调用">对于其他自定义类，由jvm进行调用</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#bootclassloaderfindclass">BootClassLoader.findClass</a></li>
    <li><a href="#basedexclassloaderfindclass">BaseDexClassLoader.findClass</a>
      <ul>
        <li><a href="#dexpathlistfindclass">DexPathList.findClass</a></li>
        <li><a href="#dexfiledefineclass">DexFile.defineClass</a></li>
      </ul>
    </li>
    <li><a href="#pathclassloader和dexclassloader区别">PathClassLoader和DexClassLoader区别</a></li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              类加载
            </h1>
          

        


<h2 id="动态加载dex和so">动态加载dex和so</h2>
<p><a href="https://alibaba.github.io/atlas/update/principle.html">https://alibaba.github.io/atlas/update/principle.html</a></p>
<p>PathClassLoader自身负责主Apk的类和c库的查找路口；其parent BootClassloader负责framework sdk的内容的查找。</p>
<p>PathClassLoader本身也是一个class，继承了BaseDexClassLoader（同DexClassLoader），里面查找过程在DexPathList里面实现（如下图） &gt;</p>
<p><img src="/img/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD.assets/pathclassloader.png" alt="image"></p>
<p>DexPathList最终通过DexFile去loadClass，DexPathList可以理解为持有者DexFile以及nativeLibrary目录，再查找的时候遍历这些对象，直到找到需要的类或者c库，那么动态部署的方式就是把新修改的内容添加到这些对象的最前面，从而使得查找的过程中新修改的内容能够提前找到从而替换原有的（如下图）</p>
<p><img src="/img/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD.assets/maindex_load.png" alt="image"></p>
<h2 id="basedexclassloader构造方法">BaseDexClassLoader构造方法</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> DexPathList pathList<span style="color:#f92672">;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Constructs an instance.
</span><span style="color:#75715e"> \* Note that all the *.jar and *.apk files from {@code dexPath} might be
</span><span style="color:#75715e"> \* first extracted in-memory before the code is loaded. This can be avoided
</span><span style="color:#75715e"> \* by passing raw dex files (*.dex) in the {@code dexPath}.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> \* @param dexPath the list of jar/apk files containing classes and
</span><span style="color:#75715e"> \* resources, delimited by {@code File.pathSeparator}, which
</span><span style="color:#75715e"> \* defaults to {@code &#34;:&#34;} on Android.
</span><span style="color:#75715e"> \* @param optimizedDirectory this parameter is deprecated and has no effect
</span><span style="color:#75715e"> \* @param librarySearchPath the list of directories containing native
</span><span style="color:#75715e"> \* libraries, delimited by {@code File.pathSeparator}; may be
</span><span style="color:#75715e"> \* {@code null}
</span><span style="color:#75715e"> \* @param parent the parent class loader
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BaseDexClassLoader</span><span style="color:#f92672">(</span>String dexPath<span style="color:#f92672">,</span> File optimizedDirectory<span style="color:#f92672">,</span>
     String librarySearchPath<span style="color:#f92672">,</span> ClassLoader parent<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>parent<span style="color:#f92672">);</span>
   <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pathList</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> DexPathList<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> dexPath<span style="color:#f92672">,</span> librarySearchPath<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>

   <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>reporter <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
     reporter<span style="color:#f92672">.</span><span style="color:#a6e22e">report</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">pathList</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getDexPaths</span><span style="color:#f92672">());</span>
   <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>
</code></pre></div><h3 id="dexpathlist构造方法">DexPathList构造方法</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/** class definition context */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> ClassLoader definingContext<span style="color:#f92672">;</span>
 
 <span style="color:#75715e">/**
</span><span style="color:#75715e"> \* List of dex/resource (class path) elements.
</span><span style="color:#75715e"> \* Should be called pathElements, but the Facebook app uses reflection
</span><span style="color:#75715e"> \* to modify &#39;dexElements&#39; (http://b/7726934).
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> Element<span style="color:#f92672">[]</span> dexElements<span style="color:#f92672">;</span><span style="color:#75715e">//dexElements：描述defingContext ClassLoader所加载的dex文件
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> Element<span style="color:#f92672">[]</span> nativeLibraryPathElements<span style="color:#f92672">;</span>

<span style="color:#75715e">//ClassLoader除了加载类之外，加载native动态库的工作也可由它来完成。下面这个变量描述了definingContext ClassLoader可从哪几个目录中搜索目标动态库
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> List<span style="color:#f92672">&lt;</span>File<span style="color:#f92672">&gt;</span> nativeLibraryDirectories<span style="color:#f92672">;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Constructs an instance.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> \* @param definingContext the context in which any as-yet unresolved
</span><span style="color:#75715e"> \* classes should be defined
</span><span style="color:#75715e"> \* @param dexPath list of dex/resource path elements, separated by
</span><span style="color:#75715e"> \* {@code File.pathSeparator}
</span><span style="color:#75715e"> \* @param librarySearchPath list of native library directory path elements,
</span><span style="color:#75715e"> \* separated by {@code File.pathSeparator}
</span><span style="color:#75715e"> \* @param optimizedDirectory directory where optimized {@code .dex} files
</span><span style="color:#75715e"> \* should be found and written to, or {@code null} to use the default
</span><span style="color:#75715e"> \* system directory for same
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">DexPathList</span><span style="color:#f92672">(</span>ClassLoader definingContext<span style="color:#f92672">,</span> String dexPath<span style="color:#f92672">,</span>
     String librarySearchPath<span style="color:#f92672">,</span> File optimizedDirectory<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>

<span style="color:#75715e">// save dexPath for BaseDexClassLoader
</span><span style="color:#75715e"></span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">dexElements</span> <span style="color:#f92672">=</span> makeDexElements<span style="color:#f92672">(</span>splitDexPath<span style="color:#f92672">(</span>dexPath<span style="color:#f92672">),</span> optimizedDirectory<span style="color:#f92672">,</span>
                  suppressedExceptions<span style="color:#f92672">,</span> definingContext<span style="color:#f92672">);</span>
</code></pre></div><h3 id="dexpathlistmakepathelements">DexPathList.makePathElements</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Element<span style="color:#f92672">[]</span> <span style="color:#a6e22e">makePathElements</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>File<span style="color:#f92672">&gt;</span> files<span style="color:#f92672">,</span> File optimizedDirectory<span style="color:#f92672">,</span>
        List<span style="color:#f92672">&lt;</span>IOException<span style="color:#f92672">&gt;</span> suppressedExceptions<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> makeDexElements<span style="color:#f92672">(</span>files<span style="color:#f92672">,</span> optimizedDirectory<span style="color:#f92672">,</span> suppressedExceptions<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Makes an array of dex/resource path elements, one per element of
</span><span style="color:#75715e"> \* the given array.
</span><span style="color:#75715e"> */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Element<span style="color:#f92672">[]</span> <span style="color:#a6e22e">makeDexElements</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>File<span style="color:#f92672">&gt;</span> files<span style="color:#f92672">,</span> File optimizedDirectory<span style="color:#f92672">,</span>
     List<span style="color:#f92672">&lt;</span>IOException<span style="color:#f92672">&gt;</span> suppressedExceptions<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
Element<span style="color:#f92672">[]</span> elements <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Element<span style="color:#f92672">[</span>files<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()];</span>
<span style="color:#66d9ef">int</span> elementsPos <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
<span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>File file <span style="color:#f92672">:</span> files<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
<span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>name<span style="color:#f92672">.</span><span style="color:#a6e22e">endsWith</span><span style="color:#f92672">(</span>DEX_SUFFIX<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
   <span style="color:#75715e">// Raw dex file (not inside a zip/jar).
</span><span style="color:#75715e"></span>   <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
     DexFile dex <span style="color:#f92672">=</span> loadDexFile<span style="color:#f92672">(</span>file<span style="color:#f92672">,</span> optimizedDirectory<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> elements<span style="color:#f92672">);</span>
     <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>dex <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
       elements<span style="color:#f92672">[</span>elementsPos<span style="color:#f92672">++]</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Element<span style="color:#f92672">(</span>dex<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
     <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
<span style="color:#66d9ef">return</span> elements<span style="color:#f92672">;</span>
</code></pre></div><h4 id="element构造方法">Element构造方法</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Element of the dex/resource path. Note: should be called DexElement, but apps reflect on
</span><span style="color:#75715e"> \* this.
</span><span style="color:#75715e"> */</span>
 <span style="color:#75715e">/*package*/</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Element</span> <span style="color:#f92672">{</span>
   <span style="color:#75715e">/**
</span><span style="color:#75715e">   \* A file denoting a zip file (in case of a resource jar or a dex jar), or a directory
</span><span style="color:#75715e">   \* (only when dexFile is null).
</span><span style="color:#75715e">   */</span>
   <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> File path<span style="color:#f92672">;</span>
   <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> DexFile dexFile<span style="color:#f92672">;</span>

<span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Element encapsulates a dex file. This may be a plain dex file (in which case dexZipPath
</span><span style="color:#75715e"> \* should be null), or a jar (in which case dexZipPath should denote the zip file).
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Element</span><span style="color:#f92672">(</span>DexFile dexFile<span style="color:#f92672">,</span> File dexZipPath<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">dexFile</span> <span style="color:#f92672">=</span> dexFile<span style="color:#f92672">;</span>
   <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">path</span> <span style="color:#f92672">=</span> dexZipPath<span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Constructs a {@code DexFile} instance, as appropriate depending on whether
</span><span style="color:#75715e"> \* {@code optimizedDirectory} is {@code null}. An application image file may be associated with the {@code loader} if it is not null.
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> DexFile <span style="color:#a6e22e">loadDexFile</span><span style="color:#f92672">(</span>File file<span style="color:#f92672">,</span> File optimizedDirectory<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">,</span>
                  Element<span style="color:#f92672">[]</span> elements<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>optimizedDirectory <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
     <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> DexFile<span style="color:#f92672">(</span>file<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> elements<span style="color:#f92672">);</span>
   <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
     String optimizedPath <span style="color:#f92672">=</span> optimizedPathFor<span style="color:#f92672">(</span>file<span style="color:#f92672">,</span> optimizedDirectory<span style="color:#f92672">);</span>
     <span style="color:#66d9ef">return</span> DexFile<span style="color:#f92672">.</span><span style="color:#a6e22e">loadDex</span><span style="color:#f92672">(</span>file<span style="color:#f92672">.</span><span style="color:#a6e22e">getPath</span><span style="color:#f92672">(),</span> optimizedPath<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> elements<span style="color:#f92672">);</span>
   <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>
</code></pre></div><h3 id="dexfileloaddex">DexFile.loadDex</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#66d9ef">static</span> DexFile <span style="color:#a6e22e">loadDex</span><span style="color:#f92672">(</span>String sourcePathName<span style="color:#f92672">,</span> String outputPathName<span style="color:#f92672">,</span>
        <span style="color:#66d9ef">int</span> flags<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">,</span> DexPathList<span style="color:#f92672">.</span><span style="color:#a6e22e">Element</span><span style="color:#f92672">[]</span> elements<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> DexFile<span style="color:#f92672">(</span>sourcePathName<span style="color:#f92672">,</span> outputPathName<span style="color:#f92672">,</span> flags<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> elements<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
</code></pre></div><h3 id="dexfile构造方法">DexFile构造方法</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e"> \* Private version with class loader argument.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> \* @param file
</span><span style="color:#75715e"> \*      the File object referencing the actual DEX file
</span><span style="color:#75715e"> \* @param loader
</span><span style="color:#75715e"> \*      the class loader object creating the DEX file object
</span><span style="color:#75715e"> \* @param elements
</span><span style="color:#75715e"> \*      the temporary dex path list elements from DexPathList.makeElements
</span><span style="color:#75715e"> */</span>
 DexFile<span style="color:#f92672">(</span>File file<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">,</span> DexPathList<span style="color:#f92672">.</span><span style="color:#a6e22e">Element</span><span style="color:#f92672">[]</span> elements<span style="color:#f92672">)</span>
     <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">this</span><span style="color:#f92672">(</span>file<span style="color:#f92672">.</span><span style="color:#a6e22e">getPath</span><span style="color:#f92672">(),</span> loader<span style="color:#f92672">,</span> elements<span style="color:#f92672">);</span>
 <span style="color:#f92672">}</span>


DexFile<span style="color:#f92672">(</span>String fileName<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">,</span> DexPathList<span style="color:#f92672">.</span><span style="color:#a6e22e">Element</span><span style="color:#f92672">[]</span> elements<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
   mCookie <span style="color:#f92672">=</span> openDexFile<span style="color:#f92672">(</span>fileName<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> elements<span style="color:#f92672">);</span>
   mInternalCookie <span style="color:#f92672">=</span> mCookie<span style="color:#f92672">;</span>
   mFileName <span style="color:#f92672">=</span> fileName<span style="color:#f92672">;</span>
   <span style="color:#75715e">//System.out.println(&#34;DEX FILE cookie is &#34; + mCookie + &#34; fileName=&#34; + fileName);
</span><span style="color:#75715e"></span> <span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/*
</span><span style="color:#75715e"> \* Open a DEX file. The value returned is a magic VM cookie. On
</span><span style="color:#75715e"> \* failure, an IOException is thrown.
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Object <span style="color:#a6e22e">openDexFile</span><span style="color:#f92672">(</span>String sourceName<span style="color:#f92672">,</span> String outputName<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> flags<span style="color:#f92672">,</span>
     ClassLoader loader<span style="color:#f92672">,</span> DexPathList<span style="color:#f92672">.</span><span style="color:#a6e22e">Element</span><span style="color:#f92672">[]</span> elements<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
   <span style="color:#75715e">// Use absolute paths to enable the use of relative paths when testing on host.
</span><span style="color:#75715e"></span>   <span style="color:#66d9ef">return</span> openDexFileNative<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span>sourceName<span style="color:#f92672">).</span><span style="color:#a6e22e">getAbsolutePath</span><span style="color:#f92672">(),</span>
               <span style="color:#f92672">(</span>outputName <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)?</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> File<span style="color:#f92672">(</span>outputName<span style="color:#f92672">).</span><span style="color:#a6e22e">getAbsolutePath</span><span style="color:#f92672">(),</span>
               flags<span style="color:#f92672">,</span>
               loader<span style="color:#f92672">,</span>
               elements<span style="color:#f92672">);</span>
 <span style="color:#f92672">}</span>
</code></pre></div><p>/art/runtime/native/dalvik_system_DexFile.cc</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#ae81ff">267</span><span style="color:#66d9ef">static</span> jobject <span style="color:#a6e22e">DexFile_openDexFileNative</span>(JNIEnv<span style="color:#f92672">*</span> env,
<span style="color:#ae81ff">268</span>                                         jclass,
<span style="color:#ae81ff">269</span>                                         jstring javaSourceName,
<span style="color:#ae81ff">270</span>                                         jstring javaOutputName ATTRIBUTE_UNUSED,
<span style="color:#ae81ff">271</span>                                         jint flags ATTRIBUTE_UNUSED,
<span style="color:#ae81ff">272</span>                                         jobject class_loader,
<span style="color:#ae81ff">273</span>                                         jobjectArray dex_elements) {

ScopedUtfChars sourceName(env, javaSourceName);

<span style="color:#ae81ff">279</span>  Runtime<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> runtime <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current();
<span style="color:#ae81ff">280</span>  ClassLinker<span style="color:#f92672">*</span> linker <span style="color:#f92672">=</span> runtime<span style="color:#f92672">-&gt;</span>GetClassLinker();
<span style="color:#ae81ff">281</span>  std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>unique_ptr<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&gt;&gt;</span> dex_files;
<span style="color:#ae81ff">282</span>  std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;</span> error_msgs;
<span style="color:#ae81ff">283</span>  <span style="color:#66d9ef">const</span> OatFile<span style="color:#f92672">*</span> oat_file <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
  <span style="color:#75715e">//main
</span><span style="color:#75715e"></span><span style="color:#ae81ff">285</span>  dex_files <span style="color:#f92672">=</span> runtime<span style="color:#f92672">-&gt;</span>GetOatFileManager().OpenDexFilesFromOat(sourceName.c_str(),
<span style="color:#ae81ff">286</span>                                                               class_loader,
<span style="color:#ae81ff">287</span>                                                               dex_elements,
<span style="color:#ae81ff">288</span>                                                               <span style="color:#75715e">/*out*/</span> <span style="color:#f92672">&amp;</span>oat_file,
<span style="color:#ae81ff">289</span>                                                               <span style="color:#75715e">/*out*/</span> <span style="color:#f92672">&amp;</span>error_msgs);

<span style="color:#ae81ff">291</span>  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>dex_files.empty()) {
<span style="color:#ae81ff">292</span>    jlongArray array <span style="color:#f92672">=</span> ConvertDexFilesToJavaArray(env, oat_file, dex_files);
<span style="color:#ae81ff">293</span>    <span style="color:#66d9ef">if</span> (array <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
<span style="color:#ae81ff">294</span>      ScopedObjectAccess soa(env);
<span style="color:#ae81ff">295</span>      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span><span style="color:#f92672">&amp;</span> dex_file : dex_files) {
<span style="color:#ae81ff">296</span>        <span style="color:#66d9ef">if</span> (linker<span style="color:#f92672">-&gt;</span>IsDexFileRegistered(soa.Self(), <span style="color:#f92672">*</span>dex_file)) {
<span style="color:#ae81ff">297</span>          dex_file.release();
<span style="color:#ae81ff">298</span>        }
<span style="color:#ae81ff">299</span>      }
<span style="color:#ae81ff">300</span>    }
<span style="color:#ae81ff">301</span>    <span style="color:#66d9ef">return</span> array;
</code></pre></div><p>/art/runtime/oat_file_manager.h or cc</p>
<h3 id="oatfilemanageropendexfilesfromoat">OatFileManager::OpenDexFilesFromOat</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#ae81ff">84</span>  <span style="color:#75715e">// Finds or creates the oat file holding dex_location. Then loads and returns
</span><span style="color:#75715e"></span><span style="color:#ae81ff">85</span>  <span style="color:#75715e">// all corresponding dex files (there may be more than one dex file loaded
</span><span style="color:#75715e"></span><span style="color:#ae81ff">86</span>  <span style="color:#75715e">// in the case of multidex).
</span><span style="color:#75715e"></span><span style="color:#ae81ff">87</span>  <span style="color:#75715e">// This may return the original, unquickened dex files if the oat file could
</span><span style="color:#75715e"></span><span style="color:#ae81ff">88</span>  <span style="color:#75715e">// not be generated.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">89</span>  <span style="color:#75715e">//
</span><span style="color:#75715e"></span><span style="color:#ae81ff">90</span>  <span style="color:#75715e">// Returns an empty vector if the dex files could not be loaded. In this
</span><span style="color:#75715e"></span><span style="color:#ae81ff">91</span>  <span style="color:#75715e">// case, there will be at least one error message returned describing why no
</span><span style="color:#75715e"></span><span style="color:#ae81ff">92</span>  <span style="color:#75715e">// dex files could not be loaded. The &#39;error_msgs&#39; argument must not be
</span><span style="color:#75715e"></span><span style="color:#ae81ff">93</span>  <span style="color:#75715e">// null, regardless of whether there is an error or not.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">94</span>  <span style="color:#75715e">//
</span><span style="color:#75715e"></span><span style="color:#ae81ff">95</span>  <span style="color:#75715e">// This method should not be called with the mutator_lock_ held, because it
</span><span style="color:#75715e"></span><span style="color:#ae81ff">96</span>  <span style="color:#75715e">// could end up starving GC if we need to generate or relocate any oat files.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">394</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>unique_ptr<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> DexFile<span style="color:#f92672">&gt;&gt;</span> OatFileManager<span style="color:#f92672">::</span>OpenDexFilesFromOat(
<span style="color:#ae81ff">395</span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> dex_location,
<span style="color:#ae81ff">396</span>    jobject class_loader,
<span style="color:#ae81ff">397</span>    jobjectArray dex_elements,
<span style="color:#ae81ff">398</span>    <span style="color:#66d9ef">const</span> OatFile<span style="color:#f92672">**</span> out_oat_file,
<span style="color:#ae81ff">399</span>    std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;*</span> error_msgs) {

<span style="color:#ae81ff">404</span>  <span style="color:#75715e">// Verify we aren&#39;t holding the mutator lock, which could starve GC if we
</span><span style="color:#75715e"></span><span style="color:#ae81ff">405</span>  <span style="color:#75715e">// have to generate or relocate an oat file.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">406</span>  Thread<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> self <span style="color:#f92672">=</span> Thread<span style="color:#f92672">::</span>Current();
<span style="color:#ae81ff">407</span>  Locks<span style="color:#f92672">::</span>mutator_lock_<span style="color:#f92672">-&gt;</span>AssertNotHeld(self);
<span style="color:#ae81ff">408</span>  Runtime<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> runtime <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current();

<span style="color:#ae81ff">410</span>  std<span style="color:#f92672">::</span>unique_ptr<span style="color:#f92672">&lt;</span>ClassLoaderContext<span style="color:#f92672">&gt;</span> context;
<span style="color:#ae81ff">411</span>  <span style="color:#75715e">// If the class_loader is null there&#39;s not much we can do. This happens if a dex files is loaded
</span><span style="color:#75715e"></span><span style="color:#ae81ff">412</span>  <span style="color:#75715e">// directly with DexFile APIs instead of using class loaders.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">413</span>  <span style="color:#66d9ef">if</span> (class_loader <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>) {
<span style="color:#ae81ff">416</span>    context <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
<span style="color:#ae81ff">417</span>  } <span style="color:#66d9ef">else</span> {
<span style="color:#ae81ff">418</span>    context <span style="color:#f92672">=</span> ClassLoaderContext<span style="color:#f92672">::</span>CreateContextForClassLoader(class_loader, dex_elements);
<span style="color:#ae81ff">419</span>  }
<span style="color:#ae81ff">420</span>
<span style="color:#ae81ff">421</span>  OatFileAssistant <span style="color:#a6e22e">oat_file_assistant</span>(dex_location,
<span style="color:#ae81ff">422</span>                                      kRuntimeISA,
<span style="color:#ae81ff">423</span>                                      <span style="color:#f92672">!</span>runtime<span style="color:#f92672">-&gt;</span>IsAotCompiler(),
<span style="color:#ae81ff">424</span>                                      only_use_system_oat_files_);

<span style="color:#ae81ff">437</span>  <span style="color:#a6e22e">if</span> (<span style="color:#f92672">!</span>oat_file_assistant.IsUpToDate()) {
<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>oat_file_assistant.MakeUpToDate(<span style="color:#75715e">/*profile_changed*/</span> false,
<span style="color:#ae81ff">452</span>                                            actual_context,
<span style="color:#ae81ff">453</span>                                            <span style="color:#75715e">/*out*/</span> <span style="color:#f92672">&amp;</span>error_msg)

</code></pre></div><p>/art/libdexfile/dex/dex_file.h</p>
<h4 id="class-dexfile">class DexFile</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h"><span style="color:#ae81ff">63</span><span style="color:#75715e">// Dex file is the API that exposes native dex files (ordinary dex files) and CompactDex.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">64</span><span style="color:#75715e">// Originally, the dex file format used by ART was mostly the same as APKs. The only change was
</span><span style="color:#75715e"></span><span style="color:#ae81ff">65</span><span style="color:#75715e">// quickened opcodes and layout optimizations.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">66</span><span style="color:#75715e">// Since ART needs to support both native dex files and CompactDex files, the DexFile interface
</span><span style="color:#75715e"></span><span style="color:#ae81ff">67</span><span style="color:#75715e">// provides an abstraction to facilitate this.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">68</span>class DexFile {
<span style="color:#ae81ff">83</span>  <span style="color:#75715e">// Raw header_item.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">84</span>  <span style="color:#66d9ef">struct</span> Header {
<span style="color:#ae81ff">85</span>    uint8_t magic_[<span style="color:#ae81ff">8</span>] <span style="color:#f92672">=</span> {};
<span style="color:#ae81ff">86</span>    uint32_t checksum_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// See also location_checksum_
</span><span style="color:#75715e"></span><span style="color:#ae81ff">87</span>    uint8_t signature_[kSha1DigestSize] <span style="color:#f92672">=</span> {};
<span style="color:#ae81ff">88</span>    uint32_t file_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// size of entire file
</span><span style="color:#75715e"></span><span style="color:#ae81ff">89</span>    uint32_t header_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// offset to start of next section
</span><span style="color:#75715e"></span><span style="color:#ae81ff">90</span>    uint32_t endian_tag_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#ae81ff">91</span>    uint32_t link_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// unused
</span><span style="color:#75715e"></span><span style="color:#ae81ff">92</span>    uint32_t link_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// unused
</span><span style="color:#75715e"></span><span style="color:#ae81ff">93</span>    uint32_t map_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// unused
</span><span style="color:#75715e"></span><span style="color:#ae81ff">94</span>    uint32_t string_ids_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// number of StringIds
</span><span style="color:#75715e"></span><span style="color:#ae81ff">95</span>    uint32_t string_ids_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of StringIds array
</span><span style="color:#75715e"></span><span style="color:#ae81ff">96</span>    uint32_t type_ids_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// number of TypeIds, we don&#39;t support more than 65535
</span><span style="color:#75715e"></span><span style="color:#ae81ff">97</span>    uint32_t type_ids_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of TypeIds array
</span><span style="color:#75715e"></span><span style="color:#ae81ff">98</span>    uint32_t proto_ids_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// number of ProtoIds, we don&#39;t support more than 65535
</span><span style="color:#75715e"></span><span style="color:#ae81ff">99</span>    uint32_t proto_ids_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of ProtoIds array
</span><span style="color:#75715e"></span><span style="color:#ae81ff">100</span>    uint32_t field_ids_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// number of FieldIds
</span><span style="color:#75715e"></span><span style="color:#ae81ff">101</span>    uint32_t field_ids_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of FieldIds array
</span><span style="color:#75715e"></span><span style="color:#ae81ff">102</span>    uint32_t method_ids_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// number of MethodIds
</span><span style="color:#75715e"></span><span style="color:#ae81ff">103</span>    uint32_t method_ids_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of MethodIds array
</span><span style="color:#75715e"></span><span style="color:#ae81ff">104</span>    uint32_t class_defs_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// number of ClassDefs
</span><span style="color:#75715e"></span><span style="color:#ae81ff">105</span>    uint32_t class_defs_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of ClassDef array
</span><span style="color:#75715e"></span><span style="color:#ae81ff">106</span>    uint32_t data_size_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// size of data section
</span><span style="color:#75715e"></span><span style="color:#ae81ff">107</span>    uint32_t data_off_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// file offset of data section
</span><span style="color:#75715e"></span><span style="color:#ae81ff">108</span>
<span style="color:#ae81ff">109</span>    <span style="color:#75715e">// Decode the dex magic version
</span><span style="color:#75715e"></span><span style="color:#ae81ff">110</span>    uint32_t GetVersion() <span style="color:#66d9ef">const</span>;
<span style="color:#ae81ff">111</span>  };
</code></pre></div><p>/art/runtime/oat_file_assistant.cc</p>
<h3 id="oatfileassistantmakeuptodate">OatFileAssistant::MakeUpToDate</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#ae81ff">251</span>OatFileAssistant<span style="color:#f92672">::</span>MakeUpToDate(<span style="color:#66d9ef">bool</span> profile_changed,
<span style="color:#ae81ff">252</span>                               ClassLoaderContext<span style="color:#f92672">*</span> class_loader_context,
<span style="color:#ae81ff">253</span>                               std<span style="color:#f92672">::</span>string<span style="color:#f92672">*</span> error_msg) {

<span style="color:#ae81ff">262</span>  OatFileInfo<span style="color:#f92672">&amp;</span> info <span style="color:#f92672">=</span> GetBestInfo();

<span style="color:#ae81ff">273</span>  <span style="color:#a6e22e">switch</span> (info.GetDexOptNeeded(
<span style="color:#ae81ff">274</span>        target, profile_changed, <span style="color:#75715e">/*downgrade*/</span> false, class_loader_context)) {
<span style="color:#ae81ff">275</span>    <span style="color:#66d9ef">case</span> kNoDexOptNeeded:
<span style="color:#ae81ff">276</span>      <span style="color:#66d9ef">return</span> kUpdateSucceeded;
<span style="color:#ae81ff">277</span>
<span style="color:#ae81ff">278</span>    <span style="color:#75715e">// TODO: For now, don&#39;t bother with all the different ways we can call
</span><span style="color:#75715e"></span><span style="color:#ae81ff">279</span>    <span style="color:#75715e">// dex2oat to generate the oat file. Always generate the oat file as if it
</span><span style="color:#75715e"></span><span style="color:#ae81ff">280</span>    <span style="color:#75715e">// were kDex2OatFromScratch.
</span><span style="color:#75715e"></span><span style="color:#ae81ff">281</span>    <span style="color:#66d9ef">case</span> kDex2OatFromScratch:
<span style="color:#ae81ff">282</span>    <span style="color:#66d9ef">case</span> kDex2OatForBootImage:
<span style="color:#ae81ff">283</span>    <span style="color:#66d9ef">case</span> kDex2OatForRelocation:
<span style="color:#ae81ff">284</span>    <span style="color:#66d9ef">case</span> kDex2OatForFilter:
<span style="color:#ae81ff">285</span>      <span style="color:#66d9ef">return</span> GenerateOatFileNoChecks(info, target, class_loader_context, error_msg);
<span style="color:#ae81ff">286</span>  }
</code></pre></div><h3 id="oatfileassistantgenerateoatfilenochecks">OatFileAssistant::GenerateOatFileNoChecks</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#ae81ff">698</span>OatFileAssistant<span style="color:#f92672">::</span>ResultOfAttemptToUpdate OatFileAssistant<span style="color:#f92672">::</span>GenerateOatFileNoChecks(
<span style="color:#ae81ff">699</span>      OatFileAssistant<span style="color:#f92672">::</span>OatFileInfo<span style="color:#f92672">&amp;</span> info,
<span style="color:#ae81ff">700</span>      CompilerFilter<span style="color:#f92672">::</span>Filter filter,
<span style="color:#ae81ff">701</span>      <span style="color:#66d9ef">const</span> ClassLoaderContext<span style="color:#f92672">*</span> class_loader_context,
<span style="color:#ae81ff">702</span>      std<span style="color:#f92672">::</span>string<span style="color:#f92672">*</span> error_msg) {

<span style="color:#ae81ff">717</span>  <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> oat_file_name <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>info.Filename();
<span style="color:#ae81ff">718</span>  <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> vdex_file_name <span style="color:#f92672">=</span> GetVdexFilename(oat_file_name);

<span style="color:#ae81ff">43</span>  Dex2oatFileWrapper <span style="color:#a6e22e">vdex_file_wrapper</span>(OS<span style="color:#f92672">::</span>CreateEmptyFile(vdex_file_name.c_str()));
<span style="color:#ae81ff">744</span>  File<span style="color:#f92672">*</span> vdex_file <span style="color:#f92672">=</span> vdex_file_wrapper.GetFile();

<span style="color:#ae81ff">759</span>  Dex2oatFileWrapper <span style="color:#a6e22e">oat_file_wrapper</span>(OS<span style="color:#f92672">::</span>CreateEmptyFile(oat_file_name.c_str()));
<span style="color:#ae81ff">760</span>  File<span style="color:#f92672">*</span> oat_file <span style="color:#f92672">=</span> oat_file_wrapper.GetFile();

<span style="color:#ae81ff">773</span>  std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;</span> args;
<span style="color:#ae81ff">774</span>  args.push_back(<span style="color:#e6db74">&#34;--dex-file=&#34;</span> <span style="color:#f92672">+</span> dex_location_);
<span style="color:#ae81ff">775</span>  args.push_back(<span style="color:#e6db74">&#34;--output-vdex-fd=&#34;</span> <span style="color:#f92672">+</span> std<span style="color:#f92672">::</span>to_string(vdex_file<span style="color:#f92672">-&gt;</span>Fd()));
<span style="color:#ae81ff">776</span>  args.push_back(<span style="color:#e6db74">&#34;--oat-fd=&#34;</span> <span style="color:#f92672">+</span> std<span style="color:#f92672">::</span>to_string(oat_file<span style="color:#f92672">-&gt;</span>Fd()));
<span style="color:#ae81ff">777</span>  args.push_back(<span style="color:#e6db74">&#34;--oat-location=&#34;</span> <span style="color:#f92672">+</span> oat_file_name);
<span style="color:#ae81ff">778</span>  args.push_back(<span style="color:#e6db74">&#34;--compiler-filter=&#34;</span> <span style="color:#f92672">+</span> CompilerFilter<span style="color:#f92672">::</span>NameOfFilter(filter));
<span style="color:#ae81ff">779</span>  <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string dex2oat_context <span style="color:#f92672">=</span> class_loader_context <span style="color:#f92672">==</span> <span style="color:#66d9ef">nullptr</span>
<span style="color:#ae81ff">780</span>        <span style="color:#f92672">?</span> OatFile<span style="color:#f92672">::</span>kSpecialSharedLibrary
<span style="color:#ae81ff">781</span>        <span style="color:#f92672">:</span> class_loader_context<span style="color:#f92672">-&gt;</span>EncodeContextForDex2oat(<span style="color:#75715e">/*base_dir*/</span> <span style="color:#e6db74">&#34;&#34;</span>);
<span style="color:#ae81ff">782</span>  args.push_back(<span style="color:#e6db74">&#34;--class-loader-context=&#34;</span> <span style="color:#f92672">+</span> dex2oat_context);

<span style="color:#ae81ff">784</span>  <span style="color:#a6e22e">if</span> (<span style="color:#f92672">!</span>Dex2Oat(args, error_msg)) {<span style="color:#75715e">//main
</span><span style="color:#75715e"></span><span style="color:#ae81ff">785</span>    <span style="color:#66d9ef">return</span> kUpdateFailed;
<span style="color:#ae81ff">786</span>  }
<span style="color:#ae81ff">787</span>
<span style="color:#ae81ff">788</span>  <span style="color:#a6e22e">if</span> (vdex_file<span style="color:#f92672">-&gt;</span>FlushCloseOrErase() <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
<span style="color:#ae81ff">789</span>    <span style="color:#f92672">*</span>error_msg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Unable to close vdex file &#34;</span> <span style="color:#f92672">+</span> vdex_file_name;
<span style="color:#ae81ff">790</span>    <span style="color:#66d9ef">return</span> kUpdateFailed;
<span style="color:#ae81ff">791</span>  }
<span style="color:#ae81ff">792</span>
<span style="color:#ae81ff">793</span>  <span style="color:#a6e22e">if</span> (oat_file<span style="color:#f92672">-&gt;</span>FlushCloseOrErase() <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
<span style="color:#ae81ff">794</span>    <span style="color:#f92672">*</span>error_msg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Unable to close oat file &#34;</span> <span style="color:#f92672">+</span> oat_file_name;
<span style="color:#ae81ff">795</span>    <span style="color:#66d9ef">return</span> kUpdateFailed;
<span style="color:#ae81ff">796</span>  }

<span style="color:#ae81ff">804</span>  <span style="color:#66d9ef">return</span> kUpdateSucceeded;
</code></pre></div><h3 id="oatfileassistantdex2oat">OatFileAssistant::Dex2Oat</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#ae81ff">807</span><span style="color:#66d9ef">bool</span> OatFileAssistant<span style="color:#f92672">::</span>Dex2Oat(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;&amp;</span> args,
<span style="color:#ae81ff">808</span>                               std<span style="color:#f92672">::</span>string<span style="color:#f92672">*</span> error_msg) {

<span style="color:#ae81ff">816</span>  std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;</span> argv;
<span style="color:#ae81ff">817</span>  argv.push_back(runtime<span style="color:#f92672">-&gt;</span>GetCompilerExecutable());

<span style="color:#ae81ff">849</span>  argv.insert(argv.end(), args.begin(), args.end());
<span style="color:#ae81ff">850</span>
<span style="color:#ae81ff">851</span>  std<span style="color:#f92672">::</span>string command_line(android<span style="color:#f92672">::</span>base<span style="color:#f92672">::</span>Join(argv, <span style="color:#e6db74">&#39; &#39;</span>));
<span style="color:#ae81ff">852</span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Exec</span>(argv, error_msg);
</code></pre></div><p>/art/runtime/runtime.h</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-h" data-lang="h"><span style="color:#ae81ff">723</span>std<span style="color:#f92672">::</span>string Runtime<span style="color:#f92672">::</span>GetCompilerExecutable() <span style="color:#66d9ef">const</span> {
<span style="color:#ae81ff">724</span>  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>compiler_executable_.empty()) {
<span style="color:#ae81ff">725</span>    <span style="color:#66d9ef">return</span> compiler_executable_;
<span style="color:#ae81ff">726</span>  }
<span style="color:#ae81ff">727</span>  std<span style="color:#f92672">::</span>string compiler_executable(GetAndroidRoot()); <span style="color:#75715e">//getenv(&#34;ANDROID_ROOT&#34;)
</span><span style="color:#75715e"></span><span style="color:#ae81ff">728</span>  compiler_executable <span style="color:#f92672">+=</span> (kIsDebugBuild <span style="color:#f92672">?</span> <span style="color:#e6db74">&#34;/bin/dex2oatd&#34;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/bin/dex2oat&#34;</span>);
<span style="color:#75715e">//位于设备system/bin/dex2oat
</span><span style="color:#75715e"></span><span style="color:#ae81ff">729</span>  <span style="color:#66d9ef">return</span> compiler_executable;
<span style="color:#ae81ff">730</span>}
</code></pre></div><p>/art/dex2oat/dex2oat.cc</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#ae81ff">3176</span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span><span style="color:#f92672">**</span> argv) {
<span style="color:#ae81ff">3177</span>  <span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> <span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(art<span style="color:#f92672">::</span>Dex2oat(argc, argv));
<span style="color:#ae81ff">3184</span>  <span style="color:#66d9ef">return</span> result;
<span style="color:#ae81ff">3185</span>}
</code></pre></div><p><a href="../../%E7%B1%BB%E7%BC%96%E8%AF%91/dex2oat#dex2oat">具体参考类编译原理</a></p>
<h2 id="classloaderloadclass">classLoader.loadClass</h2>
<h3 id="方法调用时机">方法调用时机</h3>
<h4 id="对于appcomponentfactory子类loadedapk进行调用">对于APPComponentFactory子类，LoadedApk进行调用</h4>
<h4 id="对于application和四大组件由instrumentation调用appcomponentfactory进行调用">对于application和四大组件由instrumentation调用APPComponentFactory进行调用</h4>
<h4 id="对于view由layoutinflator在createview方法中进行调用">对于view，由LayoutInflator在createView方法中进行调用</h4>
<h4 id="对于其他自定义类由jvm进行调用">对于其他自定义类，由jvm进行调用</h4>
<p>Class objects for array classes are not created by class loaders, but are created automatically as required by the Java runtime. The class loader for an array class, as returned by Class#getClassLoader() is the same as the class loader for its element type; if the element type is a primitive type, then the array class has no class loader.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">protected</span> Class<span style="color:#f92672">&lt;?&gt;</span> loadClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> resolve<span style="color:#f92672">)</span>
   <span style="color:#66d9ef">throws</span> ClassNotFoundException
 <span style="color:#f92672">{</span>
<span style="color:#75715e">// First, check if the class has already been loaded
</span><span style="color:#75715e"></span> Class<span style="color:#f92672">&lt;?&gt;</span> c <span style="color:#f92672">=</span> findLoadedClass<span style="color:#f92672">(</span>name<span style="color:#f92672">);</span>
 <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
     <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>parent <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
       c <span style="color:#f92672">=</span> parent<span style="color:#f92672">.</span><span style="color:#a6e22e">loadClass</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
     <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
       c <span style="color:#f92672">=</span> findBootstrapClassOrNull<span style="color:#f92672">(</span>name<span style="color:#f92672">);</span>
     <span style="color:#f92672">}</span>
   <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>ClassNotFoundException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
     <span style="color:#75715e">// ClassNotFoundException thrown if class not found
</span><span style="color:#75715e"></span>     <span style="color:#75715e">// from the non-null parent class loader
</span><span style="color:#75715e"></span>   <span style="color:#f92672">}</span>
   <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
     <span style="color:#75715e">// If still not found, then invoke findClass in order
</span><span style="color:#75715e"></span>     <span style="color:#75715e">// to find the class.
</span><span style="color:#75715e"></span>     c <span style="color:#f92672">=</span> findClass<span style="color:#f92672">(</span>name<span style="color:#f92672">);</span><span style="color:#75715e">//main
</span><span style="color:#75715e"></span>   <span style="color:#f92672">}</span>
 <span style="color:#f92672">}</span>
 <span style="color:#66d9ef">return</span> c<span style="color:#f92672">;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"> <span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">protected</span> Class<span style="color:#f92672">&lt;?&gt;</span> findClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">return</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">classForName</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
 <span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/** Called after security checks have been made. */</span>
 <span style="color:#a6e22e">@FastNative</span>
 <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">native</span> Class<span style="color:#f92672">&lt;?&gt;</span> classForName<span style="color:#f92672">(</span>String className<span style="color:#f92672">,</span> <span style="color:#66d9ef">boolean</span> shouldInitialize<span style="color:#f92672">,</span>
     ClassLoader classLoader<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException<span style="color:#f92672">;</span>
</code></pre></div><h2 id="bootclassloaderfindclass">BootClassLoader.findClass</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BootClassLoader</span> <span style="color:#66d9ef">extends</span> ClassLoader <span style="color:#f92672">{</span>
    <span style="color:#75715e">//BootClassLoader采用了单例构造的方式。所以一个Java进程只存在一个BootClassLoader对象
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> BootClassLoader instance<span style="color:#f92672">;</span>
    <span style="color:#75715e">//Loader没有可委托的其他加载器了。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">BootClassLoader</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span> <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span> <span style="color:#f92672">}</span>
    <span style="color:#75715e">//加载目标类，下文将分析其代码。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">protected</span> Class<span style="color:#f92672">&lt;?&gt;</span> findClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">...</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> Class<span style="color:#f92672">.</span><span style="color:#a6e22e">classForName</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>art/runtime/native/java_lang_Class.cc</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#75715e">// &#34;name&#34; is in &#34;binary name&#34; format, e.g. &#34;dalvik.system.Debug$1&#34;.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> jclass <span style="color:#a6e22e">Class_classForName</span>(JNIEnv<span style="color:#f92672">*</span> env, jclass, jstring javaName,
        jboolean initialize,jobject javaLoader) {
    <span style="color:#75715e">//注意传入的参数，javaName为JLS规范里定义的类名（如java.lang.String），
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//initialize为false，javaLoader为false
</span><span style="color:#75715e"></span>    ScopedFastNativeObjectAccess soa(env);
    ScopedUtfChars name(env, javaName);
    ......
    <span style="color:#75715e">//转成JVM规范使用的类名，如Ljava/lang/String;
</span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>string descriptor(DotToDescriptor(name.c_str()));
    StackHandleScope<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">2</span><span style="color:#f92672">&gt;</span> hs(soa.Self());
   
    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">&gt;</span> class_loader(hs.NewHandle(
        soa.Decode<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>ClassLoader<span style="color:#f92672">*&gt;</span>(javaLoader)));
    ClassLinker<span style="color:#f92672">*</span> class_linker <span style="color:#f92672">=</span> Runtime<span style="color:#f92672">::</span>Current()<span style="color:#f92672">-&gt;</span>GetClassLinker();
 
    Handle<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> c(
        hs.NewHandle(class_linker<span style="color:#f92672">-&gt;</span>FindClass(soa.Self(),<span style="color:#75715e">//main
</span><span style="color:#75715e"></span>            descriptor.c_str(), class_loader)));
    ......
    <span style="color:#66d9ef">if</span> (initialize) {      <span style="color:#75715e">//initialize为false的话，将只加载和链接目标类，不初始化它
</span><span style="color:#75715e"></span>        class_linker<span style="color:#f92672">-&gt;</span>EnsureInitialized(soa.Self(), c, true, true);
    }
    <span style="color:#66d9ef">return</span> soa.AddLocalReference<span style="color:#f92672">&lt;</span>jclass<span style="color:#f92672">&gt;</span>(c.Get());
}

</code></pre></div><h2 id="basedexclassloaderfindclass">BaseDexClassLoader.findClass</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Override</span>
 <span style="color:#66d9ef">protected</span> Class<span style="color:#f92672">&lt;?&gt;</span> findClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> ClassNotFoundException <span style="color:#f92672">{</span>
   List<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;</span> suppressedExceptions <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ArrayList<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;();</span>
   Class c <span style="color:#f92672">=</span> pathList<span style="color:#f92672">.</span><span style="color:#a6e22e">findClass</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> suppressedExceptions<span style="color:#f92672">);</span>
  <span style="color:#66d9ef">return</span> c<span style="color:#f92672">;</span>
</code></pre></div><h3 id="dexpathlistfindclass">DexPathList.findClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* Finds the named class in one of the dex files pointed at by
</span><span style="color:#75715e"> \* this instance. This will find the one in the earliest listed
</span><span style="color:#75715e"> \* path element. If the class is found but has not yet been
</span><span style="color:#75715e"> \* defined, then this method will define it in the defining
</span><span style="color:#75715e"> \* context that this instance was constructed with.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> \* @param name of class to find
</span><span style="color:#75715e"> \* @param suppressed exceptions encountered whilst finding the class
</span><span style="color:#75715e"> \* @return the named class or {@code null} if the class is not
</span><span style="color:#75715e"> \* found in any of the dex files
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">public</span> Class<span style="color:#f92672">&lt;?&gt;</span> findClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> List<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;</span> suppressed<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Element element <span style="color:#f92672">:</span> dexElements<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
     Class<span style="color:#f92672">&lt;?&gt;</span> clazz <span style="color:#f92672">=</span> element<span style="color:#f92672">.</span><span style="color:#a6e22e">findClass</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> definingContext<span style="color:#f92672">,</span> suppressed<span style="color:#f92672">);</span>
     <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>clazz <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
       <span style="color:#66d9ef">return</span> clazz<span style="color:#f92672">;</span>
     <span style="color:#f92672">}</span>
   <span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> Class<span style="color:#f92672">&lt;?&gt;</span> findClass<span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> ClassLoader definingContext<span style="color:#f92672">,</span>
     List<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;</span> suppressed<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">return</span> dexFile <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> dexFile<span style="color:#f92672">.</span><span style="color:#a6e22e">loadClassBinaryName</span><span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> definingContext<span style="color:#f92672">,</span> suppressed<span style="color:#f92672">)</span>
       <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
 <span style="color:#f92672">}</span>
</code></pre></div><p>/libcore/dalvik/src/main/java/dalvik/system/DexFile.java</p>
<h3 id="dexfiledefineclass">DexFile.defineClass</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> \* See {@link #loadClass(String, ClassLoader)}.
</span><span style="color:#75715e">  \* This takes a &#34;binary&#34; class name to better match ClassLoader semantics.
</span><span style="color:#75715e"> */</span>
 <span style="color:#66d9ef">public</span> Class <span style="color:#a6e22e">loadClassBinaryName</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">,</span> List<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;</span> suppressed<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   <span style="color:#66d9ef">return</span> defineClass<span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> mCookie<span style="color:#f92672">,</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> suppressed<span style="color:#f92672">);</span>
 <span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Class <span style="color:#a6e22e">defineClass</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> ClassLoader loader<span style="color:#f92672">,</span> Object cookie<span style="color:#f92672">,</span>
                 DexFile dexFile<span style="color:#f92672">,</span> List<span style="color:#f92672">&lt;</span>Throwable<span style="color:#f92672">&gt;</span> suppressed<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
   Class result <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
   <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
     result <span style="color:#f92672">=</span> defineClassNative<span style="color:#f92672">(</span>name<span style="color:#f92672">,</span> loader<span style="color:#f92672">,</span> cookie<span style="color:#f92672">,</span> dexFile<span style="color:#f92672">);</span>
</code></pre></div><p>art/runtime/native/dalvik_system_DexFile.cc</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cc" data-lang="cc"><span style="color:#66d9ef">static</span> jclass <span style="color:#a6e22e">DexFile_defineClassNative</span>(JNIEnv<span style="color:#f92672">*</span> env,
                                        jclass,
                                        jstring javaName,
                                        jobject javaLoader,
                                        jobject cookie,
                                        jobject dexFile) {

      ObjPtr<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Class<span style="color:#f92672">&gt;</span> result <span style="color:#f92672">=</span> class_linker<span style="color:#f92672">-&gt;</span>DefineClass(soa.Self(),
                                                               descriptor.c_str(),
                                                               hash,
                                                               class_loader,
                                                               <span style="color:#f92672">*</span>dex_file,
                                                               <span style="color:#f92672">*</span>dex_class_def);
      <span style="color:#75715e">// Add the used dex file. This only required for the DexFile.loadClass API since normal
</span><span style="color:#75715e"></span>      <span style="color:#75715e">// class loaders already keep their dex files live.
</span><span style="color:#75715e"></span>      class_linker<span style="color:#f92672">-&gt;</span>InsertDexFileInToClassLoader(soa.Decode<span style="color:#f92672">&lt;</span>mirror<span style="color:#f92672">::</span>Object<span style="color:#f92672">&gt;</span>(dexFile),
                                                 class_loader.Get());


</code></pre></div><h2 id="pathclassloader和dexclassloader区别">PathClassLoader和DexClassLoader区别</h2>
<p>两种ClassLoader区别在于DexClassLoader可以加载外置卡中的apk，而PathClassLoader用于加载已安装的apk，构造参数里只有优化路径的参数差异，PathClassLoader传入的是null，而DexClassLoader是可以传入的，这个差异最终是在oat_file_assistant.cc这个文件里的MakeUpToDate方法中进行判断处理，如果noDexOptNeeded(已安装apk)则直接返回，否则(未安装的apk)会进行Dex2Oat过程，这个过程需要这个优化路径，否则无法加载</p>
<h2 id="总结">总结</h2>
<p><a href="https://www.jianshu.com/p/2216554d3291">https://www.jianshu.com/p/2216554d3291</a></p>
<p>BaseDexClassLoader 的构造函数中创建一个DexPathList实例，DexPathList的构造函数会创建一个dexElements 数组</p>
<p>BaseDexClassLoader 在findclass方法中调用了pathList.findClass，这个方法中会遍历dexpathlist中的dexElements数组，如果DexFile不为空那么调用DexFile类的loadClassBinaryName方法返回Class实例。</p>
<p>Tinker进行热修复的流程为：</p>
<p>新dex与旧dex通过dex差分算法生成差异包 patch.dex</p>
<p>将patch dex下发到客户端，客户端将patch dex与旧dex合成为新的全量dex</p>
<p>将合成后的全量dex 插入到dex elements前面(此部分和QQ空间机制类似)，完成修复</p>
<p>可见，Tinker和QQ空间方案最大的不同是，Tinker 下发新旧DEX的差异包，然后将差异包和旧包合成新dex之后进行dex的全量替换，这样也就避免了QQ空间中的插桩操作。</p>
<p><a href="https://blog.csdn.net/u010386612/article/details/51077291">https://blog.csdn.net/u010386612/article/details/51077291</a></p>
<p><a href="http://gityuan.com/2017/03/19/android-classloader/">http://gityuan.com/2017/03/19/android-classloader/</a></p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/android_n%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91%E4%B8%8E%E5%AF%B9%E7%83%AD%E8%A1%A5%E4%B8%81%E5%BD%B1%E5%93%8D%E8%A7%A3%E6%9E%90/" title="Android_N混合编译与对热补丁影响解析"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/en/android/%E8%99%9A%E6%8B%9F%E6%9C%BA/%E7%B1%BB%E5%8A%A0%E8%BD%BD/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B1%82/" title="类加载虚拟机层" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1613805603"></script>
    <script src="/js/perfect-scrollbar.min.js?1613805603"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1613805603"></script>
    <script src="/js/jquery.sticky.js?1613805603"></script>
    <script src="/js/featherlight.min.js?1613805603"></script>
    <script src="/js/highlight.pack.js?1613805603"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1613805603"></script>
    <script src="/js/learn.js?1613805603"></script>
    <script src="/js/hugo-learn.js?1613805603"></script>
    
        
            <script src="/mermaid/mermaid.js?1613805603"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

